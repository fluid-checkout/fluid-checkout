!function(t,e){"function"==typeof define&&define.amd?define([],e()):"object"==typeof exports?module.exports=e():t.StickyStates=e()}("undefined"!=typeof global?global:this.window||this.global,function(t){"use strict";function o(t){for(var e=0,s=0;t&&!isNaN(t.offsetLeft)&&!isNaN(t.offsetTop);)e+=t.offsetLeft-t.scrollLeft,s+=t.offsetTop-t.scrollTop,t=t.offsetParent;return{top:s,left:e}}var i=!1,r={managers:[]},n={},l={elementSelector:"[data-sticky-states]",innerElementSelector:"[data-sticky-states-inner]",isEndPositionClass:"is-end-position",isStickyClass:"is-sticky",isStickyTopClass:"is-sticky--top",isStickyBottomClass:"is-sticky--bottom",isActivatedClass:"is-activated",positionAttribute:"data-sticky-position",thresholdAttribute:"data-sticky-threshold",staticAtEndAttribute:"data-sticky-static-at-end",containerAttribute:"data-sticky-container",position:"top",threshold:0},a=function(){var s={},i=!1,t=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(i=arguments[0],t++);for(;t<arguments.length;t++)!function(t){for(var e in t)t.hasOwnProperty(e)&&(i&&"[object Object]"===Object.prototype.toString.call(t[e])?s[e]=a(s[e],t[e]):s[e]=t[e])}(arguments[t]);return s},c=function(){!function(){for(var t=window.pageYOffset||document.body.scrollTop,e=0;e<r.managers.length;e++){var s,i=r.managers[e],n=t>=i.settings.threshold,o=t>=i.settings.endThreshold,l=i.stickyElement.hasAttribute(i.settings.staticAtEndAttribute);n&&!o?(n=window.getComputedStyle(i.innerElement).width,s=window.getComputedStyle(i.stickyElement).height,i.innerElement.style.top="",i.innerElement.style.width=n,i.stickyElement.style.height=s,i.stickyElement.style.position="",i.stickyElement.classList.add(i.settings.isStickyClass,"top"==i.settings.position?i.settings.isStickyTopClass:i.settings.isStickyBottomClass),i.stickyElement.classList.remove(i.settings.isEndPositionClass)):o&&!l?(s=parseInt(window.getComputedStyle(i.containerElement).height.replace("px")),i.innerElement.style.top=s+"px",i.stickyElement.classList.remove(i.settings.isStickyClass,i.settings.isStickyTopClass,i.settings.isStickyBottomClass),i.stickyElement.classList.add(i.settings.isEndPositionClass)):(i.stickyElement.classList.remove(i.settings.isStickyClass,i.settings.isStickyTopClass,i.settings.isStickyBottomClass,i.settings.isEndPositionClass),i.stickyElement.style.height="",i.innerElement.style.width="",i.innerElement.style.top="")}}(),window.requestAnimationFrame(c)};return r.resetStickyLimits=function(t){var e=Math.max(document.documentElement.clientHeight,window.innerHeight||0),s=t.stickyElement.getAttribute(t.settings.thresholdAttribute),i=t.stickyElement.getBoundingClientRect(),n=o(t.stickyElement.parentNode).top;t.settings.threshold=isNaN(parseInt(s))?n:parseInt(s),"bottom"==t.settings.position&&(t.settings.threshold=Math.max(t.settings.threshold-e+i.height,0)),t.containerElement=t.stickyElement.parentNode;s=t.stickyElement.getAttribute(t.settings.containerAttribute);null!=s&&""!=s&&(t.containerElement=t.stickyElement.closest(s),t.containerElement||(t.containerElement=document.querySelector(s))),t.containerElement&&(s=parseInt(window.getComputedStyle(t.containerElement).height.replace("px")),t.settings.endThreshold=t.settings.threshold+s,"bottom"!=t.settings.position||(i=o(t.stickyElement).top-e+i.height)>t.settings.threshold&&(t.settings.endThreshold=i))},r.getInstance=function(t){for(var e,s=0;s<r.managers.length;s++){var i=r.managers[s];if(i.element==t){e=i;break}}return e},r.initializeElement=function(t){var e={};e.settings=a(n),e.stickyElement=t,e.innerElement=e.stickyElement.querySelector(e.settings.innerElementSelector);t=e.stickyElement.getAttribute(e.settings.positionAttribute);e.settings.position="top"==t||"bottom"==t?t:n.position,r.resetStickyLimits(e),window.addEventListener("resize",function(){r.resetStickyLimits(e)}),e.isActivated=!0,e.stickyElement.classList.add(e.settings.isActivatedClass),r.managers.push(e)},r.init=function(t){if(!i){n=a(l,t);for(var e=document.querySelectorAll(n.elementSelector),s=0;s<e.length;s++)r.initializeElement(e[s]);requestAnimationFrame(c),i=!0}},r});