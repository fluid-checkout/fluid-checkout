!function(e,t){"function"==typeof define&&define.amd?define([],t()):"object"==typeof exports?module.exports=t():e.FCEnhancedSelect=t()}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";function t(){return s(this).each(function(e,t){f.enhanceFields(t)}),this}function i(e){for(var t,n=[],o=e&&e.options,l=0;l<o.length;l++)(t=o[l]).selected&&n.push(t.value||t.text);return n=1===n.length?n[0]:n}function n(e){var t;(e=e.target).tomselect&&(t=i(e),e.tomselect.setValue(t,!0))}function r(){this.focus_node.setAttribute("autocomplete","off-"+Date.now())}function u(){var e;FCUtils.isCurrentBreakpointOrSmaller("phablet")&&(e=this.focus_node.closest(a.formRowSelector))&&FCUtils.scrollToElement(e,null,30)}function o(e){e.target.closest(a.inputFieldSelector)&&(e=e.target.closest(a.formRowSelector).querySelector("select"),m(e))}function l(e){e.target.closest(a.inputFieldSelector)&&(e=e.target.closest(a.formRowSelector).querySelector("select"),p(e))}function c(e){var t,n;e.target.closest(a.wrapperElementSelector)&&(e=e.target.closest(a.wrapperElementSelector).parentNode.querySelector("select"),t=e)&&t.tomselect&&(n=t.tomselect.isOpen,requestAnimationFrame(function(){(n?p:m)(t)}))}var s=jQuery,d=!1,f={},a={bodyClass:"has-fc-enhanced-select",formRowSelector:".form-row.fc-select2-field",selectFieldSelector:".fc-select2-field select",wrapperElementSelector:".ts-wrapper",inputFieldSelector:".fc-select2-field .ts-control > input",fieldSettings:{create:!1,diacritics:!0,openOnFocus:!1},fieldPluginsSingle:[],fieldPluginsMulti:["remove_button"]},m=(null!=s&&(s.fn.select2=t,s.fn.selectWoo=t),function(e){e&&e.tomselect&&!(e=e.tomselect).isOpen&&e.open()}),p=function(e){e&&e.tomselect&&(e=e.tomselect).isOpen&&e.close()};f.enhanceFields=function(e,t){if("undefined"!=typeof TomSelect&&("string"==typeof(e=null==e?a.selectFieldSelector:e)||"object"==typeof e&&e.matches("select"))){null==t&&(t=a.fieldSettings);var n=[e];if("string"==typeof e)try{n=document.querySelectorAll(e)}catch(e){return void console.warn("Enhanced select: "+e.message)}for(var o=0;o<n.length;o++){var l=n[o],c=i(l),s=l.hasAttribute("multiple"),s=(l.tomselect&&l.tomselect.destroy(),t.plugins=s?a.fieldPluginsMulti:a.fieldPluginsSingle,new TomSelect(l,t));s.setValue(c,!0),s.on("focus",r),s.on("blur",r),s.on("dropdown_open",u)}}};return f.init=function(e){d||(a=FCUtils.extendObject(a,e),document.addEventListener("click",c,!0),document.addEventListener("change",n,!0),document.addEventListener("focus",o,!0),document.addEventListener("blur",l,!0),f.enhanceFields(),document.body.classList.add(a.bodyClass),d=!0)},f});
//# sourceMappingURL=maps/fc-enhanced-select-315-beta-11.min.js.map
