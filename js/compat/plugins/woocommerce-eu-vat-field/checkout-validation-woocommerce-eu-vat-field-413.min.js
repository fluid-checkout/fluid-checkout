((e,i)=>{"function"==typeof define&&define.amd?define([],i()):"object"==typeof exports?module.exports=i():e.CheckoutValidationWooCommerceEUVatField=i()})("undefined"!=typeof global?global:this.window||this.global,function(e){function i(e,i,a){return!!e.matches(S.vatFieldSelector)}function a(e,i,a){return!!e.matches(S.sdiFieldSelector)}function t(e,i,a){return!!e.matches(S.codiceFiscaleFieldSelector)}function l(e,i,a){return!!e.matches(S.nifNieFieldSelector)}function o(e,i,a){var t=document.querySelector(S.vatValidationFieldSelector);return e.value&&t&&""===t.value?{valid:!1,message:S.validationMessages.vat_not_valid}:{valid:!0}}function n(e,i,a){var t=document.querySelector(S.vatUniquenessFieldSelector);return e.value&&t&&""===t.value?{valid:!1,message:S.validationMessages.vat_not_unique}:{valid:!0}}function d(e,i,a){var t=document.querySelector(S.sdiValidationFieldSelector),l=document.querySelector(S.vatFieldSelector);return e.value&&l&&""===l.value?{valid:!1,message:S.validationMessages.vat_empty}:e.value&&t&&""===t.value?{valid:!1,message:S.validationMessages.sdi_not_valid}:{valid:!0}}function c(e,i,a){var t=document.querySelector(S.codiceFiscaleValidationFieldSelector);return e.value&&t&&""===t.value?{valid:!1,message:S.validationMessages.codice_fiscale_not_valid}:{valid:!0}}function r(e,i,a){var t=document.querySelector(S.nifNieValidationFieldSelector);return e.value&&t&&""===t.value?{valid:!1,message:S.validationMessages.nif_nie_not_valid}:{valid:!0}}function s(){var e=[document.querySelector(S.vatFieldSelector),document.querySelector(S.sdiFieldSelector),document.querySelector(S.codiceFiscaleFieldSelector),document.querySelector(S.nifNieFieldSelector)];if(window.CheckoutValidation)for(var i=0;i<e.length;i++){var a=e[i];a&&CheckoutValidation.validateField(a,"change")}}function u(e){(e.target.matches(S.vatFieldSelector)||e.target.matches(S.sdiFieldSelector)||e.target.matches(S.codiceFiscaleFieldSelector)||e.target.matches(S.nifNieFieldSelector))&&(e=e.target,window.CheckoutValidation)&&e&&CheckoutValidation.clearValidationResults(e,e.closest(".form-row"))}var v=jQuery,f=null!=v,m=!1,_={},S={vatFieldSelector:"#billing_eu_vat",sdiFieldSelector:"#billing_it_sid_pec",codiceFiscaleFieldSelector:"#billing_it_codice_fiscale",nifNieFieldSelector:"#billing_es_nif_nie",vatValidationFieldSelector:".woocommerce-eu-vat-field-is-valid",vatUniquenessFieldSelector:".woocommerce-eu-vat-field-is-unique",sdiValidationFieldSelector:".woocommerce-eu-vat-field-is-cdi-field-valid",codiceFiscaleValidationFieldSelector:".woocommerce-eu-vat-field-is-codice-fiscale-field-valid",nifNieValidationFieldSelector:".woocommerce-eu-vat-field-is-nif-nie-field-valid",validationMessages:{vat_not_valid:"Vat number is invalid",vat_not_unique:"Vat number has been already associated to another user.",sdi_not_valid:"SDI/Pec has an invalid format. Please check!",vat_empty:"Vat field cannot be empty. Enter a valid vat or remove the SDI/Pec field content.",codice_fiscale_not_valid:"Codice Fiscale has an invalid format.",nif_nie_not_valid:"NIF / NIE code has an invalid format. Please check!"}};return _.init=function(e){m||window.CheckoutValidation&&(S=FCUtils.extendObject(S,e),CheckoutValidation.registerValidationType("vat_invalid","vat-invalid",i,o),CheckoutValidation.registerValidationType("vat_not_unique","vat-not-unique",i,n),CheckoutValidation.registerValidationType("sdi_invalid","sdi-invalid",a,d),CheckoutValidation.registerValidationType("codice_fiscale_invalid","codice-fiscale-invalid",t,c),CheckoutValidation.registerValidationType("nif_nie_invalid","nif-nie-invalid",l,r),window.addEventListener("input",u),f&&v(document).on("updated_checkout",s),m=!0)},_});