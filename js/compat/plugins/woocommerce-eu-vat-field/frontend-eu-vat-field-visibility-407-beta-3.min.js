var wcev_current_business_type,wcev_current_country_code,wcev_is_init=!0,wcev_wcmca_field_prefix="wcmca_",wcev_user_requested_invoice=!0;function wcev_init(){0!=jQuery("#billing_business_consumer_selector").length?(wcev_current_business_type=jQuery("#billing_business_consumer_selector").val(),wcev_on_business_type_selection({currentTarget:jQuery("#billing_business_consumer_selector")},!1)):wcev_on_new_billing_country_selection(!0),jQuery(".wcev_disable_field").attr("tabindex",-1),0<jQuery("#billing_request_eu_vat").length&&wcev_show_ev_vat_field_on_request_checkobox_click(!0)}function wcev_wcmca_show_fields_according_to_the_loaded_business_type(e){var _;0!=jQuery("#"+wcev_wcmca_field_prefix+"billing_business_consumer_selector").length&&(wcev_current_business_type=jQuery("#"+wcev_wcmca_field_prefix+"billing_business_consumer_selector").val(),_=wcev_get_current_selected_billing_country(wcev_wcmca_field_prefix),wcev_show_eu_vat_fields(wcev_is_eu(wcev_current_country_code=_),null,wcev_wcmca_field_prefix))}function wcev_on_business_type_selection(e,_=!0){wcev_current_business_type==jQuery(e.currentTarget).val()&&!wcev_is_init&&_?wcev_is_init=!1:(wcev_current_business_type=jQuery(e.currentTarget).val(),e=wcev_get_current_selected_billing_country(""),wcev_current_country_code=e,_&&wcev_reset_request_invoice_checkbox(""),"true"==wcev.show_eu_vat_field_only_when_the_user_requests_an_invoice?wcev_show_eu_vat_fields(wcev_is_eu(e),"#billing_request_eu_vat_field",""):wcev_show_eu_vat_fields(wcev_is_eu(e),null,""))}function wcev_on_wcmca_business_type_selection(e){wcev_current_business_type=jQuery(e.currentTarget).val();e=wcev_get_current_selected_billing_country(wcev_wcmca_field_prefix);wcev_current_country_code=e,wcev_reset_request_invoice_checkbox(wcev_wcmca_field_prefix),"true"==wcev.show_eu_vat_field_only_when_the_user_requests_an_invoice?wcev_show_eu_vat_fields(wcev_is_eu(e),"#"+wcev_wcmca_field_prefix+"billing_request_eu_vat_field",wcev_wcmca_field_prefix):wcev_show_eu_vat_fields(wcev_is_eu(e),null,wcev_wcmca_field_prefix)}function wcev_on_new_wcmca_billing_country_selection(e){wcev_on_new_billing_country_selection(null)}function wcev_show_wcmca_ev_vat_field_on_request_checkobox_click(e){wcev_show_ev_vat_field_on_request_checkobox_click(null)}function wcev_reset_request_invoice_checkbox(e){0!=jQuery("#"+e+"billing_request_eu_vat").length&&(wcev_user_requested_invoice=!1,jQuery("#"+e+"billing_request_eu_vat").prop("checked",!1))}function wcev_on_new_billing_country_selection(e){var _=null==e?wcev_wcmca_field_prefix:"",i=wcev_get_current_selected_billing_country(_);wcev_current_country_code=i,"true"!=wcev.is_checkout||wcev_is_eu(i)||wcev_reset_request_invoice_checkbox(_),"true"!=wcev.show_eu_vat_field_only_when_the_user_requests_an_invoice||jQuery("#"+_+"billing_request_eu_vat").prop("checked")?wcev_show_eu_vat_fields(wcev_is_eu(i),null,_):wcev_show_eu_vat_fields(wcev_is_eu(i),"#"+_+"billing_request_eu_vat_field",_),!wcev_is_init&&1!=e||(wcev_is_init=!1,wcev_show_ev_vat_field_on_request_checkobox_click(e))}function wcev_show_ev_vat_field_on_request_checkobox_click(e){e=null==e?wcev_wcmca_field_prefix:"";"false"!=wcev.show_require_invoice_option&&(wcev_user_requested_invoice=jQuery("#"+e+"billing_request_eu_vat").prop("checked"),"true"==wcev.show_eu_vat_field_only_when_the_user_requests_an_invoice&&wcev_show_eu_vat_fields(wcev_user_requested_invoice,"#"+e+"billing_eu_vat_field",e),wcev_assign_required(e))}function wcev_show_eu_vat_fields(e,_,i){var c=_==="#"+i+"billing_request_eu_vat_field";let n=void 0===_||null==_?"#"+i+"billing_request_eu_vat_field, #"+i+"billing_eu_vat_field":_;var l=n.replace(/_field/g,""),e=e&&"business"==wcev_current_business_type&&(c||wcev_user_requested_invoice||"false"==wcev.show_require_invoice_option||"false"==wcev.show_eu_vat_field_only_when_the_user_requests_an_invoice);if(n=wcev_manage_additional_country_fields(n,e,i),_=="#"+i+"billing_request_eu_vat_field"&&jQuery("#"+i+"billing_eu_vat_field").hide(),"true"==wcev.show_company_name_field_only_when_the_user_requests_an_invoice&&(jQuery("#"+i+"billing_company_field").hide(),c||(n+=", #"+i+"billing_company_field")),e?(jQuery(n).show(),jQuery(l).prop("disabled",!1),jQuery(l).removeProp("disabled")):(jQuery(n).hide(),jQuery(l).prop("disabled",!0)),c&&"true"==wcev.always_show_require_invoice_option&&(jQuery("#"+i+"billing_request_eu_vat_field").show(),jQuery(l).prop("disabled",!1),jQuery(l).removeProp("disabled")),"true"!=wcev.show_company_name_field_only_when_the_user_requests_an_invoice)switch(wcev_current_business_type){case"consumer":jQuery("#"+i+"billing_company_field").hide();break;case"business":jQuery("#"+i+"billing_company_field").show()}wcev_assign_required(i)}function wcev_manage_additional_country_fields(e,_,i){return"IT"==wcev_current_country_code?(e=e.includes("billing_eu_vat_field")?e+", #"+i+"billing_it_sid_pec_field":e,jQuery("#"+i+"billing_it_codice_fiscale_field").show()):jQuery("#"+i+"billing_it_sid_pec_field, #"+i+"billing_it_codice_fiscale_field").hide(),"GR"==wcev_current_country_code?e=e.includes("billing_eu_vat_field")?e+", #"+i+"billing_gr_tax_office_field, #"+i+"billing_gr_business_activity_field":e:jQuery("#"+i+"billing_gr_tax_office_field, #"+i+"billing_gr_business_activity_field").hide(),"ES"==wcev_current_country_code?jQuery("#"+i+"billing_es_nif_nie_field").show():jQuery("#"+i+"billing_es_nif_nie_field").hide(),"SK"==wcev_current_country_code?e=e.includes("billing_eu_vat_field")?e+", #"+i+"billing_sk_company_id_field, #"+i+"billing_sk_company_dic_field":e:jQuery("#"+i+"billing_sk_company_id_field, #"+i+"billing_sk_company_dic_field").hide(),"CZ"==wcev_current_country_code?e=e.includes("billing_eu_vat_field")?e+", #"+i+"billing_cz_company_id_field":e:jQuery("#"+i+"billing_cz_company_id_field").hide(),e}function wcev_is_eu(e){if("true"==wcev.always_show_the_field)return!0;var _=wcev.eu_country_codes;if(0!=wcev.eu_countries_to_exclude.length)for(var i=0;i<wcev.eu_countries_to_exclude.length;i++){var c=_.indexOf(wcev.eu_countries_to_exclude[i]);0<=c&&_.splice(c,1)}return-1!=jQuery.inArray(e,_)}function wcev_assign_required(e){for(var _=["billing_company_field","billing_eu_vat_field"],i=!1,c=0;c<_.length;c++)i="billing_company_field"==_[c]?"true"==wcev.billing_company_is_required:"true"==wcev.is_required||"true"==wcev.show_require_invoice_option&&"false"==wcev.requested_invoice_not_required&&jQuery("#"+e+"billing_request_eu_vat").prop("checked"),((i=!!jQuery("#"+e+_[c]).is(":visible")&&i)?(jQuery("#"+e+_[c]).addClass("validate-required validate-wcev-eu-vat"),jQuery("#"+e+_[c]).removeClass("woocommerce-validated"),jQuery("#"+e+_[c]+" label .required").remove(),jQuery("#"+e+_[c]+" label").append('<abbr class="required" title="required">*</abbr>'),jQuery("#"+e+_[c]+" label span.optional")):(jQuery("#"+e+_[c]).removeClass("validate-required validate-wcev-eu-vat"),jQuery("#"+e+_[c]).addClass("woocommerce-validated"),jQuery("#"+e+_[c]+" label .required"))).remove()}function wcev_get_current_selected_billing_country(e){return jQuery("#"+e+"billing_country").val()}jQuery(document).ready(function(){wcev_user_requested_invoice="true"!=wcev.show_eu_vat_field_only_when_the_user_requests_an_invoice,jQuery(document).on("change","#billing_country",wcev_on_new_billing_country_selection),jQuery(document).on("change","#billing_request_eu_vat",wcev_show_ev_vat_field_on_request_checkobox_click),jQuery(document).on("change","#billing_business_consumer_selector",wcev_on_business_type_selection),jQuery(document).on("change","#wcmca_billing_country",wcev_on_new_wcmca_billing_country_selection),jQuery(document).on("change","#wcmca_billing_request_eu_vat",wcev_show_wcmca_ev_vat_field_on_request_checkobox_click),jQuery(document).on("change","#wcmca_billing_business_consumer_selector",wcev_on_wcmca_business_type_selection),jQuery(document).on("click","#wcmca_add_new_address_button_billing, .wcmca_edit_address_button",wcev_wcmca_show_fields_according_to_the_loaded_business_type),wcev_current_business_type="true"==wcev.consumer_selector_active?"consumer":"business",wcev_init(),jQuery("body").on("updated_checkout",wcev_init)});