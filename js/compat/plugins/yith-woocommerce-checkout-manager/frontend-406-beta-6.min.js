jQuery(document).ready(function(o){function a(e,t){e.next(".ywccp_error").length||e.after('<span class="ywccp_error"></span>'),e.next(".ywccp_error").html(t)}function e(){var e=o(".ywccp-multiselect-type, select.select"),t=o(".ywccp-datepicker-type"),r=o(".ywccp-timepicker-type");e&&void 0!==o.fn.select2&&o.each(e,function(){var e=o(this),t=e.attr("id");o("#s2id_"+t).length||e.select2({placeholder:e.data("placeholder")})}),void 0!==o.fn.datepicker&&t&&o.each(t,function(){o(this).datepicker({dateFormat:o(this).data("format")||"dd-mm-yy",changeYear:ywccp_front.datepicker_change_year,changeMonth:ywccp_front.datepicker_change_month,yearRange:ywccp_front.datepicker_year_range,minDate:ywccp_front.datepicker_min_date,maxDate:ywccp_front.datepicker_max_date,beforeShow:function(){setTimeout(function(e){o("#ui-datepicker-div").wrap('<div class="yith_datepicker"></div>').css("z-index",99999999999999),o("#ui-datepicker-div").show()},0)},beforeShowDay:function(e){return ywccp_front.datepicker_allowed_days.includes(e.getDay())?[!0]:[!1]},onClose:function(){o("#ui-datepicker-div").hide(),o("#ui-datepicker-div").unwrap()}})}),void 0!==o.fn.timepicki&&r&&o.each(r,function(){o(this).timepicki({reset:!0,disable_keyboard_mobile:!0,show_meridian:ywccp_front.time_format,max_hour_value:ywccp_front.time_format?"12":"23",min_hour_value:ywccp_front.time_format?"1":"0",overflow_minutes:!0,increase_direction:"up"})})}var t,r=o('form[name="checkout"]').find("p.form-row input, p.form-row textarea"),i=(r.length&&o.each(r,function(){var n=o(this),e=n.data("tooltip"),c=n.closest("p.form-row");n.on("blur",function(){var e,t,r=o(this),i=r.val();ywccp_front.validation_enabled&&(!i&&c.hasClass("validate-required")?(e=ywccp_front.err_msg,a(r,e)):i&&c.hasClass("validate-vat")&&(e=i,t=o("#billing_country"),"undefined"!=typeof checkVATNumber)&&t.length&&ywccp_front.vat_validation_enabled&&(e.substr(0,2).toUpperCase()!==(t=t.val())&&(e=t+e),!checkVATNumber(t,e))?a(r,ywccp_front.err_msg_vat):i&&c.hasClass("validate-email")&&!/^([\w-]+(?:\.[\w-]+)*)(\+?)([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/i.test(i)?a(r,ywccp_front.err_msg_mail):n.next(".ywccp_error").remove())}),void 0!==e&&""!=e&&void 0!==o.fn.qtip&&n.qtip({content:{text:e},show:{event:"focus"},style:{classes:"ywccp_tooltip"},position:{my:"bottom center",at:"top center",viewport:o(window)}})}),e(),o(document.body).on("updated_checkout",e),o(document).on("click",".reset_time",function(e){e.preventDefault()}),function(){return jQuery.parseJSON(ywccp_front.conditions)}),l=function(e){return i()[e]},d=function(e){var t=o("*[name="+e+"]");return 1<t.length?n(t):"checkbox"==t.attr("type")?t.is(":checked"):("radio"==t.attr("type")?o("#"+e+":checked"):t).val()},n=function(t){var r=null;return t.each(function(e){if("radio"==t[e].type&&t[e].checked)return r=t[e].value,!1}),r},u=function(e){var t=e.input_name,r=e.type,i=(e.action,e.required,e.value),n=d(t),c=!1;switch(r){case"is-set":n&&(c=!0);break;case"is-empty":n||(c=!0);break;case"has-value":var o=i.split(",");jQuery.each(o,function(e,t){String(n)==String(t)&&(c=!0)});break;case"has-not-value":n!=i&&(c=!0)}return c},c=(o(ywccp_front.form_checkout_selector).on("change","input, select",function(e){c(e)}),o(ywccp_front.form_checkout_selector).on("submit",function(e){c(e)}),o(document.body).on("yith_wccp_i18n_locale_done",function(e){c(e)}),o(document.body).on("updated_checkout",function(e){c(e)}),function(i){o(ywccp_front.form_checkout_selector).find("input, textarea, select, h3[data-name]").each(function(){var e=o(this).attr("name")||o(this).attr("data-name"),t=o(this).closest(".form-row").length?o(this).closest(".form-row"):o(this),e=function(e){var t=l(e);if(void 0===t||0===t.length)return null;for(var r=t.length,i={show:null,hide:null,set_required:null},n=0;n<r;n++){var c=t[n],o=u(c),a=c.action,d=c.required,s=c.wc_required;"products"!=c.input_name?"show"===a&&"no"!=i.show?o?(1!=d&&!s||(i.set_required="yes"),i.show="yes",i.hide="no"):(i.show="no",i.set_required="no",i.hide="yes"):"hide"===a&&"no"!=i.hide&&(o?(i.hide="yes",i.show="no"):(i.hide="no",i.show="yes")):1!=d&&!s||(i.set_required="yes",i.show="yes")}return i}(e),r=!1;null!=e&&("yes"==e.show?(t.show(),"yes"==e.set_required&&(r=!0)):"yes"==e.hide&&t.hide(),s(i.type,t,r))})}),s=function(e,t,r){1==r?(t.addClass("validate-required"),0==t.find("label").find("abbr.required").length&&(t.find("label").find(".optional").remove(),0===t.find("label").find("abbr.required, span.required").length)&&t.find("label").append('<abbr class="required" title="required">*</abbr>')):(t.removeClass("validate-required woocommerce-validated woocommerce-invalid woocommerce-invalid-required-field"),0==t.find("label").find(".optional").length&&(t.find("label").append('<span class="optional">(optional)</span>'),t.find("abbr.required").remove()))};o(ywccp_front.form_checkout_selector).find("input, select").each(function(){var e=ywccp_front.field_ids_to_exclude,t=o(this).attr("id");o.isArray(e)&&o.inArray(t,e,0)<0&&o(this).trigger("change")}),ywccp_front.ship_different_address_old_behaviour&&(t=o("#ship-to-different-address-checkbox").is(":checked"),o(".woocommerce-shipping-fields__field-wrapper").hide(),o(document.body).on("init_checkout",function(){o("#ship-to-different-address-checkbox").prop("checked",t).change(),o(".woocommerce-shipping-fields__field-wrapper").toggle(!0)}))});