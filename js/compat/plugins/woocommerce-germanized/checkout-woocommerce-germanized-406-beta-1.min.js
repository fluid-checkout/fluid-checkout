!function(e,o){"function"==typeof define&&define.amd?define([],o()):"object"==typeof exports?module.exports=o():e.CheckoutWooCommerceGermanized=o()}("undefined"!=typeof global?global:this.window||this.global,function(e){function o(){if(void 0!==window.shiptastic.shipments_pickup_locations.params.i18n_managed_by_pickup_location){var e=u();if(e&&e.length)if(document.querySelector(l.currentPickupLocationInputSelector).value)for(var o=0;o<e.length;o++){var t,i,c=document.querySelector(e[o]);c&&((t=c.closest(l.fieldRowSelector))?(t.classList.add(l.managedByPickupLocationClass),t.querySelector("."+l.locationNoticeClass)||(t=t.querySelector("label"))&&((i=document.createElement("span")).className=l.locationNoticeClass,i.innerHTML=window.shiptastic.shipments_pickup_locations.params.i18n_managed_by_pickup_location,t.parentNode.insertBefore(i,t.nextSibling))):c.classList.add(l.managedByPickupLocationClass))}}}function c(){n(document.body).trigger("update_checkout")}function t(e){if(e.target.matches(l.removePickupLocationButtonSelector)){var o=u();if(o&&o.length)for(var t=0;t<o.length;t++){var i=document.querySelector(o[t]);i&&(i=i.closest(l.fieldContainerSelector))&&s.blockUI(i)}c()}}function i(e){e.target.matches(l.customerNumberFieldSelector)&&c()}var n=jQuery,a=null!=n,r=!1,s={},l={uiProcessingClass:"processing",managedByPickupLocationClass:"wc-shiptastic-managed-by-pickup-location",locationNoticeClass:"wc-shiptastic-managed-by-pickup-location-notice",removePickupLocationButtonSelector:".pickup-location-remove",currentPickupLocationInputSelector:"#current_pickup_location",customerNumberFieldSelector:"#pickup_location_customer_number",fieldContainerSelector:".woocommerce-input-wrapper",fieldRowSelector:".form-row",shippingAddressPrefix:"#shipping_"},u=function(){if(void 0!==window.shiptastic.shipments_pickup_locations.getPickupLocation){var e=document.querySelector(l.currentPickupLocationInputSelector);if(e.value){for(var e=window.shiptastic.shipments_pickup_locations.getPickupLocation(e.value),o=Object.keys(e.address_replacements),t=[],i=0;i<o.length;i++)t.push(l.shippingAddressPrefix+o[i]);return t}}};return s.blockUI=function(e){a&&e&&n(e).addClass(l.uiProcessingClass).block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},s.init=function(e){r||(l=FCUtils.extendObject(l,e),document.addEventListener("click",t,!0),document.addEventListener("keydown",i),a&&n(document.body).on("updated_checkout",o),r=!0)},s});