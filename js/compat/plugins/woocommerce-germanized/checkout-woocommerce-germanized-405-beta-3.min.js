!function(e,t){"function"==typeof define&&define.amd?define([],t()):"object"==typeof exports?module.exports=t():e.CheckoutWooCommerceGermanized=t()}("undefined"!=typeof global?global:this.window||this.global,function(e){function t(){if(void 0!==window.shiptastic.shipments_pickup_locations.params.i18n_managed_by_pickup_location){var e=l();if(e&&e.length)if(document.querySelector(u.currentPickupLocationInputSelector).value)for(var t=0;t<e.length;t++){var o,c,i=document.querySelector(e[t]);i&&((o=i.closest(u.fieldRowSelector))?(o.classList.add(u.managedByPickupLocationClass),o.querySelector("."+u.locationNoticeClass)||(o=o.querySelector("label"))&&((c=document.createElement("span")).className=u.locationNoticeClass,c.innerHTML=window.shiptastic.shipments_pickup_locations.params.i18n_managed_by_pickup_location,o.parentNode.insertBefore(c,o.nextSibling))):i.classList.add(u.managedByPickupLocationClass))}}}function i(){n(document.body).trigger("update_checkout")}function o(e){if(e.target.matches(u.removePickupLocationButtonSelector)){var t=l();if(t&&t.length)for(var o=0;o<t.length;o++){var c=document.querySelector(t[o]);c&&(c=c.closest(u.fieldContainerSelector))&&s.blockUI(c)}i()}}function c(e){e.target.matches(u.customerNumberFieldSelector)&&i()}var n=jQuery,a=null!=n,r=!1,s={},u={uiProcessingClass:"processing",managedByPickupLocationClass:"wc-shiptastic-managed-by-pickup-location",locationNoticeClass:"wc-shiptastic-managed-by-pickup-location-notice",removePickupLocationButtonSelector:".pickup-location-remove",currentPickupLocationInputSelector:"#current_pickup_location",customerNumberFieldSelector:"#pickup_location_customer_number",fieldContainerSelector:".woocommerce-input-wrapper",fieldRowSelector:".form-row",currentLocationAttribute:"data-current-location"},l=function(){if(void 0!==window.shiptastic.shipments_pickup_locations.getPickupLocation){var e=document.querySelector(u.currentPickupLocationInputSelector);if(e.value){for(var e=window.shiptastic.shipments_pickup_locations.getPickupLocation(e.value),t=Object.keys(e.address_replacements),o=[],c=0;c<t.length;c++)o.push("#shipping_"+t[c]);return o}}};return s.blockUI=function(e){a&&e&&n(e).addClass(u.uiProcessingClass).block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},s.init=function(e){r||(u=FCUtils.extendObject(u,e),document.addEventListener("click",o,!0),document.addEventListener("keydown",c),a&&n(document.body).on("updated_checkout",t),r=!0)},s});