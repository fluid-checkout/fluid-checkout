(l=>{function p(t){return WFLS_LOGIN_TRANSLATIONS[t]||t}var v;function s(e){var o=null;return function(){if(null===o){for(var t=0;t<e.length;t++)if(1===(o=l(e[t])).length)return o;o=null}return o}}function t(t,o){void 0===o&&(o={});var e=!1,i=null,a=null,n={},r=s(t);this.locate=function(){return e=e||(()=>{if(null===(i=r()))return!1;if(1!==(a=i.closest("form")).length)return a=null,!1;for(var t in o){var e=a.find(o[t]);if(1!==e.length)return!1;n[t]=e}return!0})()},this.getInput=function(){return e?i:null},this.getForm=function(){return e?a:null},this.getExtra=function(t){return t in n?n[t]:null}}(v=l).Zebra_Tooltips=function(t,n){function r(e){var t,o,i,a,n,r,s,l,p,c,d=e.data("Zebra_Tooltip"),u=v(window);return d.tooltip||(t=v("<div>",{class:"Zebra_Tooltip",css:{opacity:0,display:"block"}}),o=v("<div>",{class:"Zebra_Tooltip_Message",css:{maxWidth:d.max_width}}).html(d.content).appendTo(t),p=v("<div>",{class:"Zebra_Tooltip_Arrow"}).appendTo(t),i=v("<div>").addClass("Zebra_Tooltip_Arrow_Border").appendTo(p),v("<div>").appendTo(p),d.keep_visible&&(t.on("mouseleave"+(d.close_on_click?" click":""),function(){g(e)}),t.on("mouseenter",function(){_(e)})),t.appendTo("body"),d.sticky&&o.addClass("Zebra_Tooltip_Has_Close"),s=t.outerWidth(),l=t.outerHeight(),c=i.outerWidth(),a=i.outerHeight(),n=o.outerWidth(),r=o.outerHeight(),t.css({width:(d={tooltip:t,tooltip_width:s,tooltip_height:l+a/2,message:o,arrow_container:p,arrow_width:c,arrow_height:a,arrow:i}).tooltip_width,height:d.tooltip_height}),d.tooltip_width=d.tooltip_width+(o.outerWidth()-n),d.tooltip_height=d.tooltip_height+(o.outerHeight()-r),t.css({width:d.tooltip_width,height:d.tooltip_height,display:"none"}),d=v.extend(e.data("Zebra_Tooltip"),d),e.data("Zebra_Tooltip",d)),d.sticky&&!d.close&&(v("<a>",{class:"Zebra_Tooltip_Close",href:"javascript:void(0)"}).html("&times;").on("click",function(t){t.preventDefault();t=e.data("Zebra_Tooltip");t.sticky=!1,e.data("Zebra_Tooltip",t),g(e)}).appendTo(d.message),d.close=!0,d=v.extend(e.data("Zebra_Tooltip"),d),e.data("Zebra_Tooltip",d)),f=u.width(),m=u.height(),s=e.offset(),v.extend(d,{element_left:s.left,element_top:s.top,element_width:e.outerWidth(),element_height:e.outerHeight()}),w=u.scrollTop(),h=u.scrollLeft(),l="left"===d.position?d.element_left-d.tooltip_width+d.arrow_width:"right"===d.position?d.element_left+d.element_width-d.arrow_width:d.element_left+(d.element_width-d.tooltip_width)/2,p=d.element_top-d.tooltip_height,c="left"===d.position?d.tooltip_width-d.arrow_width-d.arrow_width/2:"right"===d.position?d.arrow_width/2:(d.tooltip_width-d.arrow_width)/2,l+d.tooltip_width>f+h&&(c-=f+h-(l+d.tooltip_width)-6,(l=f+h-d.tooltip_width-6)+(c=c+d.arrow_width>d.tooltip_width-6?d.tooltip_width-6-d.arrow_width:c)+d.arrow_width/2<d.element_left)&&(c=-1e4),l<h&&(c-=h-l,(l=h+2)+(c=c<0?d.arrow_width/2:c)+d.arrow_width/2>d.element_left+d.element_width)&&(c=-1e4),d.message.css("margin-top",""),d.arrow_container.removeClass("Zebra_Tooltip_Arrow_Top").addClass("Zebra_Tooltip_Arrow_Bottom"),p<w||"below"===d.vertical_alignment&&d.element_top+d.element_height+d.vertical_offset+d.tooltip_height+d.animation_offset<m+w?(p=d.element_top+d.element_height-d.vertical_offset,d.animation_offset=Math.abs(d.animation_offset),d.message.css("margin-top",d.arrow_height/2),d.arrow_container.removeClass("Zebra_Tooltip_Arrow_Bottom").addClass("Zebra_Tooltip_Arrow_Top")):(d.animation_offset=-Math.abs(d.animation_offset),p+=d.vertical_offset),d.arrow_container.css("left",c),d.tooltip.css({left:l,top:p}),v.extend(d,{tooltip_left:l,tooltip_top:p,arrow_left:c}),d=v.extend(e.data("Zebra_Tooltip"),d),e.data("Zebra_Tooltip",d),d}var f,m,h,w,s={animation_speed:250,animation_offset:20,close_on_click:!0,content:!(this.version="2.1.0"),hide_delay:100,keep_visible:!0,max_width:250,opacity:".95",position:"center",prerender:!1,show_delay:100,vertical_alignment:"above",vertical_offset:0,onBeforeHide:null,onHide:null,onBeforeShow:null,onShow:null},l=this,_=function(t){var e=t.data("Zebra_Tooltip");clearTimeout(e.show_timeout),e.muted||(clearTimeout(e.hide_timeout),e.show_timeout=setTimeout(function(){(e=r(t)).onBeforeShow&&"function"==typeof e.onBeforeShow&&!1===e.onBeforeShow(t,e.tooltip)||("block"!==e.tooltip.css("display")&&e.tooltip.css({top:e.tooltip_top+e.animation_offset}),e.tooltip.css("display","block"),e.tooltip.stop(),e.tooltip.animate({top:e.tooltip_top,opacity:e.opacity},e.animation_speed,function(){e.onShow&&"function"==typeof e.onShow&&e.onShow(t,e.tooltip)}))},e.show_delay))},g=function(t){var e=t.data("Zebra_Tooltip");clearTimeout(e.hide_timeout),e.sticky||(clearTimeout(e.show_timeout),e.hide_timeout=setTimeout(function(){!e.tooltip||e.onBeforeHide&&"function"==typeof e.onBeforeHide&&!1===e.onBeforeHide(t,e.tooltip)||(e.close=!1,e.destroy&&(e.muted=!0),t.data("Zebra_Tooltip",e),v("a.Zebra_Tooltip_Close",e.tooltip).remove(),e.tooltip.stop(),e.tooltip.animate({opacity:0,top:e.tooltip_top+e.animation_offset},e.animation_speed,function(){v(this).css("display","none"),e.onHide&&"function"==typeof e.onHide&&e.onHide(t,e.tooltip)}))},e.hide_delay))};l.hide=function(t,o){t.each(function(){var t=v(this),e=t.data("Zebra_Tooltip");e&&(e.sticky=!1,o&&(e.destroy=!0),t.data("Zebra_Tooltip",e),g(t))})},l.show=function(t,o){t.each(function(){var t=v(this),e=t.data("Zebra_Tooltip");e&&(e.sticky=!0,e.muted=!1,o&&(e.destroy=!0),t.data("Zebra_Tooltip",e),_(t))})},t.each(function(){var t,e=v(this),o=e.attr("title"),i=e.data(),a={};for(t in i)0===t.indexOf("ztt_")&&(t=t.replace(/^ztt\_/,""),void 0!==s[t])&&(a[t]=i["ztt_"+t]);a=v.extend(s,l.settings,n,a),o&&(a.content=e.attr("title")),void 0!==a.content&&""!==a.content.trim()&&(e.on({mouseenter:function(){o&&v(this).attr("title",""),_(e)},mouseleave:function(){g(e),o&&v(this).attr("title",o)}}),e.data("Zebra_Tooltip",v.extend({tooltip:null,show_timeout:null,hide_timeout:null,sticky:!1,destroy:!1,muted:!1},a)),a.prerender)&&r(e)})};var n=new t(["input[name=log]","input[name=username]","input#username[name=username]",".woocommerce-form-login input[name=username]",".login input[name=username]"],{password:'input[name="pwd"],input[name=password]'}),r=new t(["input[name=user_login]","#reg_email",".woocommerce-form-register input[name=email]",".register input[name=email]"]),o=[n,r];function a(){for(var t=l(),e=0;e<o.length;e++)o[e].locate()&&(t=t.add(o[e].getInput()));return t}function c(o,i){var t;void 0===i&&(i=a()),"object"==typeof grecaptcha?grecaptcha.ready(function(){grecaptcha.execute(WFLSVars.recaptchasitekey,{action:"login"}).then(function(t){var e=l("#wfls-captcha-token");e.length?e.val(t):i.length&&((e=l('<input type="hidden" name="wfls-captcha-token" id="wfls-captcha-token" />')).val(t),i.parent().append(e)),"function"==typeof o&&o(!0)})}):((t=l("#wfls-captcha-token")).length?t.val("grecaptcha-missing"):i.length&&((t=l('<input type="hidden" name="wfls-captcha-token" id="wfls-captcha-token" />')).val("grecaptcha-missing"),i.parent().append(t)),"function"==typeof o&&o(!0))}function d(t,e){var o=l("#login > h1");if(0<o.length)(i=l("error"===e?'<div id="login_error">':'<p class="message">')).addClass("wfls-login-message"),i.addClass("notice"),"error"===e&&i.addClass("notice-error"),i.html(t),o.after(i),i.get(0).scrollIntoView();else{if(0<l(".woocommerce").length){var o=l('<div class="woocommerce wfls-login-message">'),i=l('<ul role="alert">').addClass("error"===e?"woocommerce-error":"woocommerce-info"),e=(o.append(i),i.append(l("<li>").html(t)),n.getForm());if(null!==(e=null===e?s(["#primary",".content-area","#main",".site-main","main"])():e))return e.before(o),void o.get(0).scrollIntoView()}var a=l("<div>").attr("id","wfls-login-modal").css({position:"fixed",top:0,right:0,bottom:0,left:0,"background-color":"rgba(0,0,0,0.5)","z-index":9999,display:"flex","align-items":"center","justify-content":"center",padding:"16px"}).appendTo(l("body"));a.append(l("<div>").css({"background-color":"#FFF","border-radius":"4px",padding:"16px","text-align":"center"}).append(l("<p>").html(t)).append(l("<button>").text("Dismiss").on("click",function(){a.remove()})))}}function u(t,e,o){var i=this,a=!1,n=!1,r=(o=o||!1,!1);this.getButtons=function(){return t.find(e)},this.block=function(){return!a&&(a=!0,this.getButtons().addClass("disabled").prop("disabled",!0),!0)},this.unblock=function(){this.getButtons().removeClass("disabled").prop("disabled",!1),a=!1},this.release=function(){n=!0},this.clickSubmit=function(){this.unblock();var t=this.getButtons().first();setTimeout(function(){t.trigger("click")},1)},this.initialize=function(e){t.on("submit",function(t){!n||o&&!r?(t.preventDefault(),t.stopPropagation(),n?(r=!0,i.clickSubmit()):i.block()&&e()):r=r&&!1})}}function f(r){var s,t;l(".wfls-login-message").remove(),n.locate()?(s=n.getForm(),n.getInput(),n.getExtra("password"),t=l(s).serialize(),t+="&action=wordfence_ls_authenticate",l.ajax({type:"POST",url:WFLSVars.ajaxurl,dataType:"json",data:t,success:function(t){var e,o,i,a,n;t.hasOwnProperty("reset")&&t.reset&&l("#wfls-prompt-overlay").remove(),t.hasOwnProperty("error")?(d(t.error,"error"),l("#wfls-token").val(""),parseInt(WFLSVars.useCAPTCHA)&&c()):t.hasOwnProperty("message")?(d(t.message,"message"),l("#wfls-token").val(""),parseInt(WFLSVars.useCAPTCHA)&&c()):t.hasOwnProperty("login")&&(t.hasOwnProperty("captcha")&&(l("#wfls-captcha-jwt").length||(e=l('<input type="hidden" name="wfls-captcha-jwt" id="wfls-captcha-jwt" value=""/>'),s.append(e)),l("#wfls-captcha-jwt").val(t.captcha)),r.release(),t.hasOwnProperty("two_factor_required")&&t.two_factor_required?0===l("#wfls-prompt-overlay").length&&(e=l('<div id="wfls-prompt-overlay"></div>'),t=l('<div id="wfls-prompt-wrapper"></div>'),(o=l('<label for="wfls-token">')).text(p("Wordfence 2FA Code")+" "),o.append(l('<a href="javascript:void(0)" class="wfls-2fa-code-help wfls-tooltip-trigger"><i class="dashicons dashicons-editor-help"></i></a>').attr("title",p("The Wordfence 2FA Code can be found within the authenticator app you used when first activating two-factor authentication. You may also use one of your recovery codes."))),o=l("<p>").append(o),i=l('<p><input type="text" name="wfls-token" id="wfls-token" aria-describedby="wfls-token-error" class="input" value="" size="6" autocomplete="one-time-code"/></p>'),(a=l('<p class="wfls-remember-device-wrapper"><label for="wfls-remember-device"><input name="wfls-remember-device" type="checkbox" id="wfls-remember-device" value="1" /> </label></p>')).find("label").append(p("Remember for 30 days")),(n=l('<p class="submit"><input type="submit" name="wfls-token-submit" id="wfls-token-submit" class="button button-primary button-large"/></p>')).find("input[type=submit]").val(p("Log In")),t.append(o),t.append(i),parseInt(WFLSVars.allowremember)&&t.append(a),t.append(n),e.append(t),s.css("position","relative").append(e),s.on("submit",function(){l("#wfls-token-submit").prop("disabled",!0).addClass("disabled")}),l("#wfls-token").focus(),new l.Zebra_Tooltips(l(".wfls-tooltip-trigger"))):r.clickSubmit()),r.unblock()},error:function(t){503==t.status||403==t.status?0<l(".woocommerce").length?(503==t.status?d(p("<strong>ERROR</strong>: Login failed with status code 503. Please contact the site administrator."),"error"):403==t.status&&d(p("<strong>ERROR</strong>: Login failed with status code 403. Please contact the site administrator."),"error"),r.unblock()):window.location.reload(!0):(d(p("<strong>ERROR</strong>: An error was encountered while trying to authenticate. Please try again."),"error"),r.unblock())}})):console.error("Required login elements not found")}l(function(){n.locate()&&(t=new u(n.getForm(),"#wp-submit,[type=submit][name=login]",!0)).initialize(function(){parseInt(WFLSVars.useCAPTCHA)?c(function(){f(t)}):f(t)}),r.locate()&&parseInt(WFLSVars.useCAPTCHA)&&(e=new u(r.getForm(),"[type=submit]")).initialize(function(){c(function(){e.release(),e.clickSubmit()},r.getInput())});var t,e,o,i=l("#wfls-email-verification");i.length?i.val(WFLSVars.verification||""):(o=a()).length&&((i=l('<input type="hidden" name="wfls-email-verification" id="wfls-email-verification" />')).val(WFLSVars.verification),o.parent().append(i)),parseInt(WFLSVars.useCAPTCHA)&&l(".wfls-registration-captcha-contact").on("click",function(t){var e,o,i,a;t.preventDefault(),t.stopPropagation(),r.locate()&&(l("#wfls-prompt-overlay").remove(),t=l('<div id="wfls-prompt-overlay"></div>'),e=l('<div id="wfls-prompt-wrapper"></div>'),(o=l('<p><label for="wfls-message"></label><br/><textarea name="wfls-message" id="wfls-message" class="wfls-textarea"></textarea></p>')).find("label[for=wfls-message]").text(p("Message to Support")),i=l('<input type="hidden" name="wfls-message-nonce" id="wfls-message-nonce"/>'),(a=l('<p class="submit"><input type="submit" name="wfls-support-submit" id="wfls-support-submit" class="button button-primary button-large"/></p>')).find("input[type=submit]").val(p("Send")),e.append(o).append(i).append(a),t.append(e),r.getForm().css("position","relative").append(t),l("#wfls-message-nonce").val(l(this).data("token")),l("#wfls-support-submit").on("click",function(t){t.preventDefault(),t.stopPropagation(),l("#login_error, p.message").remove();t=r.getForm().serialize();t+="&action=wordfence_ls_register_support",l.ajax({type:"POST",url:WFLSVars.ajaxurl,dataType:"json",data:t,success:function(t){var e;t.hasOwnProperty("error")?(d(t.error,"error"),e=l('<div id="login_error">'+t.error+"</div>"),l("#login > h1").after(e)):t.hasOwnProperty("message")&&(d(t.message,"message"),e=l('<p class="message">'+t.message+"</p>"),l("#login > h1").after(e),l("#wfls-support-submit, #wfls-message").attr("disabled",!0))},error:function(t){d(p("An error was encountered while trying to send the message. Please try again."),"error");var e=l('<div id="login_error"></div>');e.html(p("<strong>ERROR</strong>: An error was encountered while trying to send the message. Please try again.")),l("#login > h1").after(e)}})}),o.find("#wfls-message").focus())})})})(jQuery);