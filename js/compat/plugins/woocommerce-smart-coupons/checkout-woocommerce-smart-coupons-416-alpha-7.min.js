((e,o)=>{"function"==typeof define&&define.amd?define([],o(e)):"object"==typeof exports?module.exports=o(e):e.fcSmartCouponsCheckoutSettings=o(e)})("undefined"!=typeof global?global:this.window||this.global,function(r){function e(e){var o,t,c=e.target;c&&c.closest&&(c.closest(p.applyButtonSelector)?(e.preventDefault(),e.stopImmediatePropagation(),o=n(c.closest(p.applyButtonSelector)),(t=o.data("coupon_code")||o.data("coupon")||o.attr("name")||o.find(p.codeTextSelector).text().trim())&&n.ajax({type:"POST",url:r.fcSmartCoupons.applyUrl,data:{coupon_code:t,reference_id:o.data("reference_id")||"",security:r.fcSmartCoupons.applyNonce},dataType:"json",success:function(e){e&&e.message&&(i(e.message),a)&&n(document.body).trigger("update_checkout",{update_shipping_method:!1})},error:function(){}})):c.closest(p.removeLinkSelector)&&(e.preventDefault(),e.stopImmediatePropagation(),t=n(c.closest(p.removeLinkSelector)),o=t.data("coupon"))&&n.ajax({type:"POST",url:r.fcSmartCoupons.removeUrl,data:{coupon_code:o,reference_id:t.data("reference_id")||"",security:r.fcSmartCoupons.removeNonce},dataType:"json",success:function(e){e&&e.message&&(i(e.message),a)&&n(document.body).trigger("update_checkout",{update_shipping_method:!1})},error:function(){}}))}var n=jQuery,a=null!=n,o=!1,t={},p={checkoutNoticesSelector:".fc-checkout-notices",woocommerceNoticesWrapperSelector:".woocommerce-notices-wrapper:first",checkoutFormSelector:"form.woocommerce-checkout",applyButtonSelector:".apply_coupons_credits",removeLinkSelector:"a.woocommerce-remove-coupon",innerNoticesWrapperSelector:".woocommerce-notices-wrapper",codeTextSelector:".code"},c=function(){var e=n(p.checkoutNoticesSelector);return e=(e=e.length?e:n(p.woocommerceNoticesWrapperSelector)).length?e:n(p.checkoutFormSelector)},i=function(e){var o,t=c();t.length&&(o=(o=n("<div>").html(e).find(p.innerNoticesWrapperSelector)).length?o.html():e,t.is("form")?t.prepend(o):t.empty().append(o))};return t.init=function(){o||void 0!==r.fcSmartCoupons&&(document.addEventListener("click",e,!0),o=!0)},t});