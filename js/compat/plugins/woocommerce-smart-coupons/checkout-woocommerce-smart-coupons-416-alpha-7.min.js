((e,t)=>{"function"==typeof define&&define.amd?define([],t()):"object"==typeof exports?module.exports=t():e.FCSmartCouponsCheckout=t()})("undefined"!=typeof global?global:this.window||this.global,function(e){function t(e){var t,o,r,c=e.target;c&&c.closest&&(c.closest(i.applyButtonSelector)?(e.preventDefault(),e.stopImmediatePropagation(),t=c.closest(i.applyButtonSelector),a&&t&&(r=(r=t.getAttribute("data-coupon_code")||t.getAttribute("data-coupon")||t.getAttribute("name"))||(t.querySelector(i.codeTextSelector)?t.querySelector(i.codeTextSelector).textContent.trim():""))&&(o=fcSettings.wcAjaxUrl.replace("%%endpoint%%","fc_sc_apply_coupon"),n.ajax({type:"POST",url:o,data:{coupon_code:r,reference_id:t.getAttribute("data-reference_id")||"",security:i.applyNonce},dataType:"json",success:function(e){e&&e.message&&(p(e.message),n(document.body).trigger("update_checkout",{update_shipping_method:!1}))},error:function(){}}))):c.closest(i.removeLinkSelector)&&(e.preventDefault(),e.stopImmediatePropagation(),o=c.closest(i.removeLinkSelector),a)&&o&&(r=o.getAttribute("data-coupon"))&&(t=fcSettings.wcAjaxUrl.replace("%%endpoint%%","fc_sc_remove_coupon"),n.ajax({type:"POST",url:t,data:{coupon_code:r,reference_id:o.getAttribute("data-reference_id")||"",security:i.removeNonce},dataType:"json",success:function(e){e&&e.message&&(p(e.message),n(document.body).trigger("update_checkout",{update_shipping_method:!1}))},error:function(){}})))}var n=jQuery,a=null!=n,o=!1,r={},i={preferredNoticesWrapperSelector:".fc-checkout-notices",fallbackNoticesWrapperSelector:".woocommerce-notices-wrapper:first-child, form.woocommerce-checkout",applyButtonSelector:".apply_coupons_credits",removeLinkSelector:"a.woocommerce-remove-coupon",innerNoticesWrapperSelector:".woocommerce-notices-wrapper",codeTextSelector:".code",applyNonce:"",removeNonce:""},c=function(){var e=document.querySelector(i.preferredNoticesWrapperSelector)||document.querySelector(i.fallbackNoticesWrapperSelector);return e||null},p=function(e){var t,o=c();o&&((t=document.createElement("div")).innerHTML=e,t=(t=t.querySelector(i.innerNoticesWrapperSelector))?t.innerHTML:e,o.tagName&&"form"===o.tagName.toLowerCase()?o.insertAdjacentHTML("afterbegin",t):(o.innerHTML="",o.insertAdjacentHTML("beforeend",t)))};return r.init=function(e){o||(i=FCUtils.extendObject(i,e),document.addEventListener("click",t,!0),o=!0)},r});