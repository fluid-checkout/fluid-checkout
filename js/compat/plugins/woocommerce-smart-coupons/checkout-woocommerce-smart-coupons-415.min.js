jQuery(function(c){var n,a;"undefined"!=typeof fcSmartCoupons&&(n=function(){var e=c(".fc-checkout-notices");return e=(e=e.length?e:c(".woocommerce-notices-wrapper:first")).length?e:c("form.woocommerce-checkout")},a=function(e){var o,t=n();t.length&&(o=(o=c("<div>").html(e).find(".woocommerce-notices-wrapper")).length?o.html():e,t.is("form")?t.prepend(o):t.empty().append(o))},document.addEventListener("click",function(e){var o,t=e.target;t&&t.closest&&(t=t.closest(".apply_coupons_credits"))&&(e.preventDefault(),e.stopImmediatePropagation(),o=c(t),e=o.data("coupon_code")||o.data("coupon")||o.attr("name")||o.find(".code").text().trim())&&(o.css("opacity","0.5"),c.ajax({type:"POST",url:fcSmartCoupons.applyUrl,data:{coupon_code:e,reference_id:o.data("reference_id")||"",security:fcSmartCoupons.applyNonce},dataType:"json",success:function(e){e&&e.message&&(a(e.message),c(document.body).trigger("update_checkout",{update_shipping_method:!1}))},error:function(){},complete:function(){o.css("opacity","")}}))},!0),document.addEventListener("click",function(e){var o=e.target;o&&o.closest&&(o=o.closest("a.woocommerce-remove-coupon"))&&(e.preventDefault(),e.stopImmediatePropagation(),e=c(o),o=e.data("coupon"))&&c.ajax({type:"POST",url:fcSmartCoupons.removeUrl,data:{coupon_code:o,reference_id:e.data("reference_id")||"",security:fcSmartCoupons.removeNonce},dataType:"json",success:function(e){e&&e.message&&(a(e.message),c(document.body).trigger("update_checkout",{update_shipping_method:!1}))},error:function(){}})},!0))});