jQuery(function(_){if("undefined"==typeof wc_country_select_params||"undefined"==typeof wc_city_select_params)return!1;_().select2&&((t=function(){_("select.city_select:visible").each(function(){var t=_.extend({placeholderOption:"first",width:"100%"},{formatMatches:function(t){return 1===t?wc_country_select_params.i18n_matches_1:wc_country_select_params.i18n_matches_n.replace("%qty%",t)},formatNoMatches:function(){return wc_country_select_params.i18n_no_matches},formatAjaxError:function(){return wc_country_select_params.i18n_ajax_error},formatInputTooShort:function(t,e){e-=t.length;return 1==e?wc_country_select_params.i18n_input_too_short_1:wc_country_select_params.i18n_input_too_short_n.replace("%qty%",e)},formatInputTooLong:function(t,e){t=t.length-e;return 1==t?wc_country_select_params.i18n_input_too_long_1:wc_country_select_params.i18n_input_too_long_n.replace("%qty%",t)},formatSelectionTooBig:function(t){return 1===t?wc_country_select_params.i18n_selection_too_long_1:wc_country_select_params.i18n_selection_too_long_n.replace("%qty%",t)},formatLoadMore:function(){return wc_country_select_params.i18n_load_more},formatSearching:function(){return wc_country_select_params.i18n_searching}});_(this).select2(t)})})(),_(document.body).bind("city_to_select",function(){t()}),_(document.body).bind("updated_checkout",t));var t,e=wc_city_select_params.cities.replace(/&quot;/g,'"'),c=_.parseJSON(e);_("body").on("country_to_state_changing",function(t,e,n){var a=n.find("#billing_state, #shipping_state, #calc_shipping_state, #state").val();_(document.body).trigger("state_changing",[e,a,n])}),_("body").on("change","select.state_select, #calc_shipping_state, #state",function(a){requestAnimationFrame(function(){var t=_(a.target),e=t.closest(".woocommerce-shipping-fields, .woocommerce-billing-fields, .woocommerce-address-fields"),n=e.find("#billing_country, #shipping_country, #calc_shipping_country, #country").val(),t=t.val();_(document.body).trigger("state_changing",[n,t,e])})});function i(t){var e,n,a;t.is("input")?t.prop("disabled",!1):(e=t.attr("name"),n=t.attr("id"),a=t.attr("placeholder"),t.parent().find(".select2-container").remove(),t.replaceWith('<input type="text" class="input-text" name="'+e+'" id="'+n+'" placeholder="'+a+'" />'),window.CheckoutValidation&&0<t.length&&CheckoutValidation.clearValidationResults(t[0],t[0].closest(".form-row")))}function r(t,e){var n,a,o,c,i,r=t.val(),l=(!r&&t.attr("data-fallback-value")&&(r=t.attr("data-fallback-value")),t.is("input")?(n=t.attr("name"),a=t.attr("id"),o=t.attr("placeholder"),t.replaceWith('<select name="'+n+'" id="'+a+'" class="city_select" placeholder="'+o+'"></select>'),t=_("#"+a)):t.prop("disabled",!1),"");for(c in e)e.hasOwnProperty(c)&&(l=l+'<option value="'+(i=e[c])+'">'+i+"</option>");if(t.html('<option value="">'+wc_city_select_params.i18n_select_city_text+"</option>"+l),-1<t[0].type.indexOf("select")&&null!==r&&!t[0].querySelector('option[value="'+r+'"]'))for(var l=t[0].options,s=0;s<l.length;s++)if(l[s].value.toLowerCase()==r.toLowerCase()){r=l[s].value;break}(_('option[value="'+r+'"]',t).length?t.val(r):t.val("")).change(),!window.CheckoutValidation||r&&_('option[value="'+r+'"]',t).length||CheckoutValidation.clearValidationResults(t[0],t[0].closest(".form-row")),_(document.body).trigger("city_to_select")}_(document.body).on("updated_checkout",function(){_("#billing_state, #shipping_state, #calc_shipping_state, #state").addClass("state_to_city")}),_("body").on("state_changing",function(t,e,n,a){var o=a.find("#billing_city, #shipping_city, #calc_shipping_city, #city");a.find("#billing_state, #shipping_state, #calc_shipping_state, #state").addClass("state_to_city"),0<o.length&&o[0].tomselect&&o[0].tomselect.destroy(),c[e]?c[e]instanceof Array?r(o,c[e]):n?c[e][n]?r(o,c[e][n]):i(o):(i(o),(a=o).val("").change(),a.prop("disabled",!0),window.CheckoutValidation&&CheckoutValidation.clearValidationResults(a[0],a[0].closest(".form-row"))):i(o)}),_(".cart-collaterals").length&&_("#calc_shipping_state").length&&new MutationObserver(function(){_("#calc_shipping_state").change()}).observe(document.querySelector(".cart-collaterals"),{childList:!0})});