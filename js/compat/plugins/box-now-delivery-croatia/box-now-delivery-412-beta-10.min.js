(d=>{function e(){var e;0===d("#box_now_delivery_button").length&&"popup"===boxNowDeliverySettings.displayMode?(e=boxNowDeliverySettings.buttonText||"Izaberi paketomat",d('label[for="shipping_method_0_box_now_delivery"]').after('<button type="button" id="box_now_delivery_button" style="display:none;">'+e+"</button>"),o()):"embedded"===boxNowDeliverySettings.displayMode&&(d('label[for="shipping_method_0_box_now_delivery"]').after('<div id="box_now_delivery_embedded_map" style="display:none;"></div>'),t()),e=`
      <style id="box-now-delivery-button-styles">
        #box_now_delivery_button {
          background-color: ${boxNowDeliverySettings.buttonColor||"#84C33F"} !important;
          color: #fff !important;
        }
      </style>
    `,d("head").append(e)}function o(){d(document).on("click","#box_now_delivery_button",function(i){i.preventDefault();{let e=boxNowDeliverySettings.gps_option,o=d('input[name="billing_postcode"]').val(),t="https://widget-v5.boxnow.hr/popup.html",n=(t+="off"===e?"?gps=no&zip="+encodeURIComponent(o)+"&autoclose=yes&autoselect=no":"?gps=yes&autoclose=yes&autoselect=no",d("<iframe>",{src:t,css:{position:"fixed",top:"50%",left:"50%",width:"80%",height:"80%",border:0,borderRadius:"20px",transform:"translate(-50%, -50%)",zIndex:9999}}));window.addEventListener("message",function(e){"closeIframe"===e.data||void 0!==e.data.boxnowClose?(d("#box_now_delivery_overlay").remove(),n.remove()):l(e.data)}),(i=d("<div>",{id:"box_now_delivery_overlay",css:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0)",zIndex:9998}})).on("click",function(){d("#box_now_delivery_overlay").remove(),d("iframe[src^='https://widget-v5.boxnow.hr/popup.html']").remove()}),d("body").append(i),d("body").append(n)}})}function t(){var e,o,t=d("#box_now_delivery_embedded_map iframe");0===t.length&&(t=(()=>{let e=boxNowDeliverySettings.gps_option,o=d('input[name="billing_postcode"]').val(),t="https://widget-v5.boxnow.hr/";return t+="off"===e?"?gps=no&zip="+encodeURIComponent(o):"?gps=yes",d("<iframe>",{src:t,css:{width:"100%",height:"100%",border:0}})})(),e=d("<div>",{id:"box_now_selected_locker_details",css:{display:"none",marginTop:"10px"}}),o=d("<div>",{id:"locker_info_container"}),d("#box_now_delivery_embedded_map").css({position:"relative",width:"100%",height:"100%"}).append(t).append(o.append(e)),t.on("load",function(){window.addEventListener("message",function(e){void 0===e.data.boxnowClose&&l(e.data)})})),d("#shipping_method_0_box_now_delivery").is(":checked")?d("#box_now_delivery_embedded_map").show():d("#box_now_delivery_embedded_map").hide()}function l(e){var o,t,n,i;void 0!==e.boxnowLockerId&&void 0!==e.boxnowLockerAddressLine1&&void 0!==e.boxnowLockerPostalCode&&void 0!==e.boxnowLockerName&&(i=e.boxnowLockerId,o=e.boxnowLockerAddressLine1,t=e.boxnowLockerPostalCode,n=e.boxnowLockerName,localStorage.setItem("box_now_selected_locker",JSON.stringify(e)),0===d("#box_now_selected_locker_details").length&&d("#box_now_delivery_button").after('<div id="box_now_selected_locker_details" style="display:none;"></div>'),0===d("#_boxnow_locker_id").length?d("<input>").attr({type:"hidden",id:"_boxnow_locker_id",name:"_boxnow_locker_id",value:i}).appendTo("#box_now_selected_locker_details"):d("#_boxnow_locker_id").val(i),i="el"===(document.documentElement.lang||"el")?greekContent:`
<div style="font-family: Arial, sans-serif; margin-top: 10px;">
  <p style="margin-bottom: 10px; color: rgb(132 195 62);"><b>Izabrani paketomat</b></p>
  <p style="margin-bottom: 5px; font-size: 14px;"><b>Ime paketomata:</b> ${n}</p>
  <p style="margin-bottom: 5px; font-size: 14px;"><b>Adresa paketomata:</b> ${o}</p>
  <p style="margin-bottom: 5px; font-size: 14px;"><b>Po≈°tanski broj:</b> ${t}</p>
</div>`,d("#box_now_selected_locker_details").html(i).show(),0===d("#box_now_selected_locker_input").length?d("<input>").attr({type:"hidden",id:"box_now_selected_locker_input",name:"box_now_selected_locker",value:JSON.stringify(e)}).appendTo("#box_now_selected_locker_details"):d("#box_now_selected_locker_input").val(JSON.stringify(e)),"popup"===boxNowDeliverySettings.displayMode&&(d("#box_now_delivery_overlay").remove(),d("iframe[src^='https://widget-v5.boxnow.hr/popup.html']").remove()),d(document.body).trigger("update_checkout"))}function n(){var e=localStorage.getItem("box_now_selected_locker");e&&l(JSON.parse(e))}function i(){var e;"popup"===boxNowDeliverySettings.displayMode?((e=d("#box_now_delivery_button")).css("background-color",boxNowDeliverySettings.buttonColor),d("#shipping_method_0_box_now_delivery").is(":checked")?e.show():d("shipping_method_[0]").is(":checked")?e.hide():"box_now_delivery"===d('input[type="hidden"][name="shipping_method[0]"]').val()&&e.show()):"embedded"===boxNowDeliverySettings.displayMode&&t()}function r(){e(),i(),o()}window.addEventListener("message",function(e){void 0!==e.data.boxnowClose?"popup"===boxNowDeliverySettings.displayMode&&d(".boxnow-popup").remove():(l(e.data),n())}),d(document).ready(function(){r(),n(),d(document.body).on("updated_checkout",function(){r()}),d(document.body).on("change",'input[type="radio"][name="shipping_method[0]"]',i)})})(jQuery);