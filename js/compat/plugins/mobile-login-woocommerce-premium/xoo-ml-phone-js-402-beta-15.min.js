jQuery(document).ready(function(s){function n(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}"firebase"===xoo_ml_phone_localize.operator&&firebase.initializeApp(xoo_ml_phone_localize.firebase.config);class e{constructor(e,o="phone"){this.parentFormHandler=e,this.$parentForm=this.parentFormHandler.$phoneForm,this.displayType=this.$parentForm.find('input[name="xoo-ml-otp-form-display"]').length?this.$parentForm.find('input[name="xoo-ml-otp-form-display"]').val():"inline_input",this.operator=xoo_ml_phone_localize.operator,this.firebaseAuth=!1,"external_form"===this.displayType?(this.$otpForm=s(xoo_ml_phone_localize.html.otp_form_external).insertAfter(this.$parentForm).attr("data-type",o),this.$noticeCont=this.$otpForm.find(".xoo-ml-notice")):(this.parentFormHandler.$phoneInput.siblings(".xoo-ml-inline-otp-cont").length||(e=this.parentFormHandler.$phoneInput.closest(".xoo-aff-input-group").length?this.parentFormHandler.$phoneInput.closest(".xoo-aff-input-group"):this.parentFormHandler.$phoneInput,s(xoo_ml_phone_localize.html.otp_form_inline).insertAfter(e)),this.$otpForm=this.$parentForm.find(".xoo-ml-inline-otp-cont"),this.$noticeCont=this.$otpForm.siblings(".xoo-ml-notice")),this.$submitBtn=this.$otpForm.find(".xoo-ml-otp-submit-btn"),this.$inputs=this.$otpForm.find(".xoo-ml-otp-input"),this.$resendLink=this.$otpForm.find(".xoo-ml-otp-resend-link"),this.noticeTimout=this.resendTimer=!1,this.customFormData={},this.events()}events(){this.$resendLink.on("click",{_thisObj:this},this.resendOTP),"external_form"===this.displayType?(this.$otpForm.find(".xoo-ml-otp-no-change").on("click",{_thisObj:this},this.changeParentInput),this.$otpForm.on("submit",{_thisObj:this},this.onSubmit),this.$inputs.on("keyup",{_thisObj:this},this.onOTPInputChange)):this.$submitBtn.on("click",{_thisObj:this},this.onSubmit)}onOTPInputChange(e){e.data._thisObj;s(this).val().length===parseInt(s(this).attr("maxlength"))&&0!==s(this).next("input.xoo-ml-otp-input").length&&s(this).next("input.xoo-ml-otp-input").focus(),0===s(this).val().length&&8==e.keyCode&&0!==s(this).prev("input.xoo-ml-otp-input").length&&s(this).prev("input.xoo-ml-otp-input").focus().val("")}onSubmit(e){e.preventDefault();var o=e.data._thisObj;if(!o.validateInputs()||!o.getOtpValue().length)return!1;o.$submitBtn.addClass("xoo-ml-processing"),"firebase"===o.operator?o.firebaseAuth.confirm(o.getOtpValue()).then(function(e){firebase.auth().currentUser.getIdToken(!1).then(function(e){o.verifyOTP({firebase_idToken:e})})}).catch(function(e){o.verifyOTP({firebase_error:JSON.stringify(e)})}):o.verifyOTP()}changeParentInput(e){e=e.data._thisObj;e.$otpForm.hide(),e.$parentForm.show(),e.$inputs.val("")}resendOTP(e){e.preventDefault();var o=e.data._thisObj,e=(o.startResendTimer(),{action:"xoo_ml_resend_otp",parentFormData:u(o.$parentForm.serializeArray())});o.$resendLink.addClass("xoo-ml-processing"),s.ajax({url:xoo_ml_phone_localize.adminurl,type:"POST",data:e,success:function(e){o.$resendLink.trigger("xoo_ml_otp_resent",[e,o]),o.$resendLink.removeClass("xoo-ml-processing")}})}validateInputs(){var t=!0;return"inline_input"!==this.displayType&&this.$inputs.each(function(e,o){o=s(o);if(!parseInt(o.val())&&0!==parseInt(o.val()))return o.focus(),t=!1}),t}setPhoneData(e){this.$otpForm.find(".xoo-ml-otp-no-txt").html(e.otp_txt),this.parentFormHandler.verifiedPHone=!1,this.activeNumber=e.phone_no,this.activeCode=e.phone_code}onSuccess(){this.$otpForm.hide(),this.$inputs.val(""),this.$parentForm.show()}startResendTimer(){var e=this,o=this.$otpForm.find(".xoo-ml-otp-resend"),t=o.find(".xoo-ml-otp-resend-link"),n=o.find(".xoo-ml-otp-resend-timer"),i=parseInt(xoo_ml_phone_localize.resend_wait);0!==i&&(t.addClass("xoo-ml-disabled"),clearInterval(this.resendTimer),this.resendTimer=setInterval(function(){n.html("("+i+")"),i<=0&&(clearInterval(e.resendTimer),t.removeClass("xoo-ml-disabled"),n.html("")),i--},1e3))}showNotice(e){var o=this;clearTimeout(this.noticeTimout),this.$noticeCont.html(e).show(),this.noticeTimout=setTimeout(function(){o.$noticeCont.hide()},4e3)}onOTPSent(e){var o=this;o.$otpForm.show(),setTimeout(function(){o.$inputs.first().trigger("click"),o.$inputs.first().focus(),o.$inputs.first().attr("autofocus",!0)},500),o.startResendTimer(),o.setPhoneData(e),("inline_input"===o.displayType?o.parentFormHandler.$inlineVerifyBtn:o.$parentForm).hide()}verifyOTP(e){var o=this,e=s.extend({otp:o.getOtpValue(),token:o.$parentForm.find('input[name="xoo-ml-form-token"]').val(),action:"xoo_ml_otp_form_submit",parentFormData:u(o.$parentForm.serializeArray())},e);s.ajax({url:xoo_ml_phone_localize.adminurl,type:"POST",data:e,success:function(e){o.$submitBtn.removeClass("xoo-ml-processing"),e.notice&&o.showNotice(e.notice),0===e.error&&(o.onSuccess(),console.log(o.$otpForm),o.$otpForm.trigger("xoo_ml_on_otp_success",[e]))}})}validateFormSubmit(){if(this.validateInputs()&&this.getOtpValue().length)return this.$submitBtn.addClass("xoo-ml-processing"),!0}getOtpValue(){var t="";return this.$inputs.each(function(e,o){t+=s(o).val()}),t}}class o extends e{constructor(e){super(e,"phone"),this.activeNumber=this.activeCode="",e.$phoneInput&&e.$phoneInput.parent().css("position","relative")}}class t extends e{constructor(e){super(e,"email"),this.operator=null}}class i{constructor(e){this.$phoneForm=e,this.$phoneInput=this.$phoneForm.find(".xoo-ml-phone-input"),this.$phoneCode=this.$phoneForm.find(".xoo-ml-phone-cc"),this.formType=this.$phoneForm.find('input[name="xoo-ml-form-type"]').length?this.$phoneForm.find('input[name="xoo-ml-form-type"]').val():"",this.$submit_btn=this.$phoneForm.find('button[type="submit"]'),this.$easyLoginCont=this.$phoneForm.closest(".xoo-el-form-container"),this.otpFormHandler=new o(this),"inline_input"===this.otpFormHandler.displayType?(s(xoo_ml_phone_localize.inline_otp_verify_btn).insertAfter(this.$phoneInput),this.$inlineVerifyBtn=this.$phoneInput.siblings(".xoo-ml-inline-verify"),this.$noticeCont=this.otpFormHandler.$noticeCont):this.$phoneForm.siblings(".xoo-el-notice").length?this.$noticeCont=this.$phoneForm.siblings(".xoo-el-notice"):this.$phoneForm.siblings(".xoo-ml-notice").length?this.$noticeCont=this.$phoneForm.siblings(".xoo-ml-notice"):s('<div class="xoo-ml-notice"></div>').insertBefore(this.$phoneForm),this.adjustPositions()}events(){"inline_input"===this.otpFormHandler.displayType&&(this.$inlineVerifyBtn.on("click",{_thisObj:this},this.formSubmit),this.$phoneInput.add(this.$phoneCode).on("keyup change",{_thisObj:this},this.onNumberChange)),this.$phoneInput.add(this.$phoneCode).on("keyup change",{_thisObj:this},this.cleanNumber),this.$phoneForm.on("submit",{_thisObj:this},this.formSubmit),this.otpFormHandler.$resendLink.on("xoo_ml_otp_resent",{_thisObj:this},this.onOTPResent)}onOTPResent(e,o){e=e.data._thisObj;"firebase"===xoo_ml_phone_localize.operator&&o.otp_sent&&o.phone_code&&o.phone_no?e.sendOTPUsingFirebase(o):e.OTPrequested(o)}adjustPositions(){var t=this;this.$phoneInput.innerHeight()<=10||(this.$inlineVerifyBtn&&this.$inlineVerifyBtn.css("top",this.$phoneInput.position().top+this.$phoneInput.innerHeight()/2-(this.$inlineVerifyBtn.innerHeight()?this.$inlineVerifyBtn.innerHeight()/2:10)),setTimeout(function(){var e,o;t.$phoneForm.is(":hidden")&&(t.$phoneForm.show(),e=!0),t.$phoneCode.length&&t.$phoneInput.innerHeight()&&(o={height:t.$phoneInput.innerHeight()+"px","line-height":t.$phoneInput.innerHeight()+"px"},t.$phoneCode.css(o),t.$phoneCode.siblings(".select2").length)&&t.$phoneCode.siblings(".select2").css(o),e&&t.$phoneForm.hide()},200))}cleanNumber(e){e=e.data._thisObj;isNaN(e.getPhoneNumber("number"))&&e.$phoneInput.val(""),"yes"===xoo_ml_phone_localize.del_0&&e.getPhoneNumber("number")&&e.$phoneInput.val(parseInt(e.getPhoneNumber("number")))}onNumberChange(e){e=e.data._thisObj;e.otpFormHandler.$otpForm.hide(),e.$noticeCont.hide()}sendFormData(){var o=this,e=this.$phoneForm.serialize()+"&action=xoo_ml_request_otp";o.$submit_btn.length&&o.$submit_btn.attr("name")&&(e=e+"&"+o.$submit_btn.attr("name")+"="+o.$submit_btn.val()),o.$submit_btn.addClass("xoo-ml-processing"),o.$inlineVerifyBtn&&o.$inlineVerifyBtn.addClass("xoo-ml-processing"),s.ajax({url:xoo_ml_phone_localize.adminurl,type:"POST",data:e,success:function(e){"firebase"===xoo_ml_phone_localize.operator&&e.otp_sent&&e.phone_code&&e.phone_no?o.sendOTPUsingFirebase(e):o.OTPrequested(e)},complete:function(){}})}OTPrequested(e){e.notice&&this.$noticeCont.html(e.notice).show(),e.otp_sent&&this.otpFormHandler.onOTPSent(e),this.$phoneForm.trigger("xoo_ml_otp_requested",[e]),this.$submit_btn.removeClass("xoo-ml-processing"),this.$inlineVerifyBtn&&this.$inlineVerifyBtn.removeClass("xoo-ml-processing")}sendOTPUsingFirebase(n){var e,o,i=this;"firebase"===xoo_ml_phone_localize.operator&&(window.recaptchaVerifier||(s('<div class="xoo-ml-recaptcha"></div>').insertBefore(i.$phoneForm),window.recaptchaVerifier=new firebase.auth.RecaptchaVerifier(i.$phoneForm.siblings(".xoo-ml-recaptcha").get(0),{size:"invisible",callback:function(e){}})),e=n.phone_code.toString()+n.phone_no.toString(),o=window.recaptchaVerifier,firebase.auth().signInWithPhoneNumber(e,o).then(function(e){i.otpFormHandler.firebaseAuth=e,i.OTPrequested(n)}).catch(function(e){var o,t;n.otp_sent=0,n.notice=e.message?(o=e.message,t="error",xoo_ml_phone_localize.notices[t+"_placeholder"].replace("%s",o)):xoo_ml_phone_localize.notices.try_later,i.OTPrequested(n),console.log(e)}))}getPhoneNumber(e){var o=this.$phoneCode.length&&this.$phoneCode.val()?this.$phoneCode.val().trim().toString():"",t=this.$phoneInput.val().toString().trim();return"code"===e?o:"number"===e?t:o+t}getOTPFormPreviousState(){return!(this.$phoneCode.length&&this.otpFormHandler.activeCode!==this.getPhoneNumber("code")||this.otpFormHandler.activeNumber!==this.getPhoneNumber("number")||(this.otpFormHandler.$otpForm.show(),("external_form"===this.otpFormHandler.displayType?this.$phoneForm:this.$inlineVerifyBtn).hide(),0))}}class r extends i{constructor(e){super(e),this.$phoneForm=e,this.$changePhone=this.$phoneForm.find(".xoo-ml-reg-phone-change"),this.verifiedPHone=!1,this.registerEvents(),this.getPhoneNumber("number")&&"update_user"===this.formType&&(this.verifiedPHone=this.initialPhone=this.getPhoneNumber(),this.$phoneInput.trigger("change"))}registerEvents(){this.otpFormHandler.$otpForm.on("xoo_ml_on_otp_success",{_thisObj:this},this.onOtpSuccess),this.$changePhone.on("click",{_thisObj:this},this.changePhone),this.events()}fieldsValidation(){var e,o=this.$phoneForm,t="";return isNaN(this.getPhoneNumber("number"))&&(t=xoo_ml_phone_localize.notices.invalid_phone),!(t="external_form"===this.otpFormHandler.displayType&&o.find('input[name="woocommerce-register-nonce"]').length&&(e=o.find('input[name="email"]'),o=o.find('input[name="password"]'),e.length&&!e.val()&&(t=xoo_ml_phone_localize.notices.empty_email),o.length)&&!o.val()?xoo_ml_phone_localize.notices.empty_password:t)||(this.$noticeCont.html(t).show(),!1)}formSubmit(e){var o;e.target.matches("form.checkout")||((o=e.data._thisObj).$noticeCont.hide(),s(".xoo-el-notice").hide(),0===o.getPhoneNumber("number").length&&"required"!==xoo_ml_phone_localize.show_phone)||o.otpFormHandler&&o.verifiedPHone!==o.getPhoneNumber()&&(e.preventDefault(),e.stopImmediatePropagation(),o.fieldsValidation())&&(o.getOTPFormPreviousState()?"inline_input"===o.otpFormHandler.displayType&&o.$noticeCont.html(xoo_ml_phone_localize.notices.verify_error).show():o.sendFormData())}onOtpSuccess(e,o){var e=e.data._thisObj,t=e.otpFormHandler;e.verifiedPHone=e.initialPhone=e.getPhoneNumber(),"inline_input"===t.displayType?(e.$inlineVerifyBtn.html(xoo_ml_phone_localize.strings.verified).show(),e.$phoneInput.trigger("change")):(e.$phoneInput.prop("readonly",!0).addClass("xoo-ml-disabled"),e.$changePhone.show(),"yes"===xoo_ml_phone_localize.auto_submit_reg&&e.$phoneForm.find('[type="submit"]').trigger("click")),o.notice&&e.$noticeCont.html(o.notice).show()}changePhone(e){s(this).hide(),e.data._thisObj.$phoneInput.prop("readonly",!1).focus()}}function h(){s('input[name="xoo-ml-reg-phone"]').each(function(e,o){var t=s(this).parents("form").find('input[name="xoo-ml-form-type"]');!s(this).parents("form").find(".xoo-ml-inline-verify").length&&t.length&&"login_with_otp"!==t.val()&&new r(s(this).closest("form"))})}var a;h(),s(document.body).on("updated_checkout",function(){h()});class l extends i{constructor(e){super(e),this.$loginForm=e}OTPrequested(e){if("exists"===e.e_code&&this.$easyLoginCont.length){var o=this.$easyLoginCont.find('input[name="xoo-ml-reg-phone"]'),t=this.$easyLoginCont.find('[name="xoo-ml-reg-phone-cc"]');if(!o.length)return;o.val(this.getPhoneNumber("number")),t.length&&t.val(this.getPhoneNumber("code")).trigger("change"),this.$easyLoginCont.find(".xoo-el-forcereg-tgr").trigger("click"),this.$easyLoginCont.find(".xoo-el-notice").html(e.notice).show()}super.OTPrequested.call(this,e)}formSubmit(e){var o=e.data._thisObj;e.preventDefault(),e.stopImmediatePropagation(),o.processFormSubmit()}processFormSubmit(){this.$noticeCont.hide(),s(".xoo-el-notice").hide(),this.getOTPFormPreviousState()||this.sendFormData()}onOtpSuccess(){}}class m extends l{constructor(e,o){super(e),this.$parentForm=o,this.$parentOTPLoginBtn=this.$parentForm.find(".xoo-ml-open-lwo-btn"),this.$loginOTPBtn=this.$loginForm.find(".xoo-ml-login-otp-btn"),this.loginEvents()}loginEvents(){this.otpFormHandler.$otpForm.on("xoo_ml_on_otp_success",{_thisObj:this},this.onOtpSuccess),this.$parentOTPLoginBtn.on("click",{_thisObj:this},this.openLoginForm),this.$loginForm.find(".xoo-ml-low-back").on("click",{_thisObj:this},this.openParentLoginForm),this.events()}openParentLoginForm(e){e=e.data._thisObj;e.$parentForm.show(),e.$loginForm.hide(),e.$noticeCont.hide()}onOtpSuccess(e,o){var e=e.data._thisObj;o.notice&&e.$noticeCont.html(o.notice).show(),void 0!==o.redirect&&(e=e.$parentForm.find('input[name="xoo_el_redirect"]').length?e.$parentForm.find('input[name="xoo_el_redirect"]').val():o.redirect,window.location=e)}openLoginForm(e,o){e=e.data._thisObj;e.$loginForm.show(),e.$parentForm.hide(),s(".xoo-el-notice").hide()}}s(".xoo-ml-open-lwo-btn").each(function(e,o){var t=s(this).closest("form"),n=(s('<form class="xoo-lwo-form"></form>').insertAfter(t),t.next(".xoo-lwo-form")),i=t.find(".xoo-ml-lwo-form-placeholder");n.append(i.html()),i.remove(),("yes"===xoo_ml_phone_localize.login_first?t:n).hide(),new m(n,t)});class p{constructor(e){this.$form=this.$phoneForm=e,this.$input=this.$form.find('input[name="xoo-ml-email-input"]'),this.$easyLoginSection=this.$form.closest(".xoo-el-section"),this.$easyLoginCont=this.$easyLoginSection.closest(".xoo-el-form-container"),this.$parentForm=this.$easyLoginSection.find(".xoo-el-action-form"),this.$submit_btn=this.$form.find('button[type="submit"]'),this.otpFormHandler=new t(this),this.$form.siblings(".xoo-el-notice").length?this.$noticeCont=this.$form.siblings(".xoo-el-notice"):this.$form.siblings(".xoo-ml-notice").length&&(this.$noticeCont=this.$form.siblings(".xoo-ml-notice")),this.emailFormEvents()}emailFormEvents(){this.$form.on("submit",{_thisObj:this},this.formSubmit),this.otpFormHandler.$otpForm.on("xoo_ml_on_otp_success",{_thisObj:this},this.onOtpSuccess),this.$form.find(".xoo-ml-email-goback").on("click",{_thisObj:this},this.openParentLoginForm),this.otpFormHandler.$resendLink.on("xoo_ml_otp_resent",{_thisObj:this},this.onOTPResent)}onOTPResent(e,o){e.data._thisObj.OTPrequested(o)}openParentLoginForm(e){e=e.data._thisObj;e.$parentForm.show(),e.$form.hide(),e.$noticeCont.hide()}onOtpSuccess(e,o){var e=e.data._thisObj;o.notice&&e.$noticeCont.html(o.notice).show(),void 0!==o.redirect&&(e=e.$parentForm.length&&e.$parentForm.find('input[name="xoo_el_redirect"]').length?e.$parentForm.find('input[name="xoo_el_redirect"]').val():o.redirect,window.location=e)}getEmailValue(){return this.$input.val()}formSubmit(e){e.preventDefault(),e.data._thisObj.sendOTP()}sendOTP(){var o=this,e=this.$form.serialize()+"&action=xoo_ml_email_request_otp";o.$submit_btn.addClass("xoo-ml-processing"),s.ajax({url:xoo_ml_phone_localize.adminurl,type:"POST",data:e,success:function(e){o.OTPrequested(e)},complete:function(){}})}OTPrequested(e){e.notice&&this.$noticeCont.html(e.notice).show(),this.$form.trigger("xoo_ml_otp_requested",[e]),e.otp_sent&&this.otpFormHandler.onOTPSent(e),this.$submit_btn.removeClass("xoo-ml-processing")}}s('input[name="xoo-ml-email-input"]').each(function(e,o){s(this).closest("form.xoo-el-form-single").length||new p(s(this).closest("form"))}),s("body").on("click",".xoo-ml-open-email-otp-form",function(){var e=s(this).closest("form"),o=(e.length?e.hide():o=s(this).siblings("form.xoo-ml-email-form"),s(this).siblings("form.xoo-ml-email-form"));(o=!o.length&&s(this).parents(".xoo-el-form-container").length?s(this).parents(".xoo-el-form-container").find("form.xoo-ml-email-form"):o).show()});class c{static loginWithEmailOTP="yes"===xoo_ml_phone_localize.login_with_email_otp;static loginWithPhoneOTP="yes"===xoo_ml_phone_localize.login_with_phone_otp;static loginWithPassword="yes"===xoo_ml_phone_localize.login_with_password;static autoSendOTPEmail=this.loginWithEmailOTP&&(!this.loginWithPassword||"email"===xoo_ml_phone_localize.single_otpauto||"em_phone"===xoo_ml_phone_localize.single_otpauto);static autoSendOTPhone=this.loginWithPhoneOTP&&(!this.loginWithPassword||"phone"===xoo_ml_phone_localize.single_otpauto||"em_phone"===xoo_ml_phone_localize.single_otpauto);constructor(e){this.loginPhoneFormHandler=new l(e),this.$emailInput=e.find(".xoo-ml-email-input"),this.$emailInput.length&&(this.emailFormHandler=new p(e),this.$emailCont=e.find(".xoo-ml-eminput-cont"),this.$emailInput=e.find(".xoo-ml-email-input")),this.$singleForm=e,this.$userInput=e.find('input[name="xoo-el-sing-user"]'),this.$easyLoginCont=e.closest(".xoo-el-form-container"),this.$phoneCont=e.find(".xoo-ml-phinput-cont"),this.$phoneInput=e.find("input.xoo-ml-phone-input"),this.$cc=e.find("select.xoo-ml-phone-cc"),this.$noticeCont=e.siblings(".xoo-el-notice"),this.$fieldsCont=e.find(".xoo-el-sing-fields"),this.activeField="username",this.$fieldsCont.attr("data-active",this.activeField),this.$lwoBtn=e.find("button.xoo-el-single-otp-btn"),this.singleFormEvents()}singleFormEvents(){this.$userInput.length&&this.$userInput.on("keyup",{_thisObj:this},this.userInputChange),this.$phoneInput.on("keyup",{_thisObj:this},this.phoneInputChange),this.$emailInput.on("keyup",{_thisObj:this},this.emailInputChange),this.loginPhoneFormHandler.otpFormHandler.$otpForm.on("xoo_ml_on_otp_success",{_thisObj:this},this.onOtpSuccess),this.loginPhoneFormHandler.events(),this.loginPhoneFormHandler.$phoneForm.off("submit"),this.$singleForm.on("submit",{_thisObj:this},this.formSubmit),this.$singleForm.on("xoo_ml_otp_requested",{_thisObj:this},this.onOTPRequest),this.$cc.on("change",{_thisObj:this},this.changeRegCC),this.$singleForm.on("reset",{_thisObj:this},this.resetToDefault)}resetToDefault(e){e=e.data._thisObj;e.$userInput.closest(".xoo-aff-group").show(),e.$phoneCont.add(e.$emailCont).detach()}changeRegCC(e){e=e.data._thisObj.$easyLoginCont.find("form.xoo-el-form-register");e.length&&e.find(".xoo-ml-phone-cc").val(s(this).val()).trigger("change")}onOTPRequest(e){e.data._thisObj.$lwoBtn.removeClass("xoo-ml-processing")}onOtpSuccess(e,o){e=e.data._thisObj;o.notice&&e.$noticeCont.html(o.notice).show(),void 0!==o.redirect&&(window.location=o.redirect)}formSubmit(e){e.preventDefault();var o=e.data._thisObj,t=s(e.originalEvent.submitter).hasClass("xoo-el-single-otp-btn");t&&o.$lwoBtn.addClass("xoo-ml-processing"),o.$noticeCont.hide(),"phone"===o.activeField&&(o.autoSendOTPhone||t)?(o.$singleForm.find('input[name="redirect"]').val(o.$easyLoginCont.find('.xoo-el-form-login input[name="xoo_el_redirect"]').val()),l.prototype.processFormSubmit.call(o.loginPhoneFormHandler),e.stopImmediatePropagation()):"email"===o.activeField&&(o.autoSendOTPEmail||t)?(o.emailFormHandler.sendOTP(),e.stopImmediatePropagation()):(t=o.$userInput.val(),"email"===o.activeField?t=o.$emailInput.val():"phone"===o.activeField&&(t=o.loginPhoneFormHandler.getPhoneNumber(),o.$singleForm.find('input[name="_xoo_ml_phone_number"]').val(o.loginPhoneFormHandler.getPhoneNumber("number"))),o.$userInput.val(t),o.$singleForm.find('input[name="_xoo_ml_active_input"]').val(o.activeField),o.$emailCont.detach(),o.$phoneCont.detach(),setTimeout(function(){o.reattach("email"),o.reattach("phone")},10))}reattach(e="email"){e="email"===e?this.$emailCont:this.$phoneCont;e.parent().length||this.$fieldsCont.prepend(e)}userInputChange(e){var e=e.data._thisObj,o=s(this).val();e.$lwoBtn.hide(),e.$phoneCont.length&&3<o.length&&!isNaN(o)?(e.reattach("phone"),e.$phoneCont.show(),e.$phoneInput.val(o).focus(),e.$userInput.closest(".xoo-aff-group").hide(),e.$emailCont.detach(),e.activeField="phone",c.loginWithPhoneOTP&&!c.autoSendOTPhone&&e.$lwoBtn.show()):n(o)?(e.reattach("email"),e.$emailCont.show(),e.emailFormHandler.$input.val(o).focus(),e.$userInput.closest(".xoo-aff-group").hide(),e.$phoneCont.detach(),e.activeField="email",c.loginWithEmailOTP&&!c.autoSendOTPEmail&&e.$lwoBtn.show()):e.activeField="username",e.$fieldsCont.attr("data-active",e.activeField)}phoneInputChange=function(e){var o=e.data._thisObj,t=s(this).val();t.length&&!isNaN(t)||(o.$phoneInput.val(""),o.$phoneCont.hide(),o.$userInput.closest(".xoo-aff-group").show(),o.$userInput.val(t).focus()),isNaN(t)&&e.stopImmediatePropagation()};emailInputChange=function(e){var o=e.data._thisObj,t=s(this).val();n(t)||(o.$emailCont.hide(),o.$emailInput.val(""),o.$userInput.closest(".xoo-aff-group").show(),o.$userInput.val(t).focus(),e.stopImmediatePropagation())}}function u(e){for(var o={},t=0;t<e.length;t++)o[e[t].name]=e[t].value;return o}function d(e){var o;return e.id?(o=(o=e.element.getAttribute("data-cc"))&&o.toLowerCase(),s('<div class="xoo-ml-flag-cont"><span class="flag '+o+'"></span><span>'+e.text+"</span></div>")):e.text}s("form.xoo-el-form-single").each(function(e,o){new c(s(o))}),s(document.body).on("xoo_el_form_toggled",function(e,o,t){var t=t.$container,n=(t.find(".xoo-ml-notice").hide(),t.find(".xoo-lwo-form")),i=t.find(".xoo-ml-email-form"),s=t.find(".xoo-el-form-login");n.length&&i.hide(),s.length&&("yes"===xoo_ml_phone_localize.login_first?(n.length?n.show():i.length&&i.show(),s.hide()):(n.hide(),s.show())),($otpForm=t.find(".xoo-ml-otp-form")).length&&$otpForm.hide()}),s.fn.select2&&((a=function(){s("select.xoo-ml-phone-cc, select.xoo-aff-phone_code").each(function(e,o){s(o).hasClass("select2-hidden-accessible")||s(o).select2({templateResult:d,templateSelection:d})})})(),s(document.body).on("updated_checkout",function(){a()})),s(".xoo-ml-inline-otp-cont").on("xoo_ml_on_otp_success",function(e,o){var t=s(this).parents("form");t.length&&t.find('input[name="gform_submit"]').length&&(window["gf_submitting_"+t.find('input[name="gform_submit"]').val()]=0)}),"yes"!==xoo_ml_phone_localize.login_with_password&&s("button.xoo-ml-low-back, button.xoo-ml-email-goback").hide()});