jQuery(function(_){function e(){0<_(g).length||"yes"==alg_wc_eu_vat_ajax_object.add_progress_text&&_(n).append('<div id="alg_wc_eu_vat_progress"></div>')}var a,o,t,i,l='input[name="billing_eu_vat_number"]',s='input[name="billing_company"]',d='select[name="billing_country"]',c='select[name="shipping_country"]',r="#ship-to-different-address",n='p[id="billing_eu_vat_number_field"]',v='label[for="billing_eu_vat_number"]',m='input[name="billing_eu_vat_number_customer_decide"]',u='input[name="billing_eu_vat_number_belgium_compatibility"]',g='div[id="alg_wc_eu_vat_progress"]',p=1e3,b="no";function w(){j()}function j(){var e=_(n),a=_(l),o=_(v);""!=_(s).val()?(e.removeClass("woocommerce-invalid"),e.removeClass("woocommerce-validated"),e.addClass("validate-required"),a.addClass("field-required"),o.find("span.optional").remove(),o.find("abbr").remove(),o.append('<abbr class="required" title="required">*</abbr>')):(e.removeClass("woocommerce-invalid"),e.removeClass("woocommerce-validated"),e.removeClass("validate-required"),a.removeClass("field-required"),o.find("abbr").hide(),o.find("span.optional").remove(),o.append('<span class="optional">(optional)</span>'))}function x(){var e=_(n),a=_(l),o=_(v),t=_(g);if("yes"==alg_wc_eu_vat_ajax_object.add_progress_text&&"yes"==alg_wc_eu_vat_ajax_object.hide_message_on_preserved_countries&&0<alg_wc_eu_vat_ajax_object.preserve_countries.length&&(0<=jQuery.inArray(_(d).val(),alg_wc_eu_vat_ajax_object.preserve_countries)?t.hide():t.show()),0<_(m).length){if(_(m).is(":checked"))return e.removeClass("woocommerce-invalid"),e.removeClass("woocommerce-validated"),e.removeClass("validate-required"),a.removeClass("field-required"),o.find("abbr").hide(),o.find("span.optional").remove(),o.append('<span class="optional">(optional)</span>'),void e.hide();e.removeClass("woocommerce-invalid"),e.removeClass("woocommerce-validated"),e.addClass("validate-required"),a.addClass("field-required"),o.find("span.optional").remove(),o.find("abbr").show(),e.show()}0<_(u).length&&(b=_(u).is(":checked")?"yes":"no"),e.removeClass("woocommerce-invalid"),e.removeClass("woocommerce-validated"),e.removeClass("woocommerce-invalid-mismatch");a=_(l).val();null!=(a=""===a?void 0:a)?("yes"==alg_wc_eu_vat_ajax_object.add_progress_text&&(t.text(alg_wc_eu_vat_ajax_object.progress_text_validating),t.removeClass(),t.addClass("alg-wc-eu-vat-validating")),o={action:"alg_wc_eu_vat_validate_action",alg_wc_eu_vat_to_check:a,alg_wc_eu_vat_belgium_compatibility:b,billing_country:_(d).val(),shipping_country:_(c).val(),billing_company:_(s).val()},_.ajax({type:"POST",url:alg_wc_eu_vat_ajax_object.ajax_url,data:o,success:function(e){var a=_(n),o=_(g),t=(e=(e=e.replace("</pre>","")).trim()).split("|");"1"==(e=t[0])?(a.addClass("woocommerce-validated"),"yes"==alg_wc_eu_vat_ajax_object.add_progress_text&&(o.text(alg_wc_eu_vat_ajax_object.progress_text_valid),o.removeClass(),o.addClass("alg-wc-eu-vat-valid"))):"0"==e?(a.addClass("woocommerce-invalid"),"yes"==alg_wc_eu_vat_ajax_object.add_progress_text&&(o.text(alg_wc_eu_vat_ajax_object.progress_text_not_valid),o.removeClass(),o.addClass("alg-wc-eu-vat-not-valid"))):"4"==e?(a.addClass("woocommerce-invalid"),"yes"==alg_wc_eu_vat_ajax_object.add_progress_text&&(o.text(alg_wc_eu_vat_ajax_object.text_shipping_billing_countries),o.removeClass(),o.addClass("alg-wc-eu-vat-not-valid-billing-country"))):"5"==e?(t=t[1],a.addClass("woocommerce-invalid"),a.addClass("woocommerce-invalid-mismatch"),"yes"==alg_wc_eu_vat_ajax_object.add_progress_text&&(o.text(alg_wc_eu_vat_ajax_object.company_name_mismatch.replace("%company_name%",t)),o.removeClass(),o.addClass("alg-wc-eu-vat-not-valid-company-mismatch"))):("6"==e?(a.removeClass("woocommerce-invalid"),a.removeClass("woocommerce-validated")):a.addClass("woocommerce-invalid"),"yes"==alg_wc_eu_vat_ajax_object.add_progress_text&&(o.text(alg_wc_eu_vat_ajax_object.progress_text_validation_failed),o.removeClass(),o.addClass("alg-wc-eu-vat-validation-failed"))),_("body").trigger("update_checkout")}})):("yes"==alg_wc_eu_vat_ajax_object.add_progress_text&&t.text(""),e.hasClass("validate-required")?e.addClass("woocommerce-invalid"):e.addClass("woocommerce-validated"),_("body").trigger("update_checkout"))}e(),_("body").on("updated_checkout",e),"yes_for_company"==alg_wc_eu_vat_ajax_object.is_required&&(_(s).blur(function(){j()}),_("body").on("input",s,function(){clearTimeout(o),o=setTimeout(w,p)}),clearTimeout(t),t=setTimeout(w,p)),x(),_("body").on("input",l,function(){clearTimeout(a),a=setTimeout(x,p)}),_("body").on("change",d,x),_("body").on("change",c,x),_("body").on("click",r,x),alg_wc_eu_vat_ajax_object.do_check_company_name&&_("body").on("input",s,function(){clearTimeout(i),i=setTimeout(x,p)}),_("body").on("change",m,function(){x()}),_("body").on("change",u,function(){x()})});