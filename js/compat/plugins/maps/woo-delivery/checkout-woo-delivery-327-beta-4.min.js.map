{"version":3,"file":"../../woo-delivery/checkout-woo-delivery-327-beta-4.min.js","sources":["woo-delivery/checkout-woo-delivery-327-beta-4.js"],"sourcesContent":["/**\r\n * Checkout scripts for: Delivery & Pickup Date Time for WooCommerce (by CodeRockz).\r\n */\r\n\r\n(function (root, factory) {\r\n\tif ( typeof define === 'function' && define.amd ) {\r\n\t\tdefine([], factory(root));\r\n\t} else if ( typeof exports === 'object' ) {\r\n\t\tmodule.exports = factory(root);\r\n\t} else {\r\n\t\troot.CheckoutWooDelivery = factory(root);\r\n\t}\r\n})(typeof global !== 'undefined' ? global : this.window || this.global, function (root) {\r\n\r\n\t'use strict';\r\n\r\n\tvar $ = jQuery;\r\n\tvar _hasJQuery = ( $ != null );\r\n\r\n\tvar _hasInitialized = false;\r\n\tvar _publicMethods = {};\r\n\tvar _settings = {\r\n\t\tdateFieldSelector: '#coderockz_woo_delivery_date_datepicker, #coderockz_woo_delivery_pickup_date_datepicker',\r\n\t\ttimeFieldSelector: '#coderockz_woo_delivery_time_field, #coderockz_woo_delivery_pickup_time_field',\r\n\t\tdeliveryDateHiddenFieldSelector: '#fc_coderockz_woo_delivery_date',\r\n\t\tdeliveryTimeHiddenFieldSelector: '#fc_coderockz_woo_delivery_time',\r\n\t\tpickupDateHiddenFieldSelector: '#fc_coderockz_woo_pickup_date',\r\n\t\tpickupTimeHiddenFieldSelector: '#fc_coderockz_woo_pickup_time',\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * METHODS\r\n\t */\r\n\r\n\r\n\r\n\t/**\r\n\t * Maybe update datepicker fields with WC session values.\r\n\t */\r\n\tvar maybeUpdateDatepickerFields = function() {\r\n\t\tvar datepickerFields = document.querySelectorAll( _settings.dateFieldSelector );\r\n\r\n\t\t// Bail if no fields found\r\n\t\tif ( ! datepickerFields.length ) { return; }\r\n\r\n\t\t// Update each Flatpickr field\r\n\t\tfor ( var i = 0; i < datepickerFields.length; i++ ) {\r\n\t\t\tvar flatPickerField = datepickerFields[ i ];\r\n\t\t\tvar hiddenFieldSelector = flatPickerField.id.includes( 'pickup' ) ? _settings.pickupDateHiddenFieldSelector : _settings.deliveryDateHiddenFieldSelector;\r\n\t\t\tvar hiddenDateField = document.querySelector(hiddenFieldSelector);\r\n\r\n\t\t\t// Get Flatpickr instance for the field if exists\r\n\t\t\tvar flatPickerInstance = null;\r\n\t\t\tif ( flatPickerField._flatpickr ) {\r\n\t\t\t\tflatPickerInstance = flatPickerField._flatpickr;\r\n\t\t\t}\r\n\r\n\t\t\t// Update the Flatpickr field only if there's no value selected\r\n\t\t\tif ( flatPickerInstance && hiddenDateField && hiddenDateField.value && !flatPickerInstance.selectedDates.length ) {\r\n\t\t\t\tflatPickerInstance.setDate( hiddenDateField.value, false, 'Y-m-d' );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Myabe update time select fields with WC session values.\r\n\t */\r\n\tvar maybeUpdateTimeSelectFields = function() {\r\n\t\tvar timeSelectFields = document.querySelectorAll( _settings.timeFieldSelector );\r\n\r\n\t\t// Bail if no fields found\r\n\t\tif ( ! timeSelectFields.length ) { return; }\r\n\r\n\t\t// Update each time select field\r\n\t\tfor ( var i = 0; i < timeSelectFields.length; i++ ) {\r\n\t\t\tvar timeSelectField = timeSelectFields[ i ];\r\n\t\t\tvar hiddenFieldSelector = timeSelectField.id.includes( 'pickup' ) ? _settings.pickupTimeHiddenFieldSelector : _settings.deliveryTimeHiddenFieldSelector;\r\n\t\t\tvar hiddenTimeField = document.querySelector( hiddenFieldSelector );\r\n\r\n\t\t\t// Bail if hidden field doesn't exist or has no value\r\n\t\t\tif ( ! hiddenTimeField || ! hiddenTimeField.value ) { continue; }\r\n\r\n\t\t\t// Bail if there's already a value selected\r\n\t\t\tif ( timeSelectField.value ) { continue; }\r\n\r\n\t\t\t// Loop through select field options to find one that matches the hidden field value and isn't disabled\r\n\t\t\tvar validTimeOption = null;\r\n\t\t\tfor ( var j = 0; j < timeSelectField.options.length; j++ ) {\r\n\t\t\t\tvar option = timeSelectField.options[ j ];\r\n\t\t\t\tif ( option.value === hiddenTimeField.value && ! option.disabled ) {\r\n\t\t\t\t\tvalidTimeOption = option;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Update the select field\r\n\t\t\tif ( validTimeOption ) {\r\n\t\t\t\ttimeSelectField.value = validTimeOption.value;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Trigger update checkout.\r\n\t */\r\n\tvar triggerCheckoutUpdate = function() {\r\n\t\t// Trigger update checkout\r\n\t\t$( document.body ).trigger( 'update_checkout' );\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Handle captured `change` event and route to the appropriate functions.\r\n\t */\r\n\tvar handleChange = function( e ) {\r\n\t\t// DATEPICKER FIELDS\r\n\t\tif ( e.target.matches( _settings.dateFieldSelector ) ) {\r\n\t\t\ttriggerCheckoutUpdate();\r\n\t\t}\r\n\t\t// TIME SELECT FIELDS\r\n\t\telse if ( e.target.matches( _settings.timeFieldSelector ) ) {\r\n\t\t\ttriggerCheckoutUpdate();\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Initialize component and set related handlers.\r\n\t */\r\n\t_publicMethods.init = function() {\r\n\t\tif ( _hasInitialized ) return;\r\n\r\n\t\tmaybeUpdateDatepickerFields();\r\n\t\tmaybeUpdateTimeSelectFields();\r\n\r\n\t\twindow.addEventListener( 'change', handleChange );\r\n\r\n\t\tif ( _hasJQuery ) {\r\n\t\t\t$( document.body ).on( 'change.select2', handleChange );\r\n\t\t\t$( document.body ).on( 'updated_checkout', maybeUpdateDatepickerFields );\r\n\t\t\t$( document.body ).on( 'updated_checkout', maybeUpdateTimeSelectFields );\r\n\t\t}\r\n\r\n\t\t_hasInitialized = true;\r\n\t};\r\n\r\n\r\n\t\r\n\t//\r\n\t// Public APIs\r\n\t//\r\n\treturn _publicMethods;\r\n\r\n});\r\n"],"names":["root","factory","define","amd","exports","module","CheckoutWooDelivery","global","this","window","maybeUpdateDatepickerFields","datepickerFields","document","querySelectorAll","_settings","length","i","flatPickerField","hiddenFieldSelector","id","includes","hiddenDateField","querySelector","flatPickerInstance","_flatpickr","value","selectedDates","setDate","maybeUpdateTimeSelectFields","timeSelectFields","timeSelectField","hiddenTimeField","validTimeOption","j","options","option","disabled","triggerCheckoutUpdate","$","body","trigger","handleChange","e","target","matches","jQuery","_hasJQuery","_hasInitialized","_publicMethods","init","addEventListener","on"],"mappings":"AAIA,CAAA,SAAWA,EAAMC,GACO,YAAlB,OAAOC,QAAyBA,OAAOC,IAC3CD,OAAO,GAAID,EAAY,CAAC,EACM,UAAnB,OAAOG,QAClBC,OAAOD,QAAUH,EAAY,EAE7BD,EAAKM,oBAAsBL,EAAY,CAExC,EAAoB,aAAlB,OAAOM,OAAyBA,OAASC,KAAKC,QAAUD,KAAKD,OAAQ,SAAUP,GAEjF,aA2BkC,SAA9BU,IACH,IAAIC,EAAmBC,SAASC,iBAAkBC,CAA4B,EAG9E,GAAOH,EAAiBI,OAGxB,IAAM,IAAIC,EAAI,EAAGA,EAAIL,EAAiBI,OAAQC,CAAC,GAAK,CACnD,IAAIC,EAAkBN,EAAkBK,GACpCE,EAAsBD,EAAgBE,GAAGC,SAAU,QAAS,EAAIN,EAA0CA,EAC1GO,EAAkBT,SAASU,cAAcJ,CAAmB,EAG5DK,EAAqB,MAExBA,EADIN,EAAgBO,WACCP,EAAgBO,WAIjCD,IAAsBF,GAAmBA,EAAgBI,OAAS,CAACF,EAAmBG,cAAcX,QACxGQ,EAAmBI,QAASN,EAAgBI,MAAO,CAAA,EAAO,OAAQ,CAEpE,CACD,CAOkC,SAA9BG,IACH,IAAIC,EAAmBjB,SAASC,iBAAkBC,CAA4B,EAG9E,GAAOe,EAAiBd,OAGxB,IAAM,IAAIC,EAAI,EAAGA,EAAIa,EAAiBd,OAAQC,CAAC,GAAK,CACnD,IAAIc,EAAkBD,EAAkBb,GACpCE,EAAsBY,EAAgBX,GAAGC,SAAU,QAAS,EAAIN,EAA0CA,EAC1GiB,EAAkBnB,SAASU,cAAeJ,CAAoB,EAGlE,GAAOa,GAAqBA,EAAgBN,OAGvCK,CAAAA,EAAgBL,MAArB,CAIA,IADA,IAAIO,EAAkB,KACZC,EAAI,EAAGA,EAAIH,EAAgBI,QAAQnB,OAAQkB,CAAC,GAAK,CAC1D,IAAIE,EAASL,EAAgBI,QAASD,GACtC,GAAKE,EAAOV,QAAUM,EAAgBN,OAAS,CAAEU,EAAOC,SAAW,CAClEJ,EAAkBG,EAClB,KACD,CACD,CAGKH,IACJF,EAAgBL,MAAQO,EAAgBP,MAdA,CAgB1C,CACD,CAO4B,SAAxBY,IAEHC,EAAG1B,SAAS2B,IAAK,EAAEC,QAAS,iBAAkB,CAC/C,CAOmB,SAAfC,EAAyBC,IAEvBA,EAAEC,OAAOC,QAAS9B,CAA4B,GAIzC4B,EAAEC,OAAOC,QAAS9B,CAA4B,IACvDuB,EAAsB,CAExB,CAlHA,IAAIC,EAAIO,OACJC,EAAoB,MAALR,EAEfS,EAAkB,CAAA,EAClBC,EAAiB,GACjBlC,EACgB,0FADhBA,EAEgB,gFAFhBA,EAG8B,kCAH9BA,EAI8B,kCAJ9BA,EAK4B,gCAL5BA,EAM4B,gCAoIhC,OAtBAkC,EAAeC,KAAO,WAChBF,IAELrC,EAA4B,EAC5BkB,EAA4B,EAE5BnB,OAAOyC,iBAAkB,SAAUT,CAAa,EAE3CK,IACJR,EAAG1B,SAAS2B,IAAK,EAAEY,GAAI,iBAAkBV,CAAa,EACtDH,EAAG1B,SAAS2B,IAAK,EAAEY,GAAI,mBAAoBzC,CAA4B,EACvE4B,EAAG1B,SAAS2B,IAAK,EAAEY,GAAI,mBAAoBvB,CAA4B,GAGxEmB,EAAkB,CAAA,EACnB,EAOOC,CAER,CAAC"}