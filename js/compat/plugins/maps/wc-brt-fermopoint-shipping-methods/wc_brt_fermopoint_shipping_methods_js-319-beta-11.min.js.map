{"version":3,"file":"../../wc-brt-fermopoint-shipping-methods/wc_brt_fermopoint_shipping_methods_js-319-beta-11.min.js","sources":["wc-brt-fermopoint-shipping-methods/wc_brt_fermopoint_shipping_methods_js-319-beta-11.js"],"sourcesContent":["jQuery(document).ready(function(){\r\n\t// checkPudableCart();\r\n});\r\n\r\n// jQuery(window).load(function(){\r\njQuery(window).on('load', function(){ // messo on per fix problema segnalato nel tk 12736. Se non dovesse risolvere, provare a caricare jquery migrate (https://code.jquery.com/jquery-migrate-1.4.1.min.js) e usare il classico .load \r\n\r\n\tif( jQuery('input[name^=\"shipping_method\"]').length > 0 ){\r\n\t\tif( isSelectedBrtFermopointShippingMethod() ){\r\n\t\t\tcheckPudableCartNew();\r\n\t\t\t// disableCodPayment();\r\n\t\t\t// disableCheckShippingAddress();\r\n\t\t\t// showMapOrList();\r\n\t\t\t// checkGeolocation();\r\n\t\t\t// updateShippingAddressWithPudo(null);\r\n\t\t} else {\r\n\t\t\tenablePudoShippingMethodNew();\r\n\t\t\tenableCodPayment();\r\n\t\t\t// enableCheckShippingAddress();\r\n\t\t\thideMap();\r\n\t\t\tupdateShippingAddressWithPudo(null);\r\n\t\t}\r\n\t}\r\n\r\n});\r\n\r\njQuery( 'body' ).on( 'change', 'input[name^=\"shipping_method\"]', function() {\r\n\r\n\tif( jQuery(this).val().startsWith('wc_brt_fermopoint_shipping_methods_custom') ){\r\n\t\tcheckPudableCartNew();\r\n\t\t// disableCodPayment();\r\n\t\t// disableCheckShippingAddress();\r\n\t\t// showMapOrList();\r\n\t\t// checkGeolocation();\r\n\t\t// updateShippingAddressWithPudo(null);\r\n\t} else {\r\n\t\tenablePudoShippingMethodNew();\r\n\t\tenableCodPayment();\r\n\t\t// enableCheckShippingAddress();\r\n\t\thideMap();\r\n\t\tupdateShippingAddressWithPudo(null);\r\n\t}\r\n\r\n});\r\n\r\njQuery( 'body' ).on( 'click', 'img.updatePudo', function(){\r\n\tif( isSelectedBrtFermopointShippingMethod() ){\r\n\t\tcheckPudableCartNew();\r\n\t}\r\n});\r\n\r\njQuery( 'body' ).on( 'focusout', 'input#billing_city, input#billing_postcode, input#shipping_city, input#shipping_postcode', function(){\r\n\tif( isSelectedBrtFermopointShippingMethod() ){\r\n\t\tcheckPudableCartNew();\r\n\t}\r\n});\r\n\r\njQuery( 'body' ).on( 'change', 'select#billing_country, select#shipping_country', function() {\r\n\tif( isSelectedBrtFermopointShippingMethod() ){\r\n\t\tcheckPudableCartNew();\r\n\t}\r\n});\r\n\r\njQuery( 'body' ).on( 'focusout', 'input#billing_phone, input#billing_email', function(){\r\n\tif( isSelectedBrtFermopointShippingMethod() ){\r\n\t\tcheckPudableCartNew();\r\n\t}\r\n});\r\n\r\njQuery( 'body' ).on( 'change', 'input#ship-to-different-address-checkbox', function() {\r\n\tif( isSelectedBrtFermopointShippingMethod() ){\r\n\t\tcheckPudableCartNew();\r\n\t}\r\n});\r\n\r\nvar map;\r\nvar markers = [];\r\nvar listaPudo = [];\r\nfunction initMap() {\r\n\tif(ajax_object.use_google_map == 'yes'){\r\n\t\tmap = new google.maps.Map(document.getElementById('wc_brt_fermopoint_shipping_methods_custom-map'), {\r\n\t\t\tcenter: { lat: 44.493977, lng: 11.3430258 },\r\n\t\t\tzoom: 11,\r\n\t\t\tmapTypeControl: false,\r\n\t\t\tscaleControl: false,\r\n\t\t\tstreetViewControl: false,\r\n\t\t\trotateControl: false,\r\n\t\t\tfullscreenControl: false,\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction loading(isLoading) {\r\n\tif(isLoading)\r\n\t\tjQuery('#wc_brt_fermopoint_shipping_methods_custom-list_container, #wc_brt_fermopoint_shipping_methods_custom-map_container').addClass('loading');\r\n\telse \r\n\t\tjQuery('#wc_brt_fermopoint_shipping_methods_custom-list_container, #wc_brt_fermopoint_shipping_methods_custom-map_container').removeClass('loading');\r\n}\r\n\r\nfunction disableCodPayment() {\r\n\tjQuery(document).ajaxComplete(function(){\r\n\t\tjQuery(document).ready(function(){\r\n\t\t\tif(jQuery('.wc_payment_method.payment_method_cod')) {\r\n\t\t\t\tjQuery('.wc_payment_method.payment_method_cod').css('opacity', '0.5').find('input').attr('disabled', 'disabled');\r\n\t\t\t\tif( isSelectedBrtFermopointShippingMethod() )\r\n\t\t\t\t\tjQuery('.wc_payment_method.payment_method_cod input').prop('checked', false);\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\nfunction enableCodPayment() {\r\n\tjQuery(document).ajaxComplete(function(){\r\n\t\tjQuery(document).ready(function(){\r\n\t\t\tif(jQuery('.wc_payment_method.payment_method_cod'))\r\n\t\t\t\tjQuery('.wc_payment_method.payment_method_cod').css('opacity', '1').find('input').removeAttr('disabled');\r\n\t\t\t\t// jQuery('wc_payment_method.payment_method_cod').removeAttr('disabled');\r\n\t\t});\r\n\r\n\t});\r\n}\r\n\r\nfunction disableCheckShippingAddress() {\r\n\tjQuery(document).ajaxComplete(function(){\r\n\t\tjQuery(document).ready(function(){\r\n\t\t\tif( jQuery('.woocommerce-shipping-fields').length > 0 ) {\r\n\t\t\t\tjQuery('.woocommerce-shipping-fields').hide().find('input[name=ship_to_different_address]').attr('disabled', 'disabled');\r\n\t\t\t}\t\t\t\r\n\t\t});\r\n\t});\r\n}\r\nfunction enableCheckShippingAddress() {\r\n\tjQuery(document).ajaxComplete(function(){\r\n\t\tjQuery(document).ready(function(){\r\n\t\t\tif( jQuery('.woocommerce-shipping-fields').length > 0 ) {\r\n\t\t\t\tjQuery('.woocommerce-shipping-fields').show().find('input[name=ship_to_different_address]').removeAttr('disabled');\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t});\r\n}\r\n\r\nfunction showMapOrList() {\r\n\tif( isSelectedBrtFermopointShippingMethod() ){\r\n\t\tjQuery(document).ajaxComplete(function(){\r\n\t\t\tjQuery('#wc_brt_fermopoint_shipping_methods_custom-tr_container, #wc_brt_fermopoint_shipping_methods_custom-div_container').show();\r\n\t\t});\r\n\t}\r\n}\r\n\r\nfunction hideMap() {\r\n\tjQuery(document).ajaxComplete(function(){\r\n\t\tjQuery('#wc_brt_fermopoint_shipping_methods_custom-tr_container, #wc_brt_fermopoint_shipping_methods_custom-div_container').hide();\r\n\t});\r\n}\r\n\r\nfunction isSelectedBrtFermopointShippingMethod(){\r\n\tif( jQuery('input[name^=\"shipping_method\"]:checked').length > 0 && jQuery('input[name^=\"shipping_method\"]:checked').val().startsWith('wc_brt_fermopoint_shipping_methods_custom') ){\r\n\t\treturn true;\r\n\t} else if( jQuery('input[name^=\"shipping_method\"]').length == 1 && jQuery('input[name^=\"shipping_method\"]').val().startsWith('wc_brt_fermopoint_shipping_methods_custom') ) {\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nfunction isShippingDifferentAddressChecked(){\r\n\tvar checkShipToDifferentAddress = jQuery('input[name=ship_to_different_address]').prop('checked');\r\n\tconsole.log(\"checkShipToDifferentAddress\", checkShipToDifferentAddress);\r\n\tif( checkShipToDifferentAddress ){\r\n\t\treturn true;\r\n\t}\r\n\r\n\treturn false;\r\n}\r\n\r\nfunction checkGeolocation() {\r\n\tif(ajax_object.use_geolocation == 'yes'){\r\n\t\tgetCoordsFromGeolocation();\r\n\t} else {\r\n\t\tgetPudoFromAddress();\r\n\t}\r\n}\r\n\r\nfunction getCoordsFromGeolocation() {\r\n\tif (navigator.geolocation) {\r\n\t\tnavigator.geolocation.getCurrentPosition((position) => {\r\n\t\t\tif(ajax_object.use_google_map == 'yes'){\r\n\t\t\t\tconst center = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);\r\n\t\t\t\tmap.panTo(center);\r\n\t\t\t}\r\n\t\t\tgetPudoFromCoords(position.coords);\r\n\t\t}, (err) => {\r\n\t\t\tconsole.log(\"err: \"+err);\r\n\t\t\tgetPudoFromAddress();\r\n\t\t});\r\n\t} else {\r\n\t\tconsole.log(\"Geolocation is not supported by this browser.\");\r\n\t\tgetPudoFromAddress();\r\n\t}\r\n}\r\n\r\nfunction getShippingAddress(){\r\n\tvar returnObj = {};\t\r\n\t\r\n\tif(isShippingDifferentAddressChecked()) {\r\n\t\treturnObj.city = jQuery('form .woocommerce-shipping-fields #shipping_city').val();\r\n\t\treturnObj.country = jQuery('form .woocommerce-shipping-fields #shipping_country').val();\r\n\t\treturnObj.cap = jQuery('form .woocommerce-shipping-fields #shipping_postcode').val();\r\n\t} else {\r\n\t\treturnObj.city = jQuery('form .woocommerce-billing-fields #billing_city').val();\r\n\t\treturnObj.country = jQuery('form .woocommerce-billing-fields #billing_country').val();\r\n\t\treturnObj.cap = jQuery('form .woocommerce-billing-fields #billing_postcode').val();\t\t\r\n\t}\r\n\treturn returnObj;\r\n}\r\n\r\nfunction getPudoFromCoords(coords) {\r\n\tif( isSelectedBrtFermopointShippingMethod() ){\r\n\r\n\t\tloading(true);\r\n\r\n\t\tjQuery.ajax({\r\n\t\t\ttype: \"POST\",\r\n\t\t\turl : ajax_object.ajaxurl,\r\n\t\t\tdata: {\r\n\t\t\t\taction: 'get_pudo_by_lat_lng',\r\n\t\t\t\tsecurity: ajax_object.security,\r\n\t\t\t\tcoords: coords,\r\n\t\t\t},\r\n\t\t\tsuccess: function( data, textStatus, jqXHR ) {\r\n\t\t\t\tif(data.pudo && data.pudo.length > 0){\r\n\t\t\t\t\tif(ajax_object.use_google_map == 'yes'){\r\n\t\t\t\t\t\taddPudoToMap(data.pudo);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlistaPudo = data.pudo;\r\n\t\t\t\t\t\taddPudoToList(data.pudo);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tenablePudoShippingMethodNew();\r\n\t\t\t\t\tshowMapOrList();\r\n\t\t\t\t\t// CHANGE: Removed call to function `updateShippingAddressWithPudo` as it was resetting the selected pudo.\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar why_not_pudable = 'no_pudo_found';\r\n\t\t\t\t\tif( data.why_not_pudable ) {\r\n\t\t\t\t\t\twhy_not_pudable = data.why_not_pudable;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdisablePudoShippingMethodNew(why_not_pudable);\r\n\t\t\t\t\thideMap();\r\n\t\t\t\t\t// enableCodPayment();\r\n\t\t\t\t\t// enableCheckShippingAddress();\r\n\t\t\t\t\tupdateShippingAddressWithPudo(null);\r\n\r\n\t\t\t\t}\r\n\t\t\t\tloading(false);\r\n\t\t\t},\r\n\t\t\terror: function( jqXHR, textStatus, errorThrown ) {\r\n\t\t\t\tconsole.log(\"err\");\r\n\t\t\t\tconsole.log(textStatus);\r\n\t\t\t\tconsole.log(errorThrown);\r\n\t\t\t\tdisablePudoShippingMethodNew('generic_error');\r\n\t\t\t\tenableCodPayment();\r\n\t\t\t\t// enableCheckShippingAddress();\r\n\t\t\t\tupdateShippingAddressWithPudo(null);\r\n\t\t\t\tloading(false);\r\n\t\t\t}\r\n\t\t});\r\n\t} else {\r\n\t\thideMap();\r\n\t\tenableCodPayment();\r\n\t\t// enableCheckShippingAddress();\r\n\t\tupdateShippingAddressWithPudo(null);\r\n\t}\r\n}\r\n\r\nfunction getPudoFromAddress() {\r\n\tif( isSelectedBrtFermopointShippingMethod() ){\r\n\r\n\t\tloading(true);\r\n\r\n\t\tvar shipping_address = getShippingAddress();\r\n\t\tjQuery.ajax({\r\n\t\t\ttype: \"POST\",\r\n\t\t\turl : ajax_object.ajaxurl,\r\n\t\t\tdata: {\r\n\t\t\t\taction: 'get_pudo_by_address',\r\n\t\t\t\tsecurity: ajax_object.security,\r\n\t\t\t\tshipping_address: shipping_address\r\n\t\t\t},\r\n\t\t\tsuccess: function( data, textStatus, jqXHR ) {\r\n\t\t\t\tif(data.pudo && data.pudo.length > 0){\r\n\t\t\t\t\tif(ajax_object.use_google_map == 'yes'){\r\n\t\t\t\t\t\taddPudoToMap(data.pudo);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tlistaPudo = data.pudo;\r\n\t\t\t\t\t\taddPudoToList(data.pudo);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tenablePudoShippingMethodNew();\r\n\t\t\t\t\tshowMapOrList();\r\n\t\t\t\t\t// CHANGE: Removed call to function `updateShippingAddressWithPudo` as it was resetting the selected pudo.\r\n\t\t\t\t\t\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tvar why_not_pudable = 'no_pudo_found';\r\n\t\t\t\t\tif( data.why_not_pudable ) {\r\n\t\t\t\t\t\twhy_not_pudable = data.why_not_pudable;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tdisablePudoShippingMethodNew(why_not_pudable);\r\n\t\t\t\t\thideMap();\r\n\t\t\t\t\t// enableCodPayment();\r\n\t\t\t\t\t// enableCheckShippingAddress();\r\n\t\t\t\t\tupdateShippingAddressWithPudo(null);\r\n\r\n\t\t\t\t}\t\t\t\r\n\t\t\t\tloading(false);\r\n\t\t\t},\r\n\t\t\terror: function( jqXHR, textStatus, errorThrown ) {\r\n\t\t\t\tconsole.log(\"err\");\r\n\t\t\t\tconsole.log(textStatus);\r\n\t\t\t\tconsole.log(errorThrown);\r\n\t\t\t\tdisablePudoShippingMethodNew('generic_error');\r\n\t\t\t\tenableCodPayment();\r\n\t\t\t\t// enableCheckShippingAddress();\r\n\t\t\t\tupdateShippingAddressWithPudo(null);\r\n\t\t\t\tloading(false);\r\n\t\t\t}\r\n\t\t});\r\n\t} else {\r\n\t\thideMap();\r\n\t\tenableCodPayment();\r\n\t\t// enableCheckShippingAddress();\r\n\t\tupdateShippingAddressWithPudo(null);\r\n\t}\r\n}\r\n\r\nfunction addPudoToMap(pudoArray) {\r\n\tclearMarkers();\r\n\tvar bounds = new google.maps.LatLngBounds();\r\n\tvar infowindow = new google.maps.InfoWindow();\r\n\tfor (var i = 0; i < pudoArray.length; i++) {\r\n\t\t// var latlngMarker = new google.maps.LatLng(pudoArray[i].latitude, pudoArray[i].longitude);\r\n\t\tconst marker = new google.maps.Marker({\r\n\t\t\tposition: new google.maps.LatLng(pudoArray[i].latitude, pudoArray[i].longitude),\r\n\t\t\ticon: ajax_object.plugin_url+\"/includes/images/icon-gmap.png\",\r\n\t\t\tmap: map,\r\n\t\t});\r\n\t\tconst infowindowContent = getInfoWindowContent(pudoArray[i]);\r\n\t\tconst pudo = pudoArray[i];\r\n\t\tgoogle.maps.event.addListener(marker, 'click', function(e) {\r\n\t\t\tinfowindow.setContent(infowindowContent);\r\n\t\t\tinfowindow.open(map, this);\r\n\t\t\tupdateShippingAddressWithPudo(pudo);\r\n\t\t\tjQuery('#wc_brt_fermopoint_shipping_methods_custom-tr_container h3.pudo-label, #wc_brt_fermopoint_shipping_methods_custom-div_container h3.pudo-label').text(\"Hai selezionato il punto di ritiro: \"+pudo.pointName);\r\n\t\t});\r\n\t\tbounds.extend(new google.maps.LatLng(pudoArray[i].latitude, pudoArray[i].longitude));\r\n\r\n\t\tmarkers.push(marker);\r\n\t}\r\n\tmap.fitBounds(bounds);\r\n}\r\n\r\nfunction clearMarkers() {\r\n\tif(markers.length > 0){\r\n\t\tfor (var i = 0; i < markers.length; i++) {\r\n\t\t\tmarkers[i].setMap(null);\r\n\t\t}\r\n\t\tmarkers = [];\r\n\t}\r\n}\r\n\r\nfunction getInfoWindowContent(pudo) {\r\n\tconst days = [\"Domenica\", \"Lunedì\", \"Martedì\", \"Mercoledì\", \"Giovedì\", \"Venerdì\", \"Sabato\", \"Domenica\"];\r\n\tconst id = pudo.pudoId;\r\n\tconst title = pudo.pointName ? \"<p><strong class='title'>\"+ pudo.pointName +\"</strong></p>\" : \"\";\r\n\tconst address = pudo.fullAddress ? \"<p class='address'>\"+ pudo.fullAddress +\"</p>\" : \"\";\r\n\r\n\tvar orariHtml = \"\";\r\n\torariHtml = \"<ul class='orari'>\";\r\n\tfor(var key in pudo.orariOk){\r\n\t\torariHtml += \"<li>\";\r\n\t\torariHtml += \"<strong>\"+days[key]+\"</strong>: \";\r\n\t\torariHtml += pudo.orariOk[key].filter(Boolean).join(\" / \");\r\n\t\torariHtml += \"</li>\";\r\n\t}\r\n\torariHtml += \"</ul>\";\r\n\t\r\n\treturn \"<div class='infowindow-brt-fermopoint'>\"+title+address+orariHtml+\"</div>\";\r\n}\r\n\r\nfunction updateShippingAddressWithPudo(pudo) {\r\n\tjQuery(document).ready(function(){\r\n\t\tif( jQuery('form #wc_brt_fermopoint-custom_checkout_fields') ){\r\n\t\t\tif(pudo != null && pudo != undefined) {\r\n\t\t\t\tif(typeof(pudo) == 'object') {\r\n\t\t\t\t\tjQuery('form #wc_brt_fermopoint-custom_checkout_fields #wc_brt_fermopoint-selected_pudo').val(JSON.stringify(pudo));\r\n\t\t\t\t\tjQuery('form #wc_brt_fermopoint-custom_checkout_fields #wc_brt_fermopoint-pudo_id').val(pudo.pudoId);\r\n\t\t\t\t} else if(typeof(pudo) == 'number') {\r\n\t\t\t\t\tjQuery('form #wc_brt_fermopoint-custom_checkout_fields #wc_brt_fermopoint-selected_pudo').val(JSON.stringify(listaPudo[pudo]));\r\n\t\t\t\t\tjQuery('form #wc_brt_fermopoint-custom_checkout_fields #wc_brt_fermopoint-pudo_id').val(listaPudo[pudo].pudoId);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tjQuery('form #wc_brt_fermopoint-custom_checkout_fields #wc_brt_fermopoint-selected_pudo').val(\"\");\r\n\t\t\t\t\tjQuery('form #wc_brt_fermopoint-custom_checkout_fields #wc_brt_fermopoint-pudo_id').val(\"\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tjQuery('form #wc_brt_fermopoint-custom_checkout_fields #wc_brt_fermopoint-selected_pudo').val(\"\");\r\n\t\t\t\tjQuery('form #wc_brt_fermopoint-custom_checkout_fields #wc_brt_fermopoint-pudo_id').val(\"\");\r\n\t\t\t}\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction addPudoToList(pudoArray) {\r\n\tjQuery(document).ajaxComplete(function(){\r\n\t\tvar listContainer = jQuery('#wc_brt_fermopoint_shipping_methods_custom-list_container .pudo-list-scrollable');\r\n\t\tvar appendHtml = \"\";\r\n\t\tconst days = [\"Domenica\", \"Lunedì\", \"Martedì\", \"Mercoledì\", \"Giovedì\", \"Venerdì\", \"Sabato\", \"Domenica\"];\r\n\r\n\t\t// CHANGE: Get the id of the previously selected PUDO\r\n\t\tvar selectedPudoId = jQuery('form #wc_brt_fermopoint-custom_checkout_fields #wc_brt_fermopoint-pudo_id').val();\r\n\r\n\t\tif(pudoArray.length > 0){\r\n\t\t\tappendHtml += \"<ul class='lista_pudo'>\";\r\n\t\t\tfor (var i = 0; i < pudoArray.length; i++) {\r\n\r\n\t\t\t\tconst pudo = pudoArray[i];\r\n\t\t\t\tconst id = pudo.pudoId;\r\n\t\t\t\tconst title = pudo.pointName ? \"<h3>\"+ pudo.pointName +\"</h3>\" : \"\";\r\n\t\t\t\tconst address = pudo.fullAddress ? \"<h5>\"+ pudo.fullAddress +\"</h5>\" : \"\";\r\n\t\t\t\tconst distance = pudo.distanceFromPoint ? \"<h5>\"+ (pudo.distanceFromPoint/1000) +\" Km</h5>\" : \"\";\r\n\r\n\t\t\t\tvar orariHtml = \"\";\r\n\t\t\t\torariHtml = \"<ul>\";\r\n\t\t\t\tfor(var key in pudo.orariOk){\r\n\t\t\t\t\torariHtml += \"<li>\";\r\n\t\t\t\t\torariHtml += \"<strong>\"+days[key]+\"</strong>: \";\r\n\t\t\t\t\torariHtml += pudo.orariOk[key].filter(Boolean).join(\" / \");\r\n\t\t\t\t\torariHtml += \"</li>\";\r\n\t\t\t\t}\r\n\t\t\t\torariHtml += \"</ul>\";\r\n\r\n\t\t\t\t// CHANGE: Maybe set additional classes\r\n\t\t\t\tvar additionalClasses = selectedPudoId == id ? 'selected' : '';\r\n\r\n\t\t\t\tappendHtml += '<li class=\"pudo '+additionalClasses+'\" onclick=\"selectPudo(this, '+i+')\">';\r\n\t\t\t\t\tappendHtml += '<div class=\"row m-0\">';\r\n\t\t\t\t\t// appendHtml += \"<div class='accordion-container'>\";\r\n\t\t\t\t\t\t// appendHtml += \"<div class='accordion-title'>\";\r\n\t\t\t\t\t\t\tappendHtml += \"<div class='d-none d-lg-block col-lg-1 p-0 icona'><img src='\"+ajax_object.plugin_url+\"/includes/images/icon-gmap.png' /></div>\";\r\n\t\t\t\t\t\t\tappendHtml += \"<div class='col-9 col-sm-10 col-md-7 titolo'>\"+ title + address +\"</div>\";\r\n\t\t\t\t\t\t\tappendHtml += \"<div class='col-3 col-sm-2 col-lg-1 p-0 info'>\";\r\n\t\t\t\t\t\t\t\tappendHtml += \"<img width='25' height='25' src='\"+ajax_object.plugin_url+\"/includes/images/icon-info.png' />\";\r\n\t\t\t\t\t\t\t\tappendHtml += \"<div class='popup orari'>\"+ orariHtml +\"</div>\";\r\n\t\t\t\t\t\t\tappendHtml += \"</div>\";\r\n\t\t\t\t\t\t\tappendHtml += \"<div class='col-12 col-md-3 distanza'>\"+ distance +\"</div>\";\r\n\t\t\t\t\t\t// appendHtml += \"</div>\";\r\n\t\t\t\t\t\t// appendHtml += \"<div class='accordion-body'>\";\r\n\t\t\t\t\t\t// \tif(orariHtml){\r\n\t\t\t\t\t\t// \t\tappendHtml += \"<div class='popup orari'>\"+ orariHtml +\"</div>\";\r\n\t\t\t\t\t\t// \t}\r\n\t\t\t\t\t\t// appendHtml += \"</div>\";\r\n\t\t\t\t\tappendHtml += \"</div>\";\r\n\t\t\t\t\tappendHtml += \"<div class='clear'><!-- vuoto --></div>\";\r\n\t\t\t\tappendHtml += \"</li>\";\r\n\t\t\t}\r\n\t\t\tappendHtml += \"</ul>\";\r\n\t\t}\r\n\t\tlistContainer.html(appendHtml);\r\n\r\n\t\t// CHANGE: Maybe unset selected pudo if it is not in the list anymore\r\n\t\tvar selectedPudo = jQuery( '#wc_brt_fermopoint_shipping_methods_custom-list_container li.pudo.selected' );\r\n\t\tif ( ! selectedPudo || 0 === selectedPudo.length ) {\r\n\t\t\tupdateShippingAddressWithPudo(null);\r\n\t\t}\r\n\t});\r\n}\r\n\r\nfunction selectPudo(el, index) {\r\n\tjQuery('#wc_brt_fermopoint_shipping_methods_custom-list_container .pudo-list-scrollable ul.lista_pudo li.pudo').removeClass('selected');\r\n\tjQuery(el).addClass('selected');\r\n\tupdateShippingAddressWithPudo(index);\r\n}\r\n\r\nfunction getShippingData(){\r\n\tvar returnObj = {};\t\r\n\treturnObj.country = jQuery('form .woocommerce-billing-fields #billing_country').val();\r\n\treturnObj.email = jQuery('form .woocommerce-billing-fields #billing_email').val();\r\n\treturnObj.phone = jQuery('form .woocommerce-billing-fields #billing_phone').val();\r\n\treturn returnObj;\r\n}\r\n\r\nfunction checkPudableCartNew() {\r\n\r\n\tif( isSelectedBrtFermopointShippingMethod() ){\r\n\t\tvar shipping_data = getShippingData();\r\n\r\n\t\tjQuery.ajax({\r\n\t\t\ttype: \"POST\",\r\n\t\t\turl : ajax_object.ajaxurl,\r\n\t\t\tdata: {\r\n\t\t\t\taction: 'check_pudable_cart',\r\n\t\t\t\tsecurity: ajax_object.security,\r\n\t\t\t\tshipping_data: shipping_data\r\n\t\t\t},\r\n\t\t\tsuccess: function( data, textStatus, jqXHR ) {\r\n\t\t\t\tif(data.pudable){\r\n\t\t\t\t\tenablePudoShippingMethodNew();\r\n\r\n\t\t\t\t\tdisableCodPayment();\r\n\t\t\t\t\t// disableCheckShippingAddress();\r\n\t\t\t\t\tshowMapOrList();\r\n\t\t\t\t\tcheckGeolocation();\r\n\t\t\t\t\t// CHANGE: Removed call to function `updateShippingAddressWithPudo` as it was resetting the selected pudo.\r\n\r\n\t\t\t\t} else {\r\n\t\t\t\t\tvar why_not_pudable = \"generic_error\";\r\n\t\t\t\t\tif( data.why_not_pudable )\r\n\t\t\t\t\t\twhy_not_pudable = data.why_not_pudable;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\tdisablePudoShippingMethodNew(why_not_pudable);\r\n\t\t\t\t\thideMap();\r\n\t\t\t\t\tenableCodPayment();\r\n\t\t\t\t\t// enableCheckShippingAddress();\r\n\t\t\t\t\tupdateShippingAddressWithPudo(null);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror: function( jqXHR, textStatus, errorThrown ) {\r\n\t\t\t\tconsole.log(\"err\");\r\n\t\t\t\tconsole.log(textStatus);\r\n\t\t\t\tconsole.log(errorThrown);\r\n\t\t\t\tdisablePudoShippingMethodNew('generic_error');\r\n\t\t\t\thideMap();\r\n\t\t\t\tenableCodPayment();\r\n\t\t\t\t// enableCheckShippingAddress();\r\n\t\t\t\tupdateShippingAddressWithPudo(null);\r\n\t\t\t}\r\n\t\t});\r\n\t} else {\r\n\t\thideMap();\r\n\t\tenableCodPayment();\r\n\t\t// enableCheckShippingAddress();\r\n\t\tupdateShippingAddressWithPudo(null);\r\n\t}\r\n}\r\n// CHANGE: Added call to function `checkPudableCartNew` on `updated_checkout` event.\r\njQuery( 'body' ).on( 'updated_checkout', checkPudableCartNew );\r\n\r\nfunction disablePudoShippingMethodNew(idError) {\r\n\tjQuery(document).ajaxComplete(function(){\r\n\t\tjQuery(document).ready(function(){\r\n\t\t\tif( jQuery('.woocommerce-shipping-methods input[id*=\"wc_brt_fermopoint_shipping_methods_custom\"]').length > 0 ) {\r\n\t\t\t\tif(jQuery('#wc_brt_fermopoint_shipping_methods_custom-tr_alert-' + idError ).length > 0){\r\n\t\t\t\t\tjQuery('.wc_brt_tr_alert').hide();\r\n\t\t\t\t\tjQuery('#wc_brt_fermopoint_shipping_methods_custom-tr_alert-' + idError ).show();\r\n\t\t\t\t}\r\n\t\t\t\tif(jQuery('#wc_brt_fermopoint_shipping_methods_custom-div_alert-' + idError ).length > 0){\r\n\t\t\t\t\tjQuery('.wc_brt_div_alert').hide();\r\n\t\t\t\t\tjQuery('#wc_brt_fermopoint_shipping_methods_custom-div_alert-' + idError ).show();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n\r\nfunction enablePudoShippingMethodNew() {\r\n\tjQuery(document).ajaxComplete(function(){\r\n\t\tjQuery(document).ready(function(){\r\n\t\t\tif( jQuery('.woocommerce-shipping-methods input[id*=\"wc_brt_fermopoint_shipping_methods_custom\"]').length > 0 ) {\r\n\t\t\t\tif(jQuery('.wc_brt_tr_alert').length > 0){\r\n\t\t\t\t\tjQuery('.wc_brt_tr_alert').hide();\r\n\t\t\t\t}\r\n\t\t\t\tif(jQuery('.wc_brt_div_alert').length > 0){\r\n\t\t\t\t\tjQuery('.wc_brt_div_alert').hide();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t});\r\n}\r\n"],"names":["jQuery","document","ready","window","on","length","isSelectedBrtFermopointShippingMethod","checkPudableCartNew","enablePudoShippingMethodNew","enableCodPayment","hideMap","updateShippingAddressWithPudo","this","val","startsWith","map","markers","listaPudo","initMap","ajax_object","use_google_map","google","maps","Map","getElementById","center","lat","lng","zoom","mapTypeControl","scaleControl","streetViewControl","rotateControl","fullscreenControl","loading","isLoading","addClass","removeClass","disableCodPayment","ajaxComplete","css","find","attr","prop","removeAttr","disableCheckShippingAddress","hide","enableCheckShippingAddress","show","showMapOrList","isShippingDifferentAddressChecked","checkShipToDifferentAddress","console","log","checkGeolocation","use_geolocation","getCoordsFromGeolocation","getPudoFromAddress","navigator","geolocation","getCurrentPosition","LatLng","position","coords","latitude","longitude","panTo","getPudoFromCoords","err","getShippingAddress","returnObj","city","country","cap","ajax","type","url","ajaxurl","data","action","security","success","textStatus","jqXHR","why_not_pudable","pudo","addPudoToMap","addPudoToList","disablePudoShippingMethodNew","error","errorThrown","shipping_address","pudoArray","clearMarkers","bounds","LatLngBounds","infowindow","InfoWindow","i","marker","Marker","icon","plugin_url","infowindowContent","getInfoWindowContent","event","addListener","e","setContent","open","text","pointName","extend","push","fitBounds","setMap","key","days","title","pudoId","address","fullAddress","orariHtml","orariOk","filter","Boolean","join","JSON","stringify","listContainer","appendHtml","selectedPudoId","id","distance","distanceFromPoint","html","selectedPudo","selectPudo","el","index","getShippingData","email","phone","shipping_data","pudable","idError"],"mappings":"AAAAA,OAAOC,QAAQ,EAAEC,MAAM,YAEtB,EAGDF,OAAOG,MAAM,EAAEC,GAAG,OAAQ,WAE6B,EAAlDJ,OAAO,gCAAgC,EAAEK,SACxCC,sCAAsC,EACzCC,oBAAoB,GAOpBC,4BAA4B,EAC5BC,iBAAiB,EAEjBC,QAAQ,EACRC,8BAA8B,IAAI,GAIrC,CAAC,EAEDX,OAAQ,MAAO,EAAEI,GAAI,SAAU,iCAAkC,WAE5DJ,OAAOY,IAAI,EAAEC,IAAI,EAAEC,WAAW,2CAA2C,EAC5EP,oBAAoB,GAOpBC,4BAA4B,EAC5BC,iBAAiB,EAEjBC,QAAQ,EACRC,8BAA8B,IAAI,EAGpC,CAAC,EAEDX,OAAQ,MAAO,EAAEI,GAAI,QAAS,iBAAkB,WAC3CE,sCAAsC,GACzCC,oBAAoB,CAEtB,CAAC,EAEDP,OAAQ,MAAO,EAAEI,GAAI,WAAY,2FAA4F,WACxHE,sCAAsC,GACzCC,oBAAoB,CAEtB,CAAC,EAEDP,OAAQ,MAAO,EAAEI,GAAI,SAAU,kDAAmD,WAC7EE,sCAAsC,GACzCC,oBAAoB,CAEtB,CAAC,EAEDP,OAAQ,MAAO,EAAEI,GAAI,WAAY,2CAA4C,WACxEE,sCAAsC,GACzCC,oBAAoB,CAEtB,CAAC,EAEDP,OAAQ,MAAO,EAAEI,GAAI,SAAU,2CAA4C,WACtEE,sCAAsC,GACzCC,oBAAoB,CAEtB,CAAC,EAED,IAAIQ,IACAC,QAAU,GACVC,UAAY,GAChB,SAASC,UACyB,OAA9BC,YAAYC,iBACdL,IAAM,IAAIM,OAAOC,KAAKC,IAAItB,SAASuB,eAAe,+CAA+C,EAAG,CACnGC,OAAQ,CAAEC,IAAK,UAAWC,IAAK,UAAW,EAC1CC,KAAM,GACNC,eAAgB,CAAA,EAChBC,aAAc,CAAA,EACdC,kBAAmB,CAAA,EACnBC,cAAe,CAAA,EACfC,kBAAmB,CAAA,CACpB,CAAC,EAEH,CAEA,SAASC,QAAQC,GACbA,EACFnC,OAAO,qHAAqH,EAAEoC,SAAS,SAAS,EAEhJpC,OAAO,qHAAqH,EAAEqC,YAAY,SAAS,CACrJ,CAEA,SAASC,oBACRtC,OAAOC,QAAQ,EAAEsC,aAAa,WAC7BvC,OAAOC,QAAQ,EAAEC,MAAM,WACnBF,OAAO,uCAAuC,IAChDA,OAAO,uCAAuC,EAAEwC,IAAI,UAAW,KAAK,EAAEC,KAAK,OAAO,EAAEC,KAAK,WAAY,UAAU,EAC3GpC,sCAAsC,IACzCN,OAAO,6CAA6C,EAAE2C,KAAK,UAAW,CAAA,CAAK,CAE9E,CAAC,CACF,CAAC,CACF,CACA,SAASlC,mBACRT,OAAOC,QAAQ,EAAEsC,aAAa,WAC7BvC,OAAOC,QAAQ,EAAEC,MAAM,WACnBF,OAAO,uCAAuC,GAChDA,OAAO,uCAAuC,EAAEwC,IAAI,UAAW,GAAG,EAAEC,KAAK,OAAO,EAAEG,WAAW,UAAU,CAEzG,CAAC,CAEF,CAAC,CACF,CAEA,SAASC,8BACR7C,OAAOC,QAAQ,EAAEsC,aAAa,WAC7BvC,OAAOC,QAAQ,EAAEC,MAAM,WAC8B,EAAhDF,OAAO,8BAA8B,EAAEK,QAC1CL,OAAO,8BAA8B,EAAE8C,KAAK,EAAEL,KAAK,uCAAuC,EAAEC,KAAK,WAAY,UAAU,CAEzH,CAAC,CACF,CAAC,CACF,CACA,SAASK,6BACR/C,OAAOC,QAAQ,EAAEsC,aAAa,WAC7BvC,OAAOC,QAAQ,EAAEC,MAAM,WAC8B,EAAhDF,OAAO,8BAA8B,EAAEK,QAC1CL,OAAO,8BAA8B,EAAEgD,KAAK,EAAEP,KAAK,uCAAuC,EAAEG,WAAW,UAAU,CAEnH,CAAC,CAEF,CAAC,CACF,CAEA,SAASK,gBACJ3C,sCAAsC,GACzCN,OAAOC,QAAQ,EAAEsC,aAAa,WAC7BvC,OAAO,mHAAmH,EAAEgD,KAAK,CAClI,CAAC,CAEH,CAEA,SAAStC,UACRV,OAAOC,QAAQ,EAAEsC,aAAa,WAC7BvC,OAAO,mHAAmH,EAAE8C,KAAK,CAClI,CAAC,CACF,CAEA,SAASxC,wCACR,MAAIN,CAAAA,EAA0D,EAA1DA,OAAO,wCAAwC,EAAEK,QAAcL,OAAO,wCAAwC,EAAEa,IAAI,EAAEC,WAAW,2CAA2C,IAErKd,EAAmD,GAAnDA,OAAO,gCAAgC,EAAEK,QAAeL,CAAAA,OAAO,gCAAgC,EAAEa,IAAI,EAAEC,WAAW,2CAA2C,EAKzK,CAEA,SAASoC,oCACR,IAAIC,EAA8BnD,OAAO,uCAAuC,EAAE2C,KAAK,SAAS,EAEhG,OADAS,QAAQC,IAAI,8BAA+BF,CAA2B,EAClEA,CAAAA,CAAAA,CAKL,CAEA,SAASG,oBAC0B,OAA/BnC,YAAYoC,gBACdC,yBAEAC,oBAFyB,CAI3B,CAEA,SAASD,2BACJE,UAAUC,YACbD,UAAUC,YAAYC,mBAAmB,IACxC,IACOnC,EAD0B,OAA9BN,YAAYC,iBACRK,EAAS,IAAIJ,OAAOC,KAAKuC,OAAOC,EAASC,OAAOC,SAAUF,EAASC,OAAOE,SAAS,EACzFlD,IAAImD,MAAMzC,CAAM,GAEjB0C,kBAAkBL,EAASC,MAAM,CAClC,EAAG,IACFX,QAAQC,IAAI,QAAQe,CAAG,EACvBX,mBAAmB,CACpB,CAAC,GAEDL,QAAQC,IAAI,+CAA+C,EAC3DI,mBAAmB,EAErB,CAEA,SAASY,qBACR,IAAIC,EAAY,GAWhB,OATGpB,kCAAkC,GACpCoB,EAAUC,KAAOvE,OAAO,kDAAkD,EAAEa,IAAI,EAChFyD,EAAUE,QAAUxE,OAAO,qDAAqD,EAAEa,IAAI,EACtFyD,EAAUG,IAAMzE,OAAO,sDAAsD,EAAEa,IAAI,IAEnFyD,EAAUC,KAAOvE,OAAO,gDAAgD,EAAEa,IAAI,EAC9EyD,EAAUE,QAAUxE,OAAO,mDAAmD,EAAEa,IAAI,EACpFyD,EAAUG,IAAMzE,OAAO,oDAAoD,EAAEa,IAAI,GAE3EyD,CACR,CAEA,SAASH,kBAAkBJ,GACtBzD,sCAAsC,GAEzC4B,QAAQ,CAAA,CAAI,EAEZlC,OAAO0E,KAAK,CACXC,KAAM,OACNC,IAAMzD,YAAY0D,QAClBC,KAAM,CACLC,OAAQ,sBACRC,SAAU7D,YAAY6D,SACtBjB,OAAQA,CACT,EACAkB,QAAS,SAAUH,EAAMI,EAAYC,GACpC,IAcKC,EAdFN,EAAKO,MAA2B,EAAnBP,EAAKO,KAAKhF,SACQ,OAA9Bc,YAAYC,eACdkE,cAEArE,UAAY6D,EAAKO,KACjBE,gBAHaT,EAAKO,IAAI,EAMvB7E,4BAA4B,EAC5ByC,cAAc,IAKVmC,EAAkB,gBAItBI,6BAFCJ,EADGN,EAAKM,gBACUN,EAAKM,gBAEKA,CAAe,EAC5C1E,QAAQ,EAGRC,8BAA8B,IAAI,GAGnCuB,QAAQ,CAAA,CAAK,CACd,EACAuD,MAAO,SAAUN,EAAOD,EAAYQ,GACnCtC,QAAQC,IAAI,KAAK,EACjBD,QAAQC,IAAI6B,CAAU,EACtB9B,QAAQC,IAAIqC,CAAW,EACvBF,6BAA6B,eAAe,EAC5C/E,iBAAiB,EAEjBE,8BAA8B,IAAI,EAClCuB,QAAQ,CAAA,CAAK,CACd,CACD,CAAC,IAEDxB,QAAQ,EACRD,iBAAiB,EAEjBE,8BAA8B,IAAI,EAEpC,CAEA,SAAS8C,qBACR,IAIKkC,EAJDrF,sCAAsC,GAEzC4B,QAAQ,CAAA,CAAI,EAERyD,EAAmBtB,mBAAmB,EAC1CrE,OAAO0E,KAAK,CACXC,KAAM,OACNC,IAAMzD,YAAY0D,QAClBC,KAAM,CACLC,OAAQ,sBACRC,SAAU7D,YAAY6D,SACtBW,iBAAkBA,CACnB,EACAV,QAAS,SAAUH,EAAMI,EAAYC,GACpC,IAcKC,EAdFN,EAAKO,MAA2B,EAAnBP,EAAKO,KAAKhF,SACQ,OAA9Bc,YAAYC,eACdkE,cAEArE,UAAY6D,EAAKO,KACjBE,gBAHaT,EAAKO,IAAI,EAMvB7E,4BAA4B,EAC5ByC,cAAc,IAKVmC,EAAkB,gBAItBI,6BAFCJ,EADGN,EAAKM,gBACUN,EAAKM,gBAEKA,CAAe,EAC5C1E,QAAQ,EAGRC,8BAA8B,IAAI,GAGnCuB,QAAQ,CAAA,CAAK,CACd,EACAuD,MAAO,SAAUN,EAAOD,EAAYQ,GACnCtC,QAAQC,IAAI,KAAK,EACjBD,QAAQC,IAAI6B,CAAU,EACtB9B,QAAQC,IAAIqC,CAAW,EACvBF,6BAA6B,eAAe,EAC5C/E,iBAAiB,EAEjBE,8BAA8B,IAAI,EAClCuB,QAAQ,CAAA,CAAK,CACd,CACD,CAAC,IAEDxB,QAAQ,EACRD,iBAAiB,EAEjBE,8BAA8B,IAAI,EAEpC,CAEA,SAAS2E,aAAaM,GACrBC,aAAa,EAGb,IAFA,IAAIC,EAAS,IAAIzE,OAAOC,KAAKyE,aACzBC,EAAa,IAAI3E,OAAOC,KAAK2E,WACxBC,EAAI,EAAGA,EAAIN,EAAUvF,OAAQ6F,CAAC,GAAI,CAE1C,IAAMC,EAAS,IAAI9E,OAAOC,KAAK8E,OAAO,CACrCtC,SAAU,IAAIzC,OAAOC,KAAKuC,OAAO+B,EAAUM,GAAGlC,SAAU4B,EAAUM,GAAGjC,SAAS,EAC9EoC,KAAMlF,YAAYmF,WAAW,iCAC7BvF,IAAKA,GACN,CAAC,EACD,MAAMwF,EAAoBC,qBAAqBZ,EAAUM,EAAE,EACrDb,EAAOO,EAAUM,GACvB7E,OAAOC,KAAKmF,MAAMC,YAAYP,EAAQ,QAAS,SAASQ,GACvDX,EAAWY,WAAWL,CAAiB,EACvCP,EAAWa,KAAK9F,IAAKH,IAAI,EACzBD,8BAA8B0E,CAAI,EAClCrF,OAAO,+IAA+I,EAAE8G,KAAK,uCAAuCzB,EAAK0B,SAAS,CACnN,CAAC,EACDjB,EAAOkB,OAAO,IAAI3F,OAAOC,KAAKuC,OAAO+B,EAAUM,GAAGlC,SAAU4B,EAAUM,GAAGjC,SAAS,CAAC,EAEnFjD,QAAQiG,KAAKd,CAAM,CACpB,CACApF,IAAImG,UAAUpB,CAAM,CACrB,CAEA,SAASD,eACR,GAAoB,EAAjB7E,QAAQX,OAAW,CACrB,IAAK,IAAI6F,EAAI,EAAGA,EAAIlF,QAAQX,OAAQ6F,CAAC,GACpClF,QAAQkF,GAAGiB,OAAO,IAAI,EAEvBnG,QAAU,EACX,CACD,CAEA,SAASwF,qBAAqBnB,GAC7B,IAOQ+B,EAPFC,EAAO,CAAC,WAAY,SAAU,UAAW,YAAa,UAAW,UAAW,SAAU,YAEtFC,GADKjC,EAAKkC,OACFlC,EAAK0B,UAAY,4BAA6B1B,EAAK0B,UAAW,gBAAkB,IACxFS,EAAUnC,EAAKoC,YAAc,sBAAuBpC,EAAKoC,YAAa,OAAS,GAEjFC,EAAY,GAChBA,EAAY,qBACZ,IAAQN,KAAO/B,EAAKsC,QAInBD,GAFAA,EADAA,EACa,eAAWL,EAAKD,GAAK,eACrB/B,EAAKsC,QAAQP,GAAKQ,OAAOC,OAAO,EAAEC,KAAK,KAAK,EAC5C,QAId,MAAO,0CAA0CR,EAAME,GAFvDE,GAAa,SAE4D,QAC1E,CAEA,SAAS/G,8BAA8B0E,GACtCrF,OAAOC,QAAQ,EAAEC,MAAM,WAClBF,OAAO,gDAAgD,IAC/C,MAARqF,EACiB,UAAhB,OAAM,GACRrF,OAAO,iFAAiF,EAAEa,IAAIkH,KAAKC,UAAU3C,CAAI,CAAC,EAClHrF,OAAO,2EAA2E,EAAEa,IAAIwE,EAAKkC,MAAM,GAC1E,UAAhB,OAAM,GACfvH,OAAO,iFAAiF,EAAEa,IAAIkH,KAAKC,UAAU/G,UAAUoE,EAAK,CAAC,EAC7HrF,OAAO,2EAA2E,EAAEa,IAAII,UAAUoE,GAAMkC,MAAM,IAE9GvH,OAAO,iFAAiF,EAAEa,IAAI,EAAE,EAChGb,OAAO,2EAA2E,EAAEa,IAAI,EAAE,IAG3Fb,OAAO,iFAAiF,EAAEa,IAAI,EAAE,EAChGb,OAAO,2EAA2E,EAAEa,IAAI,EAAE,GAG7F,CAAC,CACF,CAEA,SAAS0E,cAAcK,GACtB5F,OAAOC,QAAQ,EAAEsC,aAAa,WAC7B,IAAI0F,EAAgBjI,OAAO,iFAAiF,EACxGkI,EAAa,GACXb,EAAO,CAAC,WAAY,SAAU,UAAW,YAAa,UAAW,UAAW,SAAU,YAGxFc,EAAiBnI,OAAO,2EAA2E,EAAEa,IAAI,EAE7G,GAAsB,EAAnB+E,EAAUvF,OAAW,CACvB6H,GAAc,0BACd,IAAK,IAAIhC,EAAI,EAAGA,EAAIN,EAAUvF,OAAQ6F,CAAC,GAAI,CAE1C,IAQQkB,EARF/B,EAAOO,EAAUM,GACjBkC,EAAK/C,EAAKkC,OACVD,EAAQjC,EAAK0B,UAAY,OAAQ1B,EAAK0B,UAAW,QAAU,GAC3DS,EAAUnC,EAAKoC,YAAc,OAAQpC,EAAKoC,YAAa,QAAU,GACjEY,EAAWhD,EAAKiD,kBAAoB,OAASjD,EAAKiD,kBAAkB,IAAO,WAAa,GAE1FZ,EAAY,GAChBA,EAAY,OACZ,IAAQN,KAAO/B,EAAKsC,QAInBD,GAFAA,EADAA,EACa,eAAWL,EAAKD,GAAK,eACrB/B,EAAKsC,QAAQP,GAAKQ,OAAOC,OAAO,EAAEC,KAAK,KAAK,EAC5C,QAEdJ,GAAa,QAwBbQ,GAFCA,GAREA,GAFCA,GADDA,GAFAA,GAHFA,EADDA,GAAc,oBAFUC,GAAkBC,EAAK,WAAa,IAET,+BAA+BlC,EAAE,OACrE,0BAGE,+DAA+D/E,YAAYmF,WAAW,8CACtF,gDAAiDgB,EAAQE,EAAS,UAClE,mDACC,oCAAoCrG,YAAYmF,WAAW,wCAC3D,4BAA6BoB,EAAW,UACzC,WACA,yCAA0CW,EAAU,UAOtD,UACA,gDACD,OACf,CACAH,GAAc,OACf,CACAD,EAAcM,KAAKL,CAAU,EAGzBM,EAAexI,OAAQ,4EAA6E,EACjGwI,GAAgB,IAAMA,EAAanI,QACzCM,8BAA8B,IAAI,CAEpC,CAAC,CACF,CAEA,SAAS8H,WAAWC,EAAIC,GACvB3I,OAAO,uGAAuG,EAAEqC,YAAY,UAAU,EACtIrC,OAAO0I,CAAE,EAAEtG,SAAS,UAAU,EAC9BzB,8BAA8BgI,CAAK,CACpC,CAEA,SAASC,kBACR,IAAItE,EAAY,GAIhB,OAHAA,EAAUE,QAAUxE,OAAO,mDAAmD,EAAEa,IAAI,EACpFyD,EAAUuE,MAAQ7I,OAAO,iDAAiD,EAAEa,IAAI,EAChFyD,EAAUwE,MAAQ9I,OAAO,iDAAiD,EAAEa,IAAI,EACzEyD,CACR,CAEA,SAAS/D,sBAER,IACKwI,EADDzI,sCAAsC,GACrCyI,EAAgBH,gBAAgB,EAEpC5I,OAAO0E,KAAK,CACXC,KAAM,OACNC,IAAMzD,YAAY0D,QAClBC,KAAM,CACLC,OAAQ,qBACRC,SAAU7D,YAAY6D,SACtB+D,cAAeA,CAChB,EACA9D,QAAS,SAAUH,EAAMI,EAAYC,GACpC,IAUKC,EAVFN,EAAKkE,SACPxI,4BAA4B,EAE5B8B,kBAAkB,EAElBW,cAAc,EACdK,iBAAiB,IAIb8B,EAAkB,gBAItBI,6BAFCJ,EADGN,EAAKM,gBACUN,EAAKM,gBAEKA,CAAe,EAC5C1E,QAAQ,EACRD,iBAAiB,EAEjBE,8BAA8B,IAAI,EAEpC,EACA8E,MAAO,SAAUN,EAAOD,EAAYQ,GACnCtC,QAAQC,IAAI,KAAK,EACjBD,QAAQC,IAAI6B,CAAU,EACtB9B,QAAQC,IAAIqC,CAAW,EACvBF,6BAA6B,eAAe,EAC5C9E,QAAQ,EACRD,iBAAiB,EAEjBE,8BAA8B,IAAI,CACnC,CACD,CAAC,IAEDD,QAAQ,EACRD,iBAAiB,EAEjBE,8BAA8B,IAAI,EAEpC,CAIA,SAAS6E,6BAA6ByD,GACrCjJ,OAAOC,QAAQ,EAAEsC,aAAa,WAC7BvC,OAAOC,QAAQ,EAAEC,MAAM,WACsF,EAAxGF,OAAO,sFAAsF,EAAEK,SACZ,EAAnFL,OAAO,uDAAyDiJ,CAAQ,EAAE5I,SAC5EL,OAAO,kBAAkB,EAAE8C,KAAK,EAChC9C,OAAO,uDAAyDiJ,CAAQ,EAAEjG,KAAK,GAEO,EAApFhD,OAAO,wDAA0DiJ,CAAQ,EAAE5I,UAC7EL,OAAO,mBAAmB,EAAE8C,KAAK,EACjC9C,OAAO,wDAA0DiJ,CAAQ,EAAEjG,KAAK,EAGnF,CAAC,CACF,CAAC,CACF,CAEA,SAASxC,8BACRR,OAAOC,QAAQ,EAAEsC,aAAa,WAC7BvC,OAAOC,QAAQ,EAAEC,MAAM,WACsF,EAAxGF,OAAO,sFAAsF,EAAEK,SAC3D,EAApCL,OAAO,kBAAkB,EAAEK,QAC7BL,OAAO,kBAAkB,EAAE8C,KAAK,EAEO,EAArC9C,OAAO,mBAAmB,EAAEK,SAC9BL,OAAO,mBAAmB,EAAE8C,KAAK,CAGpC,CAAC,CACF,CAAC,CACF,CAhCA9C,OAAQ,MAAO,EAAEI,GAAI,mBAAoBG,mBAAoB"}