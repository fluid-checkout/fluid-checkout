{"version":3,"file":"../../mondialrelay/checkout-mondialrelay-323.min.js","sources":["mondialrelay/checkout-mondialrelay-323.js"],"sourcesContent":["/**\n * Checkout scripts for: Mondial Relay - WordPress (by Kasutan).\n */\n\n(function (root, factory) {\n\tif ( typeof define === 'function' && define.amd ) {\n\t\tdefine([], factory(root));\n\t} else if ( typeof exports === 'object' ) {\n\t\tmodule.exports = factory(root);\n\t} else {\n\t\troot.CheckoutMondialRelay = factory(root);\n\t}\n})(typeof global !== 'undefined' ? global : this.window || this.global, function (root) {\n\n\t'use strict';\n\n\tvar $ = jQuery;\n\tvar _hasJQuery = ( $ != null );\n\n\tvar _hasInitialized = false;\n\tvar _publicMethods = {};\n\tvar _settings = {\n\t\tbuttonSelector: '#delivery_point_chosen',\n\t\tterminalAddressSelector: '#parcel_shop_info',\n\t\tselectedTerminalFieldSelector: '#mondial_relay-terminal',\n\t};\n\n\n\n\t/**\n\t * METHODS\n\t */\n\n\n\n\t/**\n\t * Trigget checkout fragments update.\n\t */\n\tvar triggerUpdateCheckout = function() {\n\t\t// Bail if jQuery is not available\n\t\tif ( ! _hasJQuery ) { return; }\n\n\t\t// Trigger update checkout\n\t\t$( document.body ).trigger( 'update_checkout' );\n\t}\n\n\n\t/**\n\t * Update terminal address element value.\n\t */\n\tvar updateTerminalAddress = function() {\n\t\tvar selectedTerminal = document.querySelector( _settings.selectedTerminalFieldSelector );\n\t\tvar terminalAddressField = document.querySelector( _settings.terminalAddressSelector );\n\t\tvar terminalAddress = '';\n\n\t\t// Bail if the hidden terminal field is not found\n\t\tif ( ! selectedTerminal ) { return; }\n\n\t\t// Bail if value is empty\n\t\tif ( selectedTerminal.value === '' ) { return; }\n\n\t\t// Transform terminal address to include line breaks\n\t\tterminalAddress = tranformTerminalAddress( selectedTerminal.value );\n\n\t\tif ( terminalAddress ) {\n\t\t\t// Update terminal address field with new information\n\t\t\tterminalAddressField.innerHTML = _settings.checkoutMessages.pickup_point_selected + '<br>' + terminalAddress;\n\t\t}\n\n\t}\n\n\n\n\t/**\n\t * Transform terminal address to include line breaks.\n\t */\n\tvar tranformTerminalAddress = function( terminalAddress ) {\n\t\tvar separator = '-MRWP-';\n\t\tvar newAddress = '';\n\n\t\t// Bail if terminal address is empty\n\t\tif ( terminalAddress === '' ) { return ''; };\n\n\t\t// Split address by separator and join with line breaks\n\t\tnewAddress = terminalAddress.split( separator ).join( '<br>' );\n\n\t\t// Remove repeated line breaks\n\t\tnewAddress = newAddress.replace( /<br><br>/g, '<br>' );\n\n\t\treturn newAddress;\n\t}\n\n\n\n\t/**\n\t * Handle document clicks and route to the appropriate function.\n\t */\n\tvar handleClick = function( e ) {\n\t\t// CHOOSE PICKUP POINT\n\t\tif ( e.target.closest( _settings.buttonSelector ) ) {\n\t\t\ttriggerUpdateCheckout();\n\t\t}\n\t};\n\n\n\n\t/**\n\t * Initialize component and set related handlers.\n\t */\n\t_publicMethods.init = function( options ) {\n\t\tif ( _hasInitialized ) { return; }\n\n\t\t// Merge settings\n\t\t_settings = FCUtils.extendObject( _settings, options );\n\n\t\t// Add event listeners\n\t\twindow.addEventListener( 'click', handleClick, true );\n\n\t\t// Update checkout fields on button click\n\t\tif ( _hasJQuery ) {\n\t\t\t// Update terminal address information to avoid stripping line breaks\n\t\t\t$( document ).on( 'updated_checkout', updateTerminalAddress );\n\t\t}\n\n\t\t_hasInitialized = true;\n\t};\n\n\n\t\n\t//\n\t// Public APIs\n\t//\n\treturn _publicMethods;\n\n});\n"],"names":["root","factory","define","amd","exports","module","CheckoutMondialRelay","global","this","window","updateTerminalAddress","selectedTerminal","document","querySelector","_settings","selectedTerminalFieldSelector","terminalAddressField","terminalAddressSelector","terminalAddress","value","split","join","replace","innerHTML","checkoutMessages","pickup_point_selected","handleClick","e","target","closest","buttonSelector","_hasJQuery","$","body","trigger","jQuery","_hasInitialized","_publicMethods","init","options","FCUtils","extendObject","addEventListener","on"],"mappings":"CAIA,CAAWA,EAAMC,KACO,YAAlB,OAAOC,QAAyBA,OAAOC,IAC3CD,OAAO,GAAID,EAAY,CAAC,EACM,UAAnB,OAAOG,QAClBC,OAAOD,QAAUH,EAAY,EAE7BD,EAAKM,qBAAuBL,EAAY,CAEzC,GAAoB,aAAlB,OAAOM,OAAyBA,OAASC,KAAKC,QAAUD,KAAKD,OAAQ,SAAUP,GAsCrD,SAAxBU,IACH,IAAIC,EAAmBC,SAASC,cAAeC,EAAUC,6BAA8B,EACnFC,EAAuBJ,SAASC,cAAeC,EAAUG,uBAAwB,EACjFC,EAAkB,GAGfP,GAGyB,KAA3BA,EAAiBQ,QAiBiBD,EAdIP,EAAiBQ,MAA5DD,EAgBiB,KAGZA,EAGQA,EAAgBE,MAPb,QAO8B,EAAEC,KAAM,MAAO,EAGrCC,QAAS,YAAa,MAAO,EANd,MAftCN,EAAqBO,UAAYT,EAAUU,iBAAiBC,sBAAwB,OAASP,EAG/F,CA4BkB,SAAdQ,EAAwBC,GAEtBA,EAAEC,OAAOC,QAASf,EAAUgB,cAAe,GA3DzCC,GAGPC,EAAGpB,SAASqB,IAAK,EAAEC,QAAS,iBAAkB,CA2D/C,CAtFA,IAAIF,EAAIG,OACJJ,EAAoB,MAALC,EAEfI,EAAkB,CAAA,EAClBC,EAAiB,GACjBvB,EAAY,CACfgB,eAAgB,yBAChBb,wBAAyB,oBACzBF,8BAA+B,yBAChC,EA2GA,OAvBAsB,EAAeC,KAAO,SAAUC,GAC1BH,IAGLtB,EAAY0B,QAAQC,aAAc3B,EAAWyB,CAAQ,EAGrD9B,OAAOiC,iBAAkB,QAAShB,EAAa,CAAA,CAAK,EAG/CK,GAEJC,EAAGpB,QAAS,EAAE+B,GAAI,mBAAoBjC,CAAsB,EAG7D0B,EAAkB,CAAA,EACnB,EAOOC,CAER,CAAC"}