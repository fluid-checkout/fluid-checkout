{"version":3,"file":"../../mondialrelay/checkout-mondialrelay-323-beta-4.min.js","sources":["mondialrelay/checkout-mondialrelay-323-beta-4.js"],"sourcesContent":["/**\r\n * Checkout scripts for: Mondial Relay - WordPress (by Kasutan).\r\n */\r\n\r\n(function (root, factory) {\r\n\tif ( typeof define === 'function' && define.amd ) {\r\n\t\tdefine([], factory(root));\r\n\t} else if ( typeof exports === 'object' ) {\r\n\t\tmodule.exports = factory(root);\r\n\t} else {\r\n\t\troot.CheckoutMondialRelay = factory(root);\r\n\t}\r\n})(typeof global !== 'undefined' ? global : this.window || this.global, function (root) {\r\n\r\n\t'use strict';\r\n\r\n\tvar $ = jQuery;\r\n\tvar _hasJQuery = ( $ != null );\r\n\r\n\tvar _hasInitialized = false;\r\n\tvar _publicMethods = {};\r\n\tvar _settings = {\r\n\t\tbuttonSelector: '#delivery_point_chosen',\r\n\t\tterminalAddressSelector: '#parcel_shop_info',\r\n\t\tselectedTerminalFieldSelector: '#mondial_relay-terminal',\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * METHODS\r\n\t */\r\n\r\n\r\n\r\n\t/**\r\n\t * Trigget checkout fragments update.\r\n\t */\r\n\tvar triggerUpdateCheckout = function() {\r\n\t\t// Bail if jQuery is not available\r\n\t\tif ( ! _hasJQuery ) { return; }\r\n\r\n\t\t// Trigger update checkout\r\n\t\t$( document.body ).trigger( 'update_checkout' );\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Update terminal address element value.\r\n\t */\r\n\tvar updateTerminalAddress = function() {\r\n\t\tvar selectedTerminal = document.querySelector( _settings.selectedTerminalFieldSelector );\r\n\t\tvar terminalAddressField = document.querySelector( _settings.terminalAddressSelector );\r\n\t\tvar terminalAddress = '';\r\n\r\n\t\t// Bail if the hidden terminal field is not found\r\n\t\tif ( ! selectedTerminal ) { return; }\r\n\r\n\t\t// Bail if value is empty\r\n\t\tif ( selectedTerminal.value === '' ) { return; }\r\n\r\n\t\t// Transform terminal address to include line breaks\r\n\t\tterminalAddress = tranformTerminalAddress( selectedTerminal.value );\r\n\r\n\t\tif ( terminalAddress ) {\r\n\t\t\t// Update terminal address field with new information\r\n\t\t\tterminalAddressField.innerHTML = _settings.checkoutMessages.pickup_point_selected + '<br>' + terminalAddress;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Transform terminal address to include line breaks.\r\n\t */\r\n\tvar tranformTerminalAddress = function( terminalAddress ) {\r\n\t\tvar separator = '-MRWP-';\r\n\t\tvar newAddress = '';\r\n\r\n\t\t// Bail if terminal address is empty\r\n\t\tif ( terminalAddress === '' ) { return ''; };\r\n\r\n\t\t// Split address by separator and join with line breaks\r\n\t\tnewAddress = terminalAddress.split( separator ).join( '<br>' );\r\n\r\n\t\t// Remove repeated line breaks\r\n\t\tnewAddress = newAddress.replace( /<br><br>/g, '<br>' );\r\n\r\n\t\treturn newAddress;\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Handle document clicks and route to the appropriate function.\r\n\t */\r\n\tvar handleClick = function( e ) {\r\n\t\t// CHOOSE PICKUP POINT\r\n\t\tif ( e.target.closest( _settings.buttonSelector ) ) {\r\n\t\t\ttriggerUpdateCheckout();\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Initialize component and set related handlers.\r\n\t */\r\n\t_publicMethods.init = function( options ) {\r\n\t\tif ( _hasInitialized ) { return; }\r\n\r\n\t\t// Merge settings\r\n\t\t_settings = FCUtils.extendObject( _settings, options );\r\n\r\n\t\t// Add event listeners\r\n\t\twindow.addEventListener( 'click', handleClick, true );\r\n\r\n\t\t// Update checkout fields on button click\r\n\t\tif ( _hasJQuery ) {\r\n\t\t\t// Update terminal address information to avoid stripping line breaks\r\n\t\t\t$( document ).on( 'updated_checkout', updateTerminalAddress );\r\n\t\t}\r\n\r\n\t\t_hasInitialized = true;\r\n\t};\r\n\r\n\r\n\t\r\n\t//\r\n\t// Public APIs\r\n\t//\r\n\treturn _publicMethods;\r\n\r\n});\r\n"],"names":["root","factory","define","amd","exports","module","CheckoutMondialRelay","global","this","window","updateTerminalAddress","selectedTerminal","document","querySelector","_settings","selectedTerminalFieldSelector","terminalAddressField","terminalAddressSelector","terminalAddress","value","split","join","replace","innerHTML","checkoutMessages","pickup_point_selected","handleClick","e","target","closest","buttonSelector","_hasJQuery","$","body","trigger","jQuery","_hasInitialized","_publicMethods","init","options","FCUtils","extendObject","addEventListener","on"],"mappings":"AAIA,CAAA,SAAWA,EAAMC,GACO,YAAlB,OAAOC,QAAyBA,OAAOC,IAC3CD,OAAO,GAAID,EAAY,CAAC,EACM,UAAnB,OAAOG,QAClBC,OAAOD,QAAUH,EAAY,EAE7BD,EAAKM,qBAAuBL,EAAY,CAEzC,EAAoB,aAAlB,OAAOM,OAAyBA,OAASC,KAAKC,QAAUD,KAAKD,OAAQ,SAAUP,GAEjF,aAoC4B,SAAxBU,IACH,IAAIC,EAAmBC,SAASC,cAAeC,EAAUC,6BAA8B,EACnFC,EAAuBJ,SAASC,cAAeC,EAAUG,uBAAwB,EACjFC,EAAkB,GAGfP,GAGyB,KAA3BA,EAAiBQ,QAiBiBD,EAdIP,EAAiBQ,MAA5DD,EAgBiB,KAGZA,EAGQA,EAAgBE,MAPb,QAO8B,EAAEC,KAAM,MAAO,EAGrCC,QAAS,YAAa,MAAO,EANd,MAftCN,EAAqBO,UAAYT,EAAUU,iBAAiBC,sBAAwB,OAASP,EAG/F,CA4BkB,SAAdQ,EAAwBC,GAEtBA,EAAEC,OAAOC,QAASf,EAAUgB,cAAe,GA3DzCC,GAGPC,EAAGpB,SAASqB,IAAK,EAAEC,QAAS,iBAAkB,CA2D/C,CAtFA,IAAIF,EAAIG,OACJJ,EAAoB,MAALC,EAEfI,EAAkB,CAAA,EAClBC,EAAiB,GACjBvB,EAAY,CACfgB,eAAgB,yBAChBb,wBAAyB,oBACzBF,8BAA+B,yBAChC,EA2GA,OAvBAsB,EAAeC,KAAO,SAAUC,GAC1BH,IAGLtB,EAAY0B,QAAQC,aAAc3B,EAAWyB,CAAQ,EAGrD9B,OAAOiC,iBAAkB,QAAShB,EAAa,CAAA,CAAK,EAG/CK,GAEJC,EAAGpB,QAAS,EAAE+B,GAAI,mBAAoBjC,CAAsB,EAG7D0B,EAAkB,CAAA,EACnB,EAOOC,CAER,CAAC"}