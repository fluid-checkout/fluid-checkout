{"version":3,"file":"../../mondialrelay/checkout-mondialrelay-3112-beta-2.min.js","sources":["mondialrelay/checkout-mondialrelay-3112-beta-2.js"],"sourcesContent":["/**\r\n * Checkout scripts for: Mondial Relay - WordPress (by Kasutan).\r\n */\r\n\r\n(function (root, factory) {\r\n\tif ( typeof define === 'function' && define.amd ) {\r\n\t\tdefine([], factory(root));\r\n\t} else if ( typeof exports === 'object' ) {\r\n\t\tmodule.exports = factory(root);\r\n\t} else {\r\n\t\troot.CheckoutMondialRelay = factory(root);\r\n\t}\r\n})(typeof global !== 'undefined' ? global : this.window || this.global, function (root) {\r\n\r\n\t'use strict';\r\n\r\n\tvar $ = jQuery;\r\n\tvar _hasJQuery = ( $ != null );\r\n\r\n\tvar _hasInitialized = false;\r\n\tvar _publicMethods = {};\r\n\tvar _settings = {\r\n\t\tbuttonSelector: '#delivery_point_chosen',\r\n\t\tterminalAddressSelector: '#parcel_shop_info',\r\n\t\tselectedTerminalFieldSelector: '#mondial_relay-terminal',\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * METHODS\r\n\t */\r\n\r\n\r\n\r\n\t/**\r\n\t * Update checkout fields.\r\n\t */\r\n\tvar updateCheckout = function() {\r\n\t\t// Create update checkout event\r\n\t\tvar event = new Event( 'update_checkout' );\r\n\r\n\t\t// Trigger event\r\n\t\tdocument.body.dispatchEvent( event );\r\n\t}\r\n\r\n\r\n\t/**\r\n\t * Update terminal address element value.\r\n\t */\r\n\tvar updateTerminalAddress = function() {\r\n\t\tvar selectedTerminal = document.querySelector( _settings.selectedTerminalFieldSelector );\r\n\t\tvar terminalAddressField = document.querySelector( _settings.terminalAddressSelector );\r\n\t\tvar terminalAddress = '';\r\n\r\n\t\t// Bail if the hidden terminal field is not found\r\n\t\tif ( ! selectedTerminal ) return;\r\n\r\n\t\t// Bail if value is empty\r\n\t\tif ( selectedTerminal.value === '' ) return;\r\n\r\n\t\t// Transform terminal address to include line breaks\r\n\t\tterminalAddress = tranformTerminalAddress( selectedTerminal.value );\r\n\r\n\t\tif ( terminalAddress ) {\r\n\t\t\t// Update terminal address field with new information\r\n\t\t\tterminalAddressField.innerHTML = _settings.checkoutMessages.pickup_point_selected + '<br>' + terminalAddress;\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Transform terminal address to include line breaks.\r\n\t */\r\n\tvar tranformTerminalAddress = function( terminalAddress ) {\r\n\t\tvar separator = '-MRWP-';\r\n\t\tvar newAddress = '';\r\n\r\n\t\t// Bail if terminal address is empty\r\n\t\tif ( terminalAddress === '' ) return '';\r\n\r\n\t\t// Split address by separator and join with line breaks\r\n\t\tnewAddress = terminalAddress.split( separator ).join( '<br>' );\r\n\r\n\t\t// Remove repeated line breaks\r\n\t\tnewAddress = newAddress.replace( /<br><br>/g, '<br>' );\r\n\r\n\t\treturn newAddress;\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Initialize component and set related handlers.\r\n\t */\r\n\t_publicMethods.init = function( options ) {\r\n\t\tif ( _hasInitialized ) return;\r\n\r\n\t\t// Merge settings\r\n\t\t_settings = FCUtils.extendObject( _settings, options );\r\n\r\n\t\t// Update checkout fields on button click\r\n\t\tif ( _hasJQuery ) {\r\n\t\t\t// Update checkout when pickup terminal is selected\r\n\t\t\t$( _settings.buttonSelector ).on( 'click', updateCheckout );\r\n\r\n\t\t\t// Update terminal address information to avoid stripping line breaks\r\n\t\t\t$( document ).on( 'updated_checkout', updateTerminalAddress );\r\n\t\t}\r\n\r\n\t\t_hasInitialized = true;\r\n\t};\r\n\r\n\r\n\t\r\n\t//\r\n\t// Public APIs\r\n\t//\r\n\treturn _publicMethods;\r\n\r\n});\r\n"],"names":["root","factory","define","amd","exports","module","CheckoutMondialRelay","global","this","window","updateCheckout","event","Event","document","body","dispatchEvent","updateTerminalAddress","selectedTerminal","querySelector","_settings","selectedTerminalFieldSelector","terminalAddressField","terminalAddressSelector","terminalAddress","value","split","join","replace","innerHTML","checkoutMessages","pickup_point_selected","$","jQuery","_hasJQuery","_hasInitialized","_publicMethods","buttonSelector","init","options","FCUtils","extendObject","on"],"mappings":"AAIA,CAAA,SAAWA,EAAMC,GACO,YAAlB,OAAOC,QAAyBA,OAAOC,IAC3CD,OAAO,GAAID,EAAY,CAAC,EACM,UAAnB,OAAOG,QAClBC,OAAOD,QAAUH,EAAY,EAE7BD,EAAKM,qBAAuBL,EAAY,CAEzC,EAAoB,aAAlB,OAAOM,OAAyBA,OAASC,KAAKC,QAAUD,KAAKD,OAAQ,SAAUP,GAEjF,aAwBqB,SAAjBU,IAEH,IAAIC,EAAQ,IAAIC,MAAO,iBAAkB,EAGzCC,SAASC,KAAKC,cAAeJ,CAAM,CACpC,CAM4B,SAAxBK,IACH,IAAIC,EAAmBJ,SAASK,cAAeC,EAAUC,6BAA8B,EACnFC,EAAuBR,SAASK,cAAeC,EAAUG,uBAAwB,EACjFC,EAAkB,GAGfN,GAGyB,KAA3BA,EAAiBO,QAiBiBD,EAdIN,EAAiBO,MAA5DD,EAgBiB,KAGZA,EAAgC,GAGxBA,EAAgBE,MAPb,QAO8B,EAAEC,KAAM,MAAO,EAGrCC,QAAS,YAAa,MAAO,KArBpDN,EAAqBO,UAAYT,EAAUU,iBAAiBC,sBAAwB,OAASP,EAG/F,CArDA,IAAIQ,EAAIC,OACJC,EAAoB,MAALF,EAEfG,EAAkB,CAAA,EAClBC,EAAiB,GACjBhB,EAAY,CACfiB,eAAgB,yBAChBd,wBAAyB,oBACzBF,8BAA+B,yBAChC,EA+FA,OAvBAe,EAAeE,KAAO,SAAUC,GAC1BJ,IAGLf,EAAYoB,QAAQC,aAAcrB,EAAWmB,CAAQ,EAGhDL,IAEJF,EAAGZ,EAAUiB,cAAe,EAAEK,GAAI,QAAS/B,CAAe,EAG1DqB,EAAGlB,QAAS,EAAE4B,GAAI,mBAAoBzB,CAAsB,GAG7DkB,EAAkB,CAAA,EACnB,EAOOC,CAER,CAAC"}