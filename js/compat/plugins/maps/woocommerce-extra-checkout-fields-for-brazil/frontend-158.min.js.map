{"version":3,"file":"../../woocommerce-extra-checkout-fields-for-brazil/frontend-158.min.js","sources":["woocommerce-extra-checkout-fields-for-brazil/frontend-158.js"],"sourcesContent":["/* global wcbcf_public_params */\n/*jshint devel: true */\njQuery( function( $ ) {\n\n\t/**\n\t * Frontend actions\n\t */\n\tvar wc_ecfb_frontend = {\n\n\t\t/**\n\t\t * Initialize frontend actions\n\t\t */\n\t\tinit: function() {\n\t\t\tif ( '0' === wcbcf_public_params.sort_state_country ) {\n\t\t\t\t$( document.body ).on( 'country_to_state_changing', this.country_to_state_changing );\n\t\t\t}\n\n\t\t\tif ( '0' !== wcbcf_public_params.person_type ) {\n\t\t\t\tthis.person_type_fields();\n\t\t\t}\n\n\t\t\tif ( 'yes' === wcbcf_public_params.maskedinput ) {\n\t\t\t\t$( document.body ).on( 'change', '#billing_country', function() {\n\t\t\t\t\tif ( 'BR' === $( this ).val() ) {\n\t\t\t\t\t\twc_ecfb_frontend.maskBilling();\n\t\t\t\t\t} else {\n\t\t\t\t\t\twc_ecfb_frontend.unmaskBilling();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$( document.body ).on( 'change', '#shipping_country', function() {\n\t\t\t\t\tif ( 'BR' === $( this ).val() ) {\n\t\t\t\t\t\twc_ecfb_frontend.maskShipping();\n\t\t\t\t\t} else {\n\t\t\t\t\t\twc_ecfb_frontend.unmaskShipping();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tthis.maskGeneral();\n\t\t\t}\n\n\t\t\tif ( 'yes' === wcbcf_public_params.mailcheck ) {\n\t\t\t\tthis.emailCheck();\n\t\t\t}\n\n\t\t\t// Check if select2 exists.\n\t\t\tif ( $().select2 ) {\n\t\t\t\t$( '.wc-ecfb-select' ).select2();\n\t\t\t}\n\t\t\tif ($('#billing_country').val() === 'BR' ) {\n\t\t\t\twc_ecfb_frontend.maskBilling();\n\t\t\t}\n\t\t\t// CHANGE: Also mask shipping when initializing\n\t\t\tif ($('#shipping_country').val() === 'BR' ) {\n\t\t\t\twc_ecfb_frontend.maskShipping();\n\t\t\t}\n\t\t},\n\n\t\t/**\n\t\t * Country to state changing.\n\t\t * Fix the fields order.\n\t\t */\n\t\tcountry_to_state_changing: function() {\n\t\t\t// Billing.\n\t\t\t$( '#billing_state_field label' ).html( wcbcf_public_params.state + ' <abbr class=\"required\" title=\"' + wcbcf_public_params.required + '\">*</abbr>' );\n\t\t\t$( '#billing_postcode_field' ).insertAfter( '#billing_country_field' );\n\n\t\t\t// Shipping.\n\t\t\tif ( $( '#shipping_state_field' ).length ) {\n\t\t\t\t$( '#shipping_state_field label' ).html( wcbcf_public_params.state + ' <abbr class=\"required\" title=\"' + wcbcf_public_params.required + '\">*</abbr>' );\n\t\t\t\t$( '#shipping_postcode_field' ).insertAfter( '#shipping_country_field' );\n\t\t\t}\n\t\t},\n\n\t\tperson_type_fields: function() {\n\t\t\t// Required fields.\n\t\t\tif ( 'no' === wcbcf_public_params.only_brazil ) {\n                $( '.person-type-field label .required' ).remove();\n\t\t\t\t$( '.person-type-field' ).addClass( 'validate-required' );\n\t\t\t\t$( '.person-type-field label' ).append( ' <abbr class=\"required\" title=\"' + wcbcf_public_params.required + '\">*</abbr>' );\n\t\t\t} else {\n\t\t\t\t$( '#billing_country' ).on( 'change', function () {\n\t\t\t\t\tvar current = $( this ).val();\n\n\t\t\t\t\tif ( 'BR' === current ) {\n                        $( '.person-type-field label .required' ).remove();\n\t\t\t\t\t\t$( '.person-type-field' ).addClass( 'validate-required' );\n\t\t\t\t\t\t$( '.person-type-field label' ).append( ' <abbr class=\"required\" title=\"' + wcbcf_public_params.required + '\">*</abbr>' );\n\t\t\t\t\t} else {\n\t\t\t\t\t\t$( '.person-type-field' ).removeClass( 'validate-required' );\n\t\t\t\t\t\t$( '.person-type-field label .required' ).remove();\n\t\t\t\t\t}\n\t\t\t\t// CHANGE: Do not trigger field `change` event after updating the field attributes\n\t\t\t\t// to prevent an infinite loop where the `change` event triggers the `update_checkout` event,\n\t\t\t\t// which in turn, would run this code again and trigger the field `change` event, and so on.\n\t\t\t\t} );\n\t\t\t}\n\n\t\t\tif ( '1' === wcbcf_public_params.person_type ) {\n\t\t\t\t$( '#billing_persontype' ).on( 'change', function () {\n\t\t\t\t\tvar current = $( this ).val();\n\n\t\t\t\t\t$( '#billing_cpf_field' ).hide();\n\t\t\t\t\t$( '#billing_rg_field' ).hide();\n\t\t\t\t\t$( '#billing_company_field' ).hide();\n\t\t\t\t\t$( '#billing_cnpj_field' ).hide();\n\t\t\t\t\t$( '#billing_ie_field' ).hide();\n\n\t\t\t\t\tif ( '1' === current ) {\n\t\t\t\t\t\t$( '#billing_cpf_field' ).show();\n\t\t\t\t\t\t$( '#billing_rg_field' ).show();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( '2' === current ) {\n\t\t\t\t\t\t$( '#billing_company_field' ).show();\n\t\t\t\t\t\t$( '#billing_cnpj_field' ).show();\n\t\t\t\t\t\t$( '#billing_ie_field' ).show();\n\t\t\t\t\t}\n\t\t\t\t}).change();\n\t\t\t}\n\t\t},\n\n\t\tmaskBilling: function() {\n\t\t\twc_ecfb_frontend.maskPhone( '#billing_phone, #billing_cellphone' );\n\t\t\t$( '#billing_birthdate' ).mask( '00/00/0000' );\n\t\t\t$( '#billing_postcode' ).mask( '00000-000' );\n\t\t\t$( '#billing_phone, #billing_cellphone, #billing_birthdate, #billing_postcode' ).attr( 'type', 'tel' );\n\t\t},\n\n\t\tunmaskBilling: function() {\n\t\t\t$( '#billing_phone, #billing_cellphone, #billing_birthdate, #billing_postcode' ).unmask().attr( 'type', 'text' );\n\t\t},\n\n\t\tmaskShipping: function() {\n\t\t\t// CHANGE: Add mask to shipping phone if field exists\n\t\t\twc_ecfb_frontend.maskPhone( '#shipping_phone' );\n\t\t\t$( '#shipping_postcode' ).mask( '00000-000' ).attr( 'type', 'tel' );\n\t\t},\n\n\t\tunmaskShipping: function() {\n\t\t\t// CHANGE: Remove mask from shipping phone if field exists\n\t\t\t$( '#shipping_postcode', '#shipping_phone' ).unmask().attr( 'type', 'text' );\n\t\t},\n\n\t\tmaskGeneral: function() {\n\t\t\t$( '#billing_cpf, #credit-card-cpf' ).mask( '000.000.000-00' );\n\t\t\t$( '#billing_cnpj' ).mask( '00.000.000/0000-00' );\n\t\t\twc_ecfb_frontend.maskPhone( '#credit-card-phone' );\n\t\t},\n\n\t\tmaskPhone: function(selector) {\n\t\t\tvar $element = $(selector),\n\t\t\t\t\tMaskBehavior = function(val) {\n\t\t\t\t\t\treturn val.replace(/\\D/g, '').length === 11 ? '(00) 00000-0000' : '(00) 0000-00009';\n\t\t\t\t\t},\n\t\t\t\t\tmaskOptions = {\n\t\t\t\t\t\tonKeyPress: function(val, e, field, options) {\n\t\t\t\t\t\t\tfield.mask(MaskBehavior.apply({}, arguments), options);\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\tconsole.log( $element );\n\n\t\t\t$element.mask(MaskBehavior, maskOptions);\n\t\t},\n\n\t\temailCheck: function() {\n\t\t\tif ( $( '#wcbcf-mailsuggest' ).length < 1 ) {\n\t\t\t\t$( '#billing_email' ).after( '<div id=\"wcbcf-mailsuggest\"></div>' );\n\t\t\t}\n\n\t\t\t$( '#billing_email' ).on( 'blur', function () {\n\t\t\t\t$( '#wcbcf-mailsuggest' ).html( '' );\n\t\t\t\t$( this ).mailcheck({\n\t\t\t\t\tsuggested: function( element, suggestion ) {\n\t\t\t\t\t\t$( '#wcbcf-mailsuggest' ).html( 'VocÃª quis dizer: ' + suggestion.full + '?' );\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\t$( '#wcbcf-mailsuggest' ).css({\n\t\t\t\tcolor: '#c00',\n\t\t\t\tfontSize: 'small'\n\t\t\t});\n\t\t}\n\t};\n\n\twc_ecfb_frontend.init();\n\n\t// CHANGE: Also run initialization after every checkout update as sections with affected fields might have have been replaced\n\t$( document.body ).on( 'updated_checkout', function() { wc_ecfb_frontend.init() } );\n});\n"],"names":["jQuery","$","wc_ecfb_frontend","init","wcbcf_public_params","sort_state_country","document","body","on","this","country_to_state_changing","person_type","person_type_fields","maskedinput","val","maskBilling","unmaskBilling","maskShipping","unmaskShipping","maskGeneral","mailcheck","emailCheck","select2","html","state","required","insertAfter","length","only_brazil","remove","addClass","append","removeClass","current","hide","show","change","maskPhone","mask","attr","unmask","selector","MaskBehavior","replace","$element","maskOptions","onKeyPress","e","field","options","apply","arguments","console","log","after","suggested","element","suggestion","full","css","color","fontSize"],"mappings":"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"}