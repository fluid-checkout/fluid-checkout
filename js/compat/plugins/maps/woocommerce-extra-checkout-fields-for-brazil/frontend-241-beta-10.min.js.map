{"version":3,"file":"../../woocommerce-extra-checkout-fields-for-brazil/frontend-241-beta-10.min.js","sources":["woocommerce-extra-checkout-fields-for-brazil/frontend-241-beta-10.js"],"sourcesContent":["/* global bmwPublicParams */\njQuery(function ($) {\n\t/**\n\t * Frontend actions\n\t */\n\tconst bmwFrontEnd = {\n\t\t/**\n\t\t * Initialize frontend actions\n\t\t */\n\t\tinit() {\n\t\t\tif ('0' !== bmwPublicParams.person_type) {\n\t\t\t\t// CHANGE: Fix refence to function in main object\n\t\t\t\tbmwFrontEnd.person_type_fields();\n\t\t\t}\n\n\t\t\tif ('yes' === bmwPublicParams.maskedinput) {\n\t\t\t\t$(document.body).on('change', '#billing_country', function () {\n\t\t\t\t\tif ('BR' === $(this).val()) {\n\t\t\t\t\t\tbmwFrontEnd.maskBilling();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbmwFrontEnd.unmaskBilling();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\t$(document.body).on('change', '#shipping_country', function () {\n\t\t\t\t\tif ('BR' === $(this).val()) {\n\t\t\t\t\t\tbmwFrontEnd.maskShipping();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tbmwFrontEnd.unmaskShipping();\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tif ('BR' === $('#billing_country').val()) {\n\t\t\t\t\tbmwFrontEnd.maskBilling();\n\t\t\t\t}\n\n\t\t\t\tif ('BR' === $('#shipping_country').val()) {\n\t\t\t\t\tbmwFrontEnd.maskShipping();\n\t\t\t\t}\n\n\t\t\t\t// CHANGE: Fix refence to function in main object\n\t\t\t\tbmwFrontEnd.maskGeneral();\n\t\t\t}\n\n\t\t\t// CHANGE: Remove code of the Mailcheck feature from Brazilian Market plugin as it is already provided by Fluid Checkout\n\n\t\t\t// Check if select2 exists.\n\t\t\tif ($().select2) {\n\t\t\t\t$('.wc-ecfb-select').select2();\n\t\t\t}\n\t\t},\n\n\t\tperson_type_fields() {\n\t\t\t// Required fields.\n\t\t\tif ('no' === bmwPublicParams.only_brazil) {\n\t\t\t\t$('.person-type-field label .required').remove();\n\t\t\t\t$('.person-type-field').addClass('validate-required');\n\t\t\t\t$('.person-type-field label').append(\n\t\t\t\t\t' <abbr class=\"required\" title=\"' +\n\t\t\t\t\t\tbmwPublicParams.required +\n\t\t\t\t\t\t'\">*</abbr>'\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\t// CHANGE: Extract anonymous function to a named function that can be reused\n\t\t\t\tvar updateBillingPersonFieldArgs = function () {\n\t\t\t\t\t// CHANGE: Get field directly as referencing it with `this` do not work in this context\n\t\t\t\t\tconst current = $('#billing_country').val();\n\n\t\t\t\t\t\tif ('BR' === current) {\n\t\t\t\t\t\t\t$('.person-type-field label .required').remove();\n\t\t\t\t\t\t\t$('.person-type-field').addClass(\n\t\t\t\t\t\t\t\t'validate-required'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t$('.person-type-field label').append(\n\t\t\t\t\t\t\t\t' <abbr class=\"required\" title=\"' +\n\t\t\t\t\t\t\t\t\tbmwPublicParams.required +\n\t\t\t\t\t\t\t\t\t'\">*</abbr>'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$('.person-type-field').removeClass(\n\t\t\t\t\t\t\t\t'validate-required'\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t$('.person-type-field label .required').remove();\n\t\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t// CHANGE: Replace `change` event trigger with calling the function directly\n\t\t\t\t$('#billing_country').on('change', updateBillingPersonFieldArgs);\n\t\t\t\tupdateBillingPersonFieldArgs();\n\t\t\t}\n\n\t\t\tif ('1' === bmwPublicParams.person_type) {\n\t\t\t\t// CHANGE: Extract anonymous function to a named function that can be reused\n\t\t\t\tvar updateBillingFieldsArgs = function () {\n\t\t\t\t\t// CHANGE: Get field directly as referencing it with `this` do not work in this context\n\t\t\t\t\tconst current = $('#billing_persontype').val();\n\n\t\t\t\t\t$('#billing_cpf_field').hide();\n\t\t\t\t\t$('#billing_rg_field').hide();\n\t\t\t\t\t$('#billing_company_field').hide();\n\t\t\t\t\t$('#billing_cnpj_field').hide();\n\t\t\t\t\t$('#billing_ie_field').hide();\n\n\t\t\t\t\tif ('1' === current) {\n\t\t\t\t\t\t$('#billing_cpf_field').show();\n\t\t\t\t\t\t$('#billing_rg_field').show();\n\t\t\t\t\t}\n\n\t\t\t\t\tif ('2' === current) {\n\t\t\t\t\t\t$('#billing_company_field').show();\n\t\t\t\t\t\t$('#billing_cnpj_field').show();\n\t\t\t\t\t\t$('#billing_ie_field').show();\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\t// CHANGE: Replace `change` event trigger with calling the function directly\n\t\t\t\t$('#billing_persontype').on( 'change', updateBillingFieldsArgs );\n\t\t\t\tupdateBillingFieldsArgs();\n\t\t\t}\n\t\t},\n\n\t\tmaskBilling() {\n\t\t\t// CHANGE: Maybe do not mask phone fields\n\t\t\tif ( 'yes' === bmwPublicParams.maskedinput_phone ) {\n\t\t\t\tbmwFrontEnd.maskPhone('#billing_phone, #billing_cellphone');\n\t\t\t}\n\n\t\t\t$('#billing_birthdate').mask('00/00/0000');\n\t\t\t$('#billing_postcode').mask('00000-000');\n\t\t\t$(\n\t\t\t\t'#billing_phone, #billing_cellphone, #billing_birthdate, #billing_postcode'\n\t\t\t).attr('type', 'tel');\n\t\t},\n\n\t\tunmaskBilling() {\n\t\t\t$(\n\t\t\t\t'#billing_phone, #billing_cellphone, #billing_birthdate, #billing_postcode'\n\t\t\t)\n\t\t\t\t.unmask()\n\t\t\t\t.attr('type', 'text');\n\t\t},\n\n\t\tmaskShipping() {\n\t\t\t// CHANGE: Maybe mask shipping phone field\n\t\t\tif ( 'yes' === bmwPublicParams.maskedinput_phone ) {\n\t\t\t\tbmwFrontEnd.maskPhone( '#shipping_phone' );\n\t\t\t}\n\n\t\t\t$('#shipping_postcode').mask('00000-000').attr('type', 'tel');\n\t\t},\n\n\t\tunmaskShipping() {\n\t\t\t$('#shipping_postcode').unmask().attr('type', 'text');\n\n\t\t\t// CHANGE: Unmask shipping phone field, but do not change type attribute\n\t\t\t$( '#shipping_phone' ).unmask();\n\t\t},\n\n\t\tmaskGeneral() {\n\t\t\t$('#billing_cpf, #credit-card-cpf').mask('000.000.000-00');\n\t\t\t$('#billing_cnpj').mask('00.000.000/0000-00');\n\t\t\tbmwFrontEnd.maskPhone('#credit-card-phone');\n\t\t},\n\n\t\tmaskPhone(selector) {\n\t\t\tconst $element = $(selector),\n\t\t\t\tMaskBehavior = function (val) {\n\t\t\t\t\treturn val.replace(/\\D/g, '').length === 11\n\t\t\t\t\t\t? '(00) 00000-0000'\n\t\t\t\t\t\t: '(00) 0000-00009';\n\t\t\t\t},\n\t\t\t\tmaskOptions = {\n\t\t\t\t\tonKeyPress(val, e, field, options) {\n\t\t\t\t\t\tfield.mask(MaskBehavior.apply({}, arguments), options);\n\t\t\t\t\t},\n\t\t\t\t};\n\n\t\t\t$element.mask(MaskBehavior, maskOptions);\n\t\t},\n\n\t\t// CHANGE: Remove code of the Mailcheck feature from Brazilian Market plugin as it is already provided by Fluid Checkout\n\t};\n\n\tbmwFrontEnd.init();\n\n\t// CHANGE: Also run initialization after every checkout update as sections with affected fields might have have been replaced\n\t$( document.body ).on( 'updated_checkout', bmwFrontEnd.init );\n});\n"],"names":["jQuery","$","bmwFrontEnd","init","bmwPublicParams","person_type","person_type_fields","maskedinput","document","body","on","this","val","maskBilling","unmaskBilling","maskShipping","unmaskShipping","maskGeneral","select2","updateBillingFieldsArgs","only_brazil","remove","addClass","append","required","updateBillingPersonFieldArgs","removeClass","current","hide","show","maskedinput_phone","maskPhone","mask","attr","unmask","selector","MaskBehavior","replace","length","$element","maskOptions","onKeyPress","e","field","options","apply","arguments"],"mappings":"AACAA,OAAO,SAAUC,GAIhB,MAAMC,EAAc,CAInBC,OACK,MAAQC,gBAAgBC,aAE3BH,EAAYI,qBAGT,QAAUF,gBAAgBG,cAC7BN,EAAEO,SAASC,MAAMC,GAAG,SAAU,mBAAoB,WAC7C,OAAST,EAAEU,MAAMC,MACpBV,EAAYW,cAEZX,EAAYY,kBAIdb,EAAEO,SAASC,MAAMC,GAAG,SAAU,oBAAqB,WAC9C,OAAST,EAAEU,MAAMC,MACpBV,EAAYa,eAEZb,EAAYc,mBAIV,OAASf,EAAE,oBAAoBW,OAClCV,EAAYW,cAGT,OAASZ,EAAE,qBAAqBW,OACnCV,EAAYa,eAIbb,EAAYe,eAMThB,IAAIiB,SACPjB,EAAE,mBAAmBiB,WAIvBZ,qBAEC,IAsCKa,EAtCD,OAASf,gBAAgBgB,aAC5BnB,EAAE,sCAAsCoB,SACxCpB,EAAE,sBAAsBqB,SAAS,qBACjCrB,EAAE,4BAA4BsB,OAC7B,kCACCnB,gBAAgBoB,SAChB,gBAIEC,EAA+B,WAI7B,OAFWxB,EAAE,oBAAoBW,OAGpCX,EAAE,sCAAsCoB,SACxCpB,EAAE,sBAAsBqB,SACvB,qBAEDrB,EAAE,4BAA4BsB,OAC7B,kCACCnB,gBAAgBoB,SAChB,gBAGFvB,EAAE,sBAAsByB,YACvB,qBAEDzB,EAAE,sCAAsCoB,WAI3CpB,EAAE,oBAAoBS,GAAG,SAAUe,GACnCA,KAGG,MAAQrB,gBAAgBC,cAEvBc,EAA0B,WAE7B,IAAMQ,EAAU1B,EAAE,uBAAuBW,MAEzCX,EAAE,sBAAsB2B,OACxB3B,EAAE,qBAAqB2B,OACvB3B,EAAE,0BAA0B2B,OAC5B3B,EAAE,uBAAuB2B,OACzB3B,EAAE,qBAAqB2B,OAEnB,MAAQD,IACX1B,EAAE,sBAAsB4B,OACxB5B,EAAE,qBAAqB4B,QAGpB,MAAQF,IACX1B,EAAE,0BAA0B4B,OAC5B5B,EAAE,uBAAuB4B,OACzB5B,EAAE,qBAAqB4B,SAIzB5B,EAAE,uBAAuBS,GAAI,SAAUS,GACvCA,MAIFN,cAEM,QAAUT,gBAAgB0B,mBAC9B5B,EAAY6B,UAAU,sCAGvB9B,EAAE,sBAAsB+B,KAAK,cAC7B/B,EAAE,qBAAqB+B,KAAK,aAC5B/B,EACC,6EACCgC,KAAK,OAAQ,QAGhBnB,gBACCb,EACC,6EAECiC,SACAD,KAAK,OAAQ,SAGhBlB,eAEM,QAAUX,gBAAgB0B,mBAC9B5B,EAAY6B,UAAW,mBAGxB9B,EAAE,sBAAsB+B,KAAK,aAAaC,KAAK,OAAQ,QAGxDjB,iBACCf,EAAE,sBAAsBiC,SAASD,KAAK,OAAQ,QAG9ChC,EAAG,mBAAoBiC,UAGxBjB,cACChB,EAAE,kCAAkC+B,KAAK,kBACzC/B,EAAE,iBAAiB+B,KAAK,sBACxB9B,EAAY6B,UAAU,uBAGvBA,UAAUI,GAEO,SAAfC,EAAyBxB,GACxB,OAAyC,KAAlCA,EAAIyB,QAAQ,MAAO,IAAIC,OAC3B,kBACA,kBAJL,MAAMC,EAAWtC,EAAEkC,GAMlBK,EAAc,CACbC,WAAW7B,EAAK8B,EAAGC,EAAOC,GACzBD,EAAMX,KAAKI,EAAaS,MAAM,GAAIC,WAAYF,KAIjDL,EAASP,KAAKI,EAAcI,KAM9BtC,EAAYC,OAGZF,EAAGO,SAASC,MAAOC,GAAI,mBAAoBR,EAAYC"}