{"version":3,"file":"../../payplus-payment-gateway/checkout-323-beta-4.min.js","sources":["payplus-payment-gateway/checkout-323-beta-4.js"],"sourcesContent":["/**\r\n * Manage checkout functions necessary for the PayPlus Checkout payment gateway.\r\n *\r\n * DEPENDS ON:\r\n * - jQuery // Interact with WooCommerce events\r\n */\r\n\r\n(function (root, factory) {\r\n\tif ( typeof define === 'function' && define.amd ) {\r\n\t\tdefine([], factory(root));\r\n\t} else if ( typeof exports === 'object' ) {\r\n\t\tmodule.exports = factory(root);\r\n\t} else {\r\n\t\troot.PayPlusCheckout = factory(root);\r\n\t}\r\n})(typeof global !== 'undefined' ? global : this.window || this.global, function (root) {\r\n\r\n\t'use strict';\r\n\r\n\tvar $ = jQuery;\r\n\tvar _hasJQuery = ( $ != null );\r\n\r\n\tvar _hasInitialized = false;\r\n\tvar _publicMethods = {};\r\n\r\n\r\n\r\n\t/**\r\n\t * METHODS\r\n\t */\r\n\r\n\r\n\r\n\t// END - COPIED FROM PAYPLUS CHECKOUT.JS\r\n\tfunction closePayplusIframe(force) {\r\n\t\tif ($(\"#pp_iframe\").length && ($(\"#pp_iframe\").is(\":visible\") || force === true)) {\r\n\t\t\t$(\"#pp_iframe\").fadeOut(()=>{\r\n\t\t\t\t$('.payplus-option-description-area').show()\r\n\t\t\t\t// CHANGE: Enable also additional Place Order buttons, and remove `disabled` class\r\n\t\t\t\t$(\"#place_order, .fc-place-order-button\").prop(\"disabled\",false).removeClass( 'disabled' );\r\n\r\n\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n\tfunction  addScriptApple(){\r\n\t\tif(payplus_script_checkout.payplus_import_applepay_script &&\r\n\t\t\tisMyScriptLoaded(payplus_script_checkout.payplus_import_applepay_script) ){\r\n\t\t\tconst script = document.createElement('script');\r\n\t\t\tscript.src =payplus_script_checkout.payplus_import_applepay_script;\r\n\t\t\tdocument.body.append(script);\r\n\t\t}\r\n\t}\r\n\tfunction isMyScriptLoaded(url) {\r\n\t\tvar scripts = document.getElementsByTagName('script');\r\n\t\tfor (var i = scripts.length; i--;) {\r\n\t\t\tif (scripts[i].src == url) return false;\r\n\t\t}\r\n\t\treturn true;\r\n\t}\r\n\tfunction getIframePayment(src,width,height){\r\n\t\tlet iframe = document.createElement('iframe');\r\n\t\tiframe.id=\"pp_iframe\";\r\n\t\tiframe.name='payplus-iframe'\r\n\t\tiframe.src=src;\r\n\t\tiframe.height =height;\r\n\t\tiframe.width =width;\r\n\t\tiframe.setAttribute('style',`border:0px`);\r\n\t\tiframe.setAttribute('allowpaymentrequest','allowpaymentrequest')\r\n\t\treturn iframe;\r\n\t}\r\n\tfunction openPayplusIframe(src) {\r\n\r\n\t\t$('.alertify').remove();\r\n\t\tconst url = new URL(window.location.href);\r\n\t\turl.searchParams.set('payplus-iframe', '1');\r\n\t\twindow.history.pushState({}, '', url);\r\n\t\tconst ppIframe= document.querySelector(\".pp_iframe\");\r\n\t\tconst height =ppIframe.getAttribute('data-height');\r\n\t\tppIframe.innerHTML=\"\";\r\n\t\tppIframe.append(getIframePayment(src,\"100%\",height));\r\n\t\t// CHANGE: Disable also additional Place Order buttons, and add `disabled` class\r\n\t\t$(\"#place_order, .fc-place-order-button\").prop(\"disabled\",true).addClass( 'disabled' );\r\n\r\n\t\tif(payplus_script_checkout.payplus_mobile){\r\n\t\t\t$('html, body').animate({\r\n\t\t\t\tscrollTop: $(\".place-order\").offset().top\r\n\t\t\t});\r\n\t\t}\r\n\t\taddScriptApple();\r\n\r\n\t}\r\n\r\n\tfunction openIframePopup(src, height) {\r\n\t\tlet  windowWidth = window.innerWidth;\r\n\t\t\tif(windowWidth< 568){\r\n\t\t\t\theight =\"100%\";\r\n\t\t\t}\r\n\r\n\t\tif (!alertify.popupIframePaymentPage) {\r\n\t\t\talertify.dialog('popupIframePaymentPage', function factory() {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tmain: function (src) {\r\n\r\n\r\n\t\t\t\t\t\tthis.message = getIframePayment(src,\"100%\",height);\r\n\t\t\t\t\t\taddScriptApple();\r\n\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsetup: function () {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\toptions: {\r\n\t\t\t\t\t\t\t\tautoReset: false,\r\n\t\t\t\t\t\t\t\toverflow: false,\r\n\t\t\t\t\t\t\t\tmaximizable: false,\r\n\t\t\t\t\t\t\t\tmovable: false,\r\n\t\t\t\t\t\t\t\tframeless: true,\r\n\t\t\t\t\t\t\t\ttransition: 'fade',\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfocus: {\r\n\t\t\t\t\t\t\t\telement: 0\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\tprepare: function () {\r\n\t\t\t\t\t\tthis.setContent(this.message);\r\n\t\t\t\t\t},\r\n\r\n\t\t\t\t\thooks: {\r\n\t\t\t\t\t\tonshow: function() {\r\n\t\t\t\t\t\t\tthis.elements.dialog.style.maxWidth = '100%';\r\n\t\t\t\t\t\t\tthis.elements.dialog.style.width = '1050px';\r\n\t\t\t\t\t\t\tthis.elements.dialog.style.height = '100%';\r\n\t\t\t\t\t\t\tthis.elements.content.style.top = '25px';\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\talertify.popupIframePaymentPage(src);\r\n\t}\r\n\t// END - COPIED FROM PAYPLUS CHECKOUT.JS\r\n\r\n\r\n\r\n\t\r\n\t/**\r\n\t * Maybe open the PayPlus iframe on form submit.\r\n\t */\r\n\tvar checkoutFormSubmitHandler = function( _e, result, wc_checkout_form ) {\r\n\t\t// COPIED FROM PAYPLUS CHECKOUT.JS\r\n\t\tif (result.payplus_iframe && 'success' === result.result) {\r\n\t\t\twc_checkout_form.$checkout_form.removeClass( 'processing' ).unblock();\r\n\t\t\tif (result.viewMode == 'samePageIframe') {\r\n\t\t\t\topenPayplusIframe(result.payplus_iframe.data.payment_page_link)\r\n\t\t\t} else if(result.viewMode == 'popupIframe') {\r\n\t\t\t\topenIframePopup(result.payplus_iframe.data.payment_page_link,700)\r\n\t\t\t}\r\n\r\n\t\t\t// CHANGED: Need to return `false` here to let Fluid Checkout exit the function at the expected point,\r\n\t\t\t// as returning `true` means the code should continue running.\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t// END - COPIED FROM PAYPLUS CHECKOUT.JS\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Initialize component and set related handlers.\r\n\t */\r\n\t_publicMethods.init = function() {\r\n\t\tif ( _hasInitialized ) return;\r\n\r\n\t\tif ( _hasJQuery ) {\r\n\t\t\t// Payment method change event\r\n\t\t\t// Originally the event `change` is not used by the PayPlus Checkout plugin,\r\n\t\t\t// but it's added here to ensure the function is called when the payment method is changed.\r\n\t\t\t$( document.body ).on( 'click change', 'input[name=\"payment_method\"]', closePayplusIframe );\r\n\r\n\t\t\t// Place order event handler\r\n\t\t\t$( document.body ).on( 'fc_checkout_request_place_order_success', checkoutFormSubmitHandler );\r\n\r\n\t\t\t// COPIED FROM PAYPLUS CHECKOUT.JS\r\n\t\t\t// Adapted to use ES5 function syntax\r\n\t\t\t$( window ).on( \"popstate\", function() {\r\n\t\t\t\tclosePayplusIframe( false );\r\n\t\t\t} );\r\n\t\t\t// END - COPIED FROM PAYPLUS CHECKOUT.JS\r\n\r\n\t\t\t_hasInitialized = true;\r\n\t\t}\r\n\t};\r\n\r\n\r\n\t\r\n\t//\r\n\t// Public APIs\r\n\t//\r\n\treturn _publicMethods;\r\n\r\n});\r\n"],"names":["root","factory","define","amd","exports","module","PayPlusCheckout","global","this","window","$","jQuery","_hasJQuery","_hasInitialized","_publicMethods","closePayplusIframe","force","length","is","fadeOut","show","prop","removeClass","addScriptApple","script","payplus_script_checkout","payplus_import_applepay_script","url","scripts","document","getElementsByTagName","i","src","createElement","body","append","getIframePayment","width","height","let","iframe","id","name","setAttribute","checkoutFormSubmitHandler","_e","result","wc_checkout_form","payplus_iframe","$checkout_form","unblock","viewMode","data","payment_page_link","remove","URL","location","href","searchParams","set","history","pushState","ppIframe","querySelector","getAttribute","innerHTML","addClass","payplus_mobile","animate","scrollTop","offset","top","innerWidth","alertify","popupIframePaymentPage","dialog","main","message","setup","options","autoReset","overflow","maximizable","movable","frameless","transition","focus","element","prepare","setContent","hooks","onshow","elements","style","maxWidth","content","init","on"],"mappings":"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"}