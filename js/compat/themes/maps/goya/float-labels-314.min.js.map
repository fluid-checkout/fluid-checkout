{"version":3,"file":"../../goya/float-labels-314.min.js","sources":["goya/float-labels-314.js"],"sourcesContent":["/**\n * Rebuild floating labels for Goya theme.\n *\n * DEPENDS ON:\n * - jQuery // Interact with WooCommerce events\n */\n(function (root, factory) {\n\tif ( typeof define === 'function' && define.amd ) {\n\t\tdefine([], factory(root));\n\t} else if ( typeof exports === 'object' ) {\n\t\tmodule.exports = factory(root);\n\t} else {\n\t\troot.GoyaFloatLabels = factory(root);\n\t}\n})(typeof global !== 'undefined' ? global : this.window || this.global, function (root) {\n\n\t'use strict';\n\n\tvar $ = jQuery;\n\tvar _hasJQuery = ( $ != null );\n\n\tvar _hasInitialized = false;\n\tvar _publicMethods = {};\n\n\n\n\t/**\n\t * METHODS\n\t */\n\n\n\n\t/**\n\t * Maybe rebuild floating labels component.\n\t */\n\tvar maybeRebuildFloatLabels = function() {\n\t\tvar self = this,\n\t\t\t\twpFormsEl = '.form-row input[type=text], .form-row input[type=password], .form-row input[type=email], .form-row input[type=number], .form-row input[type=tel], .form-row input[type=date], .form-row textarea, .form-row select, .comment-form textarea, .comment-form input[type=text], .comment-form input[type=password], .comment-form input[type=email]';\n\t\t\n\t\t$(wpFormsEl).each(function() {\n\n\t\t\t/// Skip some inputs\n\t\t\tif ( $(this).attr(\"id\") == 'rating' || ( $(this).parents('form.cart').length && !$(this).hasClass('wc-pao-addon-field') ) || $(this).parents('.woocommerce-checkout-payment').length )\n\t\t\t\treturn false;\n\n\t\t\t// Add form-row if not exist\n\t\t\tif (! $(this).parent().hasClass('form-row') && ! $(this).parents().hasClass('woocommerce-input-wrapper') ) {\n\t\t\t\t$(this).parent().addClass('form-row');\n\t\t\t}\n\n\t\t\t$(this).parents('.form-row').addClass('float-label');\n\n\t\t\tvar $placeholder = $(this).attr('placeholder'),\n\t\t\t\t\t$label = $(this).parents('.form-row').find('label'),\n\t\t\t\t\t$val = $(this).val();\n\n\t\t\t$placeholder = (typeof $placeholder === 'undefined' || $placeholder === false) ? '' : $placeholder;\n\n\t\t\t// WC Add-ons plugin\n\t\t\tif ($(this).hasClass('wc-pao-addon-field')) {\n\n\t\t\t\tif ($(this).hasClass('wc-pao-addon-image-swatch-select')) return;\n\n\t\t\t\t$label = $(this).parent('.form-row').siblings('label.wc-pao-addon-name');\n\t\t\t\tif ($label.length) {\n\t\t\t\t\t$label.insertAfter($(this));\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t$(this).insertBefore($label);\n\n\t\t\t\tif(! $label.length && $placeholder != '') {\n\t\t\t\t\t$(this).after('<label for=\"'+$(this).attr('name')+'\" class=\"fl-label\">'+ $placeholder+'</label>');\n\t\t\t\t} else {\n\t\t\t\t\t$label.addClass('fl-label');\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Always floating for select boxes\n\t\t\tif ($val || $(this).is('select')) { $(this).parent('.form-row').addClass('has-val'); }\n\n\t\t});\n\n\t\t// Open select2 elements\n\t\t// CHANGE: Get reference to body element directly\n\t\t$( document.body ).on( 'click', '.fl-label', function() {\n\t\t\t$(this).parent().find('.select2-hidden-accessible').select2('open');\n\t\t});\n\n\t\t// CHANGE: Get reference to body element directly\n\t\t$( document.body ).on( 'blur change', wpFormsEl, function() {\n\t\t\tvar $val = $(this).val();\n\n\t\t\tvalidateFields($(this));\n\n\t\t\t// Check for autofilled fields in checkout\n\t\t\tif ($(this).closest('form').hasClass('checkout')) {\n\t\t\t\tvalidateFields( $('.checkout .form-row input[type=text]'));\n\t\t\t}\n\n\t\t});\n\t\n\t\tfunction validateFields (element) {\n\t\t\telement.each(function() {\n\t\t\t\tvar $val = $(this).val();\n\n\t\t\t\tif ($val || $(this).is('select')) { \n\t\t\t\t\t$(this).parent('.form-row').addClass('has-val'); \n\t\t\t\t} else {\n\t\t\t\t\t$(this).parent('.form-row').removeClass('has-val');\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t// CHANGE: Remove handling of NinjaForms as these are not supposed to be used on the checkout page\n\n\t\t// CHANGE: Get reference to body element directly\n\t\t$( document.body ).on( 'updated_cart_totals', function(){\n\t\t\tjQuery('input#coupon_code').each(function() {\n\t\t\t\t$(this).parents('.form-row').addClass('deplace');\n\t\t\t\tvar $label = $(this).parents('.form-row').find('label');\n\t\t\t\t$(this).insertBefore($label);\n\t\t\t\tvar $val = $(this).val();\n\t\t\t\tif ($val) { $(this).parent('.form-row').addClass('has-val'); }\n\t\t\t});\n\t\t});\n\t}\n\n\n\n\t/**\n\t * Initialize component and set related handlers.\n\t */\n\t_publicMethods.init = function( options ) {\n\t\tif ( _hasInitialized ) return;\n\n\t\tif ( _hasJQuery ) {\n\t\t\t// Rebuild on updates\n\t\t\t// CHANGE: Get reference to body element directly\n\t\t\t$( document.body ).on( 'init_checkout updated_checkout', maybeRebuildFloatLabels );\n\t\t}\n\n\t\t// Rebuild on initialization\n\t\tsetTimeout( maybeRebuildFloatLabels, 100 );\n\t\tsetTimeout( maybeRebuildFloatLabels, 500 );\n\t\tsetTimeout( maybeRebuildFloatLabels, 1000 );\n\n\t\t_hasInitialized = true;\n\t};\n\n\n\n\t//\n\t// Public APIs\n\t//\n\treturn _publicMethods;\n\n});\n"],"names":["root","factory","define","amd","exports","module","GoyaFloatLabels","global","this","window","maybeRebuildFloatLabels","wpFormsEl","validateFields","element","each","$","val","is","parent","addClass","removeClass","attr","parents","length","hasClass","$placeholder","$label","find","$val","siblings","insertAfter","insertBefore","after","document","body","on","select2","closest","jQuery","_hasJQuery","_hasInitialized","_publicMethods","init","options","setTimeout"],"mappings":"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"}