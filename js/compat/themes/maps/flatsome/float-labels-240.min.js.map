{"version":3,"file":"../../flatsome/float-labels-240.min.js","sources":["flatsome/float-labels-240.js"],"sourcesContent":["/**\n * Rebuild floating labels for Flatsome theme.\n *\n * DEPENDS ON:\n * - jQuery // Interact with WooCommerce events\n */\n(function (root, factory) {\n\tif ( typeof define === 'function' && define.amd ) {\n\t\tdefine([], factory(root));\n\t} else if ( typeof exports === 'object' ) {\n\t\tmodule.exports = factory(root);\n\t} else {\n\t\troot.FlatsomeFloatLabels = factory(root);\n\t}\n})(typeof global !== 'undefined' ? global : this.window || this.global, function (root) {\n\n\t'use strict';\n\n\tvar $ = jQuery;\n\tvar _hasJQuery = ( $ != null );\n\n\tvar _hasInitialized = false;\n\tvar _publicMethods = {};\n\n\n\n\t/**\n\t * METHODS\n\t */\n\n\n\n\t/**\n\t * Maybe rebuild floating labels component.\n\t */\n\tvar maybeRebuildFloatLabels = function() {\n\t\t// Add jQuery event listeners\n\t\tif ( window.floatlabels && typeof floatlabels.rebuild === 'function' ) {\n\t\t\t// Get current focused element\n\t\t\tvar currentFocusedElement = document.activeElement;\n\t\t\tvar value = currentFocusedElement.value;\n\t\t\t\n\t\t\t// Rebuild floating labels\n\t\t\tfloatlabels.rebuild();\n\t\t\t\n\t\t\t// Re-focus element\n\t\t\tmaybe_refocus_element( currentFocusedElement, value );\n\t\t}\n\t}\n\n\t/**\n\t * Re-focus and keep value of the element that was previously focused.\n\t */\n\tvar maybe_refocus_element = function( currentFocusedElement, currentValue ) {\n\t\t// Bail if no element to focus\n\t\tif ( null === currentFocusedElement ) { return; }\n\n\t\trequestAnimationFrame( function() {\n\t\t\tvar elementToFocus;\n\n\t\t\t// Try findind the `select2` focusable element\n\t\t\tif ( currentFocusedElement.matches( '.fc-select2-field' ) ) {\n\t\t\t\telementToFocus = document.querySelector( '.form-row[id=\"' + currentFocusedElement.id + '\"] .select2-selection' );\n\t\t\t}\n\t\t\t// Try findind the the current focused element after updating updated element by ID\n\t\t\telse if ( currentFocusedElement.id ) {\n\t\t\t\telementToFocus = document.getElementById( currentFocusedElement.id );\n\t\t\t}\n\t\t\t// Try findind the updated element by classes\n\t\t\telse if ( currentFocusedElement.getAttribute( 'name' ) ) {\n\t\t\t\tvar nameAttr = currentFocusedElement.getAttribute( 'name' );\n\t\t\t\telementToFocus = document.querySelector( '[name=\"'+nameAttr+'\"]' );\n\t\t\t}\n\n\t\t\t// Try setting focus if element is found\n\t\t\tif ( elementToFocus && elementToFocus !== document.activeElement ) {\n\t\t\t\telementToFocus.focus();\n\n\t\t\t\t// Set keyboard track position back to that previously to update\n\t\t\t\tsetTimeout( function(){\n\t\t\t\t\t// Try to set the same track position\n\t\t\t\t\tif( null !== elementToFocus.selectionStart && null !== elementToFocus.selectionEnd ) {\n\t\t\t\t\t\tif ( currentFocusedElement.selectionStart && currentFocusedElement.selectionEnd ) {\n\t\t\t\t\t\t\telementToFocus.selectionStart = currentFocusedElement.selectionStart;\n\t\t\t\t\t\t\telementToFocus.selectionEnd = currentFocusedElement.selectionEnd;\n\t\t\t\t\t\t}\n\t\t\t\t\t\t// Otherwise try set the track position to the end of the field\n\t\t\t\t\t\t// @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\n\t\t\t\t\t\t// @see https://html.spec.whatwg.org/multipage/input.html#concept-input-apply\n\t\t\t\t\t\telse {\n\t\t\t\t\t\t\telementToFocus.selectionStart = elementToFocus.selectionEnd = Number.MAX_SAFE_INTEGER || 10000;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}, 0 );\n\t\t\t}\n\t\t} );\n\t}\n\n\n\n\t/**\n\t * Initialize component and set related handlers.\n\t */\n\t_publicMethods.init = function( options ) {\n\t\tif ( _hasInitialized ) return;\n\n\t\tif ( _hasJQuery ) {\n\t\t\t// Rebuild on updates\n\t\t\t$( document.body ).on( 'init_checkout updated_checkout', maybeRebuildFloatLabels );\n\t\t}\n\n\t\t// Rebuild on initialization\n\t\tsetTimeout( maybeRebuildFloatLabels, 100 );\n\n\t\t_hasInitialized = true;\n\t};\n\n\n\n\t//\n\t// Public APIs\n\t//\n\treturn _publicMethods;\n\n});\n"],"names":["root","factory","define","amd","exports","module","FlatsomeFloatLabels","global","this","window","maybeRebuildFloatLabels","currentFocusedElement","floatlabels","rebuild","document","activeElement","value","requestAnimationFrame","nameAttr","elementToFocus","matches","querySelector","id","getElementById","getAttribute","focus","setTimeout","selectionStart","selectionEnd","Number","MAX_SAFE_INTEGER","$","jQuery","_hasJQuery","_hasInitialized","_publicMethods","init","options","body","on"],"mappings":"CAMA,SAAWA,EAAMC,GACO,mBAAXC,QAAyBA,OAAOC,IAC3CD,OAAO,GAAID,KACmB,iBAAZG,QAClBC,OAAOD,QAAUH,IAEjBD,EAAKM,oBAAsBL,IAN7B,CAQqB,oBAAXM,OAAyBA,OAASC,KAAKC,QAAUD,KAAKD,OAAQ,SAAUP,gBAqBnD,SAA1BU,IAEH,IAEKC,EAcgCA,EAhBhCF,OAAOG,aAA8C,mBAAxBA,YAAYC,WAEzCF,EAAwBG,SAASC,eACHC,MAGlCJ,YAAYC,UAYR,QAFgCF,EAPbA,IAWxBM,sBAAuB,WACtB,IAYKC,EACJC,EAVIR,EAAsBS,QAAS,qBACnCD,EAAiBL,SAASO,cAAe,iBAAmBV,EAAsBW,GAAK,yBAG9EX,EAAsBW,GAC/BH,EAAiBL,SAASS,eAAgBZ,EAAsBW,IAGvDX,EAAsBa,aAAc,UACzCN,EAAWP,EAAsBa,aAAc,QACnDL,EAAiBL,SAASO,cAAe,UAAUH,EAAS,OAIxDC,GAAkBA,IAAmBL,SAASC,gBAClDI,EAAeM,QAGfC,WAAY,WAEP,OAASP,EAAeQ,gBAAkB,OAASR,EAAeS,eAChEjB,EAAsBgB,gBAAkBhB,EAAsBiB,cAClET,EAAeQ,eAAiBhB,EAAsBgB,eACtDR,EAAeS,aAAejB,EAAsBiB,cAMpDT,EAAeQ,eAAiBR,EAAeS,aAAeC,OAAOC,kBAAoB,MAGzF,OA3EN,IAAIC,EAAIC,OACJC,EAAoB,MAALF,EAEfG,GAAkB,EAClBC,EAAiB,GAoGrB,OAnBAA,EAAeC,KAAO,SAAUC,GAC1BH,IAEAD,GAEJF,EAAGjB,SAASwB,MAAOC,GAAI,iCAAkC7B,GAI1DgB,WAAYhB,EAAyB,KAErCwB,GAAkB,IAQZC"}