{"version":3,"file":"../../flatsome/float-labels-313.min.js","sources":["flatsome/float-labels-313.js"],"sourcesContent":["/**\r\n * Rebuild floating labels for Flatsome theme.\r\n *\r\n * DEPENDS ON:\r\n * - jQuery // Interact with WooCommerce events\r\n */\r\n(function (root, factory) {\r\n\tif ( typeof define === 'function' && define.amd ) {\r\n\t\tdefine([], factory(root));\r\n\t} else if ( typeof exports === 'object' ) {\r\n\t\tmodule.exports = factory(root);\r\n\t} else {\r\n\t\troot.FlatsomeFloatLabels = factory(root);\r\n\t}\r\n})(typeof global !== 'undefined' ? global : this.window || this.global, function (root) {\r\n\r\n\t'use strict';\r\n\r\n\tvar $ = jQuery;\r\n\tvar _hasJQuery = ( $ != null );\r\n\r\n\tvar _hasInitialized = false;\r\n\tvar _publicMethods = {};\r\n\r\n\r\n\r\n\t/**\r\n\t * METHODS\r\n\t */\r\n\r\n\r\n\r\n\t/**\r\n\t * Maybe rebuild floating labels component.\r\n\t */\r\n\tvar maybeRebuildFloatLabels = function() {\r\n\t\t// Add jQuery event listeners\r\n\t\tif ( window.floatlabels && typeof floatlabels.rebuild === 'function' ) {\r\n\t\t\t// Get current focused element\r\n\t\t\tvar currentFocusedElement = document.activeElement;\r\n\t\t\tvar value = currentFocusedElement.value;\r\n\t\t\t\r\n\t\t\t// Rebuild floating labels\r\n\t\t\tfloatlabels.rebuild();\r\n\t\t\t\r\n\t\t\t// Re-focus element\r\n\t\t\tmaybe_refocus_element( currentFocusedElement, value );\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Re-focus and keep value of the element that was previously focused.\r\n\t */\r\n\tvar maybe_refocus_element = function( currentFocusedElement, currentValue ) {\r\n\t\t// Bail if no element to focus\r\n\t\tif ( null === currentFocusedElement ) { return; }\r\n\r\n\t\trequestAnimationFrame( function() {\r\n\t\t\tvar elementToFocus;\r\n\r\n\t\t\t// Try findind the `select2` focusable element\r\n\t\t\tif ( currentFocusedElement.matches( '.fc-select2-field' ) ) {\r\n\t\t\t\telementToFocus = document.querySelector( '.form-row[id=\"' + currentFocusedElement.id + '\"] .select2-selection' );\r\n\t\t\t}\r\n\t\t\t// Try findind the the current focused element after updating updated element by ID\r\n\t\t\telse if ( currentFocusedElement.id ) {\r\n\t\t\t\telementToFocus = document.getElementById( currentFocusedElement.id );\r\n\t\t\t}\r\n\t\t\t// Try findind the updated element by classes\r\n\t\t\telse if ( currentFocusedElement.getAttribute( 'name' ) ) {\r\n\t\t\t\tvar nameAttr = currentFocusedElement.getAttribute( 'name' );\r\n\t\t\t\telementToFocus = document.querySelector( '[name=\"'+nameAttr+'\"]' );\r\n\t\t\t}\r\n\r\n\t\t\t// Try setting focus if element is found\r\n\t\t\tif ( elementToFocus && elementToFocus !== document.activeElement ) {\r\n\t\t\t\telementToFocus.focus();\r\n\r\n\t\t\t\t// Set keyboard track position back to that previously to update\r\n\t\t\t\tsetTimeout( function(){\r\n\t\t\t\t\t// Try to set the same track position\r\n\t\t\t\t\tif( null !== elementToFocus.selectionStart && null !== elementToFocus.selectionEnd ) {\r\n\t\t\t\t\t\tif ( currentFocusedElement.selectionStart && currentFocusedElement.selectionEnd ) {\r\n\t\t\t\t\t\t\telementToFocus.selectionStart = currentFocusedElement.selectionStart;\r\n\t\t\t\t\t\t\telementToFocus.selectionEnd = currentFocusedElement.selectionEnd;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Otherwise try set the track position to the end of the field\r\n\t\t\t\t\t\t// @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLInputElement/setSelectionRange\r\n\t\t\t\t\t\t// @see https://html.spec.whatwg.org/multipage/input.html#concept-input-apply\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\telementToFocus.selectionStart = elementToFocus.selectionEnd = Number.MAX_SAFE_INTEGER || 10000;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}, 0 );\r\n\t\t\t}\r\n\t\t} );\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Initialize component and set related handlers.\r\n\t */\r\n\t_publicMethods.init = function( options ) {\r\n\t\tif ( _hasInitialized ) return;\r\n\r\n\t\tif ( _hasJQuery ) {\r\n\t\t\t// Rebuild on updates\r\n\t\t\t$( document.body ).on( 'init_checkout updated_checkout', maybeRebuildFloatLabels );\r\n\t\t}\r\n\r\n\t\t// Rebuild on initialization\r\n\t\tsetTimeout( maybeRebuildFloatLabels, 100 );\r\n\r\n\t\t_hasInitialized = true;\r\n\t};\r\n\r\n\r\n\r\n\t//\r\n\t// Public APIs\r\n\t//\r\n\treturn _publicMethods;\r\n\r\n});\r\n"],"names":["root","factory","define","amd","exports","module","FlatsomeFloatLabels","global","this","window","maybeRebuildFloatLabels","currentFocusedElement","floatlabels","rebuild","document","activeElement","value","requestAnimationFrame","nameAttr","elementToFocus","matches","querySelector","id","getElementById","getAttribute","focus","setTimeout","selectionStart","selectionEnd","Number","MAX_SAFE_INTEGER","$","jQuery","_hasJQuery","_hasInitialized","_publicMethods","init","options","body","on"],"mappings":"AAMA,CAAA,SAAWA,EAAMC,GACO,YAAlB,OAAOC,QAAyBA,OAAOC,IAC3CD,OAAO,GAAID,EAAY,CAAC,EACM,UAAnB,OAAOG,QAClBC,OAAOD,QAAUH,EAAY,EAE7BD,EAAKM,oBAAsBL,EAAY,CAExC,EAAoB,aAAlB,OAAOM,OAAyBA,OAASC,KAAKC,QAAUD,KAAKD,OAAQ,SAAUP,GAEjF,aAmB8B,SAA1BU,IAEH,IAEKC,EAcgCA,EAhBhCF,OAAOG,aAA8C,YAA/B,OAAOA,YAAYC,WAEzCF,EAAwBG,SAASC,eACHC,MAGlCJ,YAAYC,QAAQ,EAYhB,QAFgCF,EAPbA,KAWxBM,sBAAuB,WACtB,IAYKC,EACJC,EAVIR,EAAsBS,QAAS,mBAAoB,EACvDD,EAAiBL,SAASO,cAAe,iBAAmBV,EAAsBW,GAAK,uBAAwB,EAGtGX,EAAsBW,GAC/BH,EAAiBL,SAASS,eAAgBZ,EAAsBW,EAAG,EAG1DX,EAAsBa,aAAc,MAAO,IAChDN,EAAWP,EAAsBa,aAAc,MAAO,EAC1DL,EAAiBL,SAASO,cAAe,UAAUH,EAAS,IAAK,GAI7DC,GAAkBA,IAAmBL,SAASC,gBAClDI,EAAeM,MAAM,EAGrBC,WAAY,WAEP,OAASP,EAAeQ,gBAAkB,OAASR,EAAeS,eAChEjB,EAAsBgB,gBAAkBhB,EAAsBiB,cAClET,EAAeQ,eAAiBhB,EAAsBgB,eACtDR,EAAeS,aAAejB,EAAsBiB,cAMpDT,EAAeQ,eAAiBR,EAAeS,aAAeC,OAAOC,kBAAoB,IAG5F,EAAG,CAAE,EAEP,CAAE,CA/CH,CA9BA,IAAIC,EAAIC,OACJC,EAAoB,MAALF,EAEfG,EAAkB,CAAA,EAClBC,EAAiB,GAoGrB,OAnBAA,EAAeC,KAAO,SAAUC,GAC1BH,IAEAD,GAEJF,EAAGjB,SAASwB,IAAK,EAAEC,GAAI,iCAAkC7B,CAAwB,EAIlFgB,WAAYhB,EAAyB,GAAI,EAEzCwB,EAAkB,CAAA,EACnB,EAOOC,CAER,CAAC"}