((e,t)=>{"function"==typeof define&&define.amd?define([],t()):"object"==typeof exports?module.exports=t():e.CheckoutValidation=t()})("undefined"!=typeof global?global:this.window||this.global,function(e){function u(e){return!(!e||!C.alwaysValidateFieldsSelector||!e.matches(C.alwaysValidateFieldsSelector))}function t(e,t,i){return!!t.matches(C.typeRequiredSelector)}function i(e,t,i){return m.hasValue(e)?{valid:!0}:{valid:!1,message:C.validationMessages.required}}function a(e,t,i){return!!t.matches(C.typeEmailSelector)}function r(e,t,i){return!m.hasValue(e)||new RegExp(/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.?$/i).test(e.value)?{valid:!0}:{valid:!1,message:C.validationMessages.email}}function l(e,t,i){return!!e.matches(C.typeConfirmationSelector)}function n(e,t,i){return m.hasValue(e)?(t=(t=t.closest("form"))?t.querySelector(e.getAttribute("data-confirm-with")):null)&&e.value!=t.value?{valid:!1,message:C.validationMessages.confirmation}:{valid:!0}:{valid:!1}}function o(e,t,i){return!!t.matches(C.typeShippingMethodSelector)}function s(e,t,i){return t.querySelector('input[type="radio"]:checked')?{valid:!0}:{valid:!1,message:C.validationMessages.required}}function d(e,t,i){for(var a,r,l=!0,n=!1,o=!1,s=Object.getOwnPropertyNames(i),u=0;u<s.length;u++){for(var d=s[u],c=b[d],F=i[d].valid,p=i[d].message,f=c.invalidClass,v=(t.classList.remove(C.invalidClass+"-"+c.invalidClass),y=S=g=h=m=v=void 0,e),m=f,h=t.querySelectorAll("span."+C.errorMessageClass+".invalid-"+m),g=0;g<h.length;g++){var y,S=h[g].id;S&&(y=(y=v.getAttribute("aria-describedby"))||"",v.setAttribute("aria-describedby",y.replace(" "+S,""))),h[g].parentNode.removeChild(h[g])}!0!==F&&(m=d,C.nonObtrusivePhoneValidation&&"phone"===m?n=!0:o=!0,l=!1,null!==F)&&(d=t,m=p,F=f,r=f=p=void 0,(a=e)&&m&&0!=m.length&&(d=(a.closest(C.inputWrapperSelector)||d).querySelector(C.referenceNodeSelector),V(a)&&(p=a.parentNode.querySelector(C.select2WrapperSelector))&&(d=p),w(a)&&(p=a.parentNode.querySelector(C.selectTomWrapperSelector))&&(d=p),p=(d=A(a)&&(p=a.closest(C.inputWrapperSelector))?p.lastChild:d).parentNode,f=a.id+"-invalid-"+F,(r=document.createElement("span")).className=C.errorMessageClass+" invalid-"+F,r.id=f,r.innerText=m,p.insertBefore(r,d.nextSibling),F=a.getAttribute("aria-describedby"),a.setAttribute("aria-describedby",(F=F||"")+" "+f)),t.classList.add(C.invalidClass+"-"+c.invalidClass))}var x=C.nonObtrusivePhoneValidation&&n&&!o;return D=x,t.classList.toggle(C.validClass,l),t.classList.toggle(C.invalidClass,!l),e.setAttribute("aria-invalid",!l),l}function c(e,t,i){f&&p(i).toArray().forEach(function(e){Array.from(e.querySelectorAll(C.clearValidationCountryChangedSelector)).forEach(function(e){var t;""==e.value&&(t=e.closest(C.formRowSelector),m.clearValidationResults(e,t))})})}function F(e){var t,i;!0!==window.processing_checkout_update&&(t=e.target,i=e.target.closest(C.formRowSelector),t)&&i&&(V(e.target)&&i&&(t=i.querySelector("select")),"input"!==e.type||i.classList.contains(C.validClass)||i.classList.contains(C.invalidClass)?m.validateField(t,e.type):m.validateFieldDebounced(t,e.type))}var p=jQuery,f=null!=p,v=!1,m={},b={},C={bodyClass:"fc-checkout-validation--active",formSelector:"form.checkout",formRowSelector:".form-row, .shipping-method__package",inputWrapperSelector:".woocommerce-input-wrapper, .form-row",validateFieldsSelector:'.input-text, .input-checkbox, input[type="date"], select, .shipping-method__options',referenceNodeSelector:'.input-text, .input-checkbox, input[type="date"], select, .shipping-method__options',clearValidationCountryChangedSelector:"#state, #shipping_state, #billing_state",alwaysValidateFieldsSelector:"",select2Selector:".select2, .select2-hidden-accessible",select2WrapperSelector:".select2-container",selectTomSelector:".ts-hidden-accessible",selectTomWrapperSelector:".ts-wrapper",typeRequiredSelector:".validate-required",typeEmailSelector:".validate-email",typeConfirmationSelector:"[data-confirm-with]",typeShippingMethodSelector:".shipping-method__package",validClass:"woocommerce-validated",invalidClass:"woocommerce-invalid",errorMessageClass:"fc-inline-error",validationMessages:{required:"This is a required field.",email:"This is not a valid email address.",confirmation:"This field does not match the related field value."},nonObtrusivePhoneValidation:!1},h=!1,D=!1,V=function(e){return!!e.closest(C.select2Selector)},w=function(e){return!!e.closest(C.selectTomSelector)},A=function(e){return!!e.matches('input[type="checkbox"]')};m.hasValue=function(e){return e.matches("select")?!!(e.options&&-1<e.selectedIndex&&""!=e.options[e.selectedIndex].value):A(e)?e.checked:""!=e.value};return m.clearValidationResults=function(e,t){if(e&&t){for(var i=Object.keys(b),a=0;a<i.length;a++){var r=i[a];t.classList.remove(C.invalidClass+"-"+r),t.classList.remove(C.invalidClass+"-"+r+"-field")}t.classList.remove(C.validClass),t.classList.remove(C.invalidClass)}},m.validateField=function(e,t,i){if(!e)return!0;var a={},r=(e=>{if(e)return e.closest(C.formRowSelector)})(e);if(!r)return!0;if(!u(e)&&!0!==i&&null===e.offsetParent)return!0;if(!((e,t,i)=>{if(u(e))return!0;for(var a=Object.getOwnPropertyNames(b),r=0;r<a.length;r++){var l=a[r];if(b[l].needsValidation(e,t,i))return!0}return!1})(e,r,t))return!0;for(var l=Object.getOwnPropertyNames(b),n=0;n<l.length;n++){var o=l[n],s=b[o];s.needsValidation(e,r,t)&&(a[o]=s.validate(e,r,t))}return d(e,r,a)},m.validateFieldDebounced=FCUtils.debounce(m.validateField,1e3),m.validateAllFields=function(e,t){for(var i=!0,a=!1,r=!0,l=(e=e||document.querySelector(C.formSelector)).querySelectorAll(C.validateFieldsSelector),n=0;n<l.length;n++)m.validateField(l[n],"validate-all",t)||(a=!(i=!1),m.wasLastFieldValidationOnlyNonObtrusive())||(r=!1);return h=a&&r,i},m.hasOnlyNonObtrusivePhoneValidationErrors=function(){return h},m.wasLastFieldValidationOnlyNonObtrusive=function(){return D},m.registerValidationType=function(e,t,i,a){return!!b&&"string"==typeof e&&"string"==typeof t&&i instanceof Function&&a instanceof Function&&(b.hasOwnProperty(e)?(console.log('Validation type "'+e+'" already registered.'),!1):(b[e]={invalidClass:t,needsValidation:i,validate:a},!0))},m.getValidationTypes=function(){return b},m.init=function(e){v||(C=FCUtils.extendObject(C,e),m.registerValidationType("required","required-field",t,i),m.registerValidationType("email","email",a,r),m.registerValidationType("confirmation","confirmation-field",l,n),m.registerValidationType("shipping-method","shipping-method-field",o,s),f&&(p(C.formSelector).on("input validate change",C.validateFieldsSelector,F),p(document).on("load_ajax_content_done",m.init),p(document).on("country_to_state_changed",c)),document.body.classList.add(C.bodyClass),v=!0)},m});