!function(e,t){"function"==typeof define&&define.amd?define([],t()):"object"==typeof exports?module.exports=t():e.FCEnhancedSelect=t()}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";function i(e){for(var t,o=[],l=e&&e.options,n=0;n<l.length;n++)(t=l[n]).selected&&o.push(t.value||t.text);return o=1===o.length?o[0]:o}function t(e){var t;(e=e.target).matches(f.selectFieldSelector)&&e.tomselect&&(t=i(e),e.tomselect.setValue(t,!0))}function r(){this.focus_node.setAttribute("autocomplete","off-"+Date.now())}function u(){var e;FCUtils.isCurrentBreakpointOrSmaller("phablet")&&(e=this.focus_node.closest(f.formRowSelector))&&FCUtils.scrollToElement(e,null,30)}function o(e){e.target.closest(f.inputFieldSelector)&&(e=e.target.closest(f.formRowSelector).querySelector("select"),a(e))}function l(e){e.target.closest(f.inputFieldSelector)&&(e=e.target.closest(f.formRowSelector).querySelector("select"),m(e))}function n(e){var t,o;e.target.closest(f.controlElementSelector)&&(e=e.target.closest(f.formRowSelector).querySelector("select"),t=e)&&t.tomselect&&(o=t.tomselect.isOpen,requestAnimationFrame(function(){(o?m:a)(t)}))}var c=jQuery,s=!1,d={},f={bodyClass:"has-fc-enhanced-select",formRowSelector:".form-row.fc-select2-field",selectFieldSelector:".fc-select2-field select",controlElementSelector:".ts-control",inputFieldSelector:".fc-select2-field .ts-control > input",fieldSettings:{create:!1,diacritics:!0,openOnFocus:!1},fieldPluginsSingle:[],fieldPluginsMulti:["remove_button"]},a=(null!=c&&(c.fn.select2=function(){return this},c.fn.selectWoo=function(){return this}),function(e){e&&e.tomselect&&!(e=e.tomselect).isOpen&&e.open()}),m=function(e){e&&e.tomselect&&(e=e.tomselect).isOpen&&e.close()};d.enhanceFields=function(e,t){if("undefined"!=typeof TomSelect&&"string"==typeof(e=null==e?f.selectFieldSelector:e)){var o;null==t&&(t=f.fieldSettings);try{o=document.querySelectorAll(e)}catch(e){return void console.warn("Enhanced select: "+e.message)}for(var l=0;l<o.length;l++){var n=o[l],c=i(n),s=n.hasAttribute("multiple"),s=(n.tomselect&&n.tomselect.destroy(),t.plugins=s?f.fieldPluginsMulti:f.fieldPluginsSingle,new TomSelect(n,t));s.setValue(c,!0),s.on("focus",r),s.on("blur",r),s.on("dropdown_open",u)}}};return d.init=function(e){s||(f=FCUtils.extendObject(f,e),document.addEventListener("click",n,!0),document.addEventListener("change",t,!0),document.addEventListener("focus",o,!0),document.addEventListener("blur",l,!0),d.enhanceFields(),document.body.classList.add(f.bodyClass),s=!0)},d});
//# sourceMappingURL=maps/fc-enhanced-select-315-beta-10.min.js.map
