jQuery(function(g){if("undefined"==typeof wc_checkout_params)return!1;var f=!(window.can_update_checkout=!0),k={checkoutFormSelector:"form.checkout",orderPayFormSelector:"#order_review",formRowSelector:".form-row",checkoutPlaceOrderSelector:"#place_order, .fc-place-order-button",checkoutTermsSelector:".fc-terms-checkbox",checkoutUpdateFieldsSelector:".address-field input.input-text, .update_totals_on_change input.input-text",checkoutLoadingInputSelector:".loading_indicator_on_change input.input-text",focusedFieldSkipFragmentReplaceSelector:'input[type="text"], input[type="color"], input[type="date"], input[type="datetime"], input[type="datetime-local"], input[type="email"], input[type="file"], input[type="image"], input[type="month"], input[type="number"], input[type="password"], input[type="search"], input[type="tel"], input[type="time"], input[type="url"], input[type="week"], select, textarea, .fc-select2-field',phoneFieldSelector:'input[type="tel"], [data-phone-field], input.js-phone-field, .js-phone-field input',loginButtonSelector:".fc-contact-login__action",emailFieldSelector:'form.woocommerce-checkout input[name="billing_email"]',usernameFieldSelector:'.fc-login-form__inner input[name="username"]',sameAsCheckboxSelector:"#billing_same_as_shipping, #shipping_same_as_billing",sameAsCheckboxAvailableSelector:"#billing_same_as_shipping_available, #shipping_same_as_billing_available",addressFieldsSectionSelector:".woocommerce-billing-fields, .woocommerce-shipping-fields",addressFieldsSectionSelectorTemplate:".woocommerce-###FIELD_GROUP###-fields",addressFieldsWrapperSelector:"#woocommerce-billing-fields__field-wrapper, #woocommerce-shipping-fields__field-wrapper",addressFieldsToMirrorSelector:"select, input, textarea",loadingClass:"fc-loading",checkoutBlockUISelector:".woocommerce-checkout-payment, .fc-shipping-method__packages",checkoutPlaceOrderApplyLoadingClass:"yes",checkoutUpdateBeforeUnload:"yes",checkoutUpdateOnVisibilityChange:"yes"},y={updateTimer:!(g.blockUI.defaults.overlayCSS.cursor="default"),dirtyInput:!1,selectedPaymentMethod:!1,xhr:!1,$order_review:g(k.orderPayFormSelector),$checkout_form:g(k.checkoutFormSelector),init:function(){window.fcSettings&&(k=FCUtils.extendObject(!0,k,window.fcSettings.checkout)),y.$checkout_form=g(k.checkoutFormSelector),y.$order_review=g(k.orderPayFormSelector),g(document.body).on("update_checkout",this.update_checkout),g(document.body).on("init_checkout",this.init_checkout),g(document.body).on("init_checkout",this.set_autocomplete_attribute_from_data),g(document.body).on("updated_checkout",this.set_autocomplete_attribute_from_data),this.$checkout_form.on("click",'input[name="payment_method"]',this.payment_method_selected),g(document.body).hasClass("woocommerce-order-pay")&&(this.$order_review.on("click",'input[name="payment_method"]',this.payment_method_selected),this.$order_review.on("submit",this.submitOrder),this.$order_review.attr("novalidate","novalidate")),this.$checkout_form.attr("novalidate","novalidate"),this.$checkout_form.on("submit",this.submit),window.CheckoutValidation||this.$checkout_form.on("input validate change",".input-text, select, input:checkbox",this.validate_field),this.$checkout_form.on("update",this.trigger_update_checkout),this.$checkout_form.on("change",'select.shipping_method, input[name^="shipping_method"], .update_totals_on_change select, .update_totals_on_change input[type="radio"], .update_totals_on_change input[type="checkbox"], .update_totals_on_change input:not([type="hidden"])',this.trigger_update_checkout),this.$checkout_form.on("change",".address-field select",this.input_changed),this.$checkout_form.on("change",k.checkoutUpdateFieldsSelector,this.maybe_input_changed),this.$checkout_form.on("keydown",k.checkoutUpdateFieldsSelector,this.queue_update_checkout),document.addEventListener("visibilitychange",FCUtils.debounce(this.maybe_update_checkout_visibility_change,50)),"yes"===k.checkoutUpdateBeforeUnload&&this.$checkout_form.on("change, input","select, input, textarea",this.maybe_prevent_unload),this.$checkout_form.on("change",k.sameAsCheckboxSelector,this.same_as_address_checkbox_changed),g(document.body).on("updated_checkout",this.maybe_reinitialize_collapsible_blocks),g(document.body).on("updated_checkout",this.maybe_reinitialize_flyout_blocks),g(document.body).on("updated_checkout",this.maybe_init_enhanced_dropdowns),this.maybe_init_enhanced_dropdowns(),g(document.body).on("change",k.checkoutTermsSelector,this.terms_checked_changed),this.init_payment_methods(),"1"===wc_checkout_params.is_checkout&&g(document.body).trigger("init_checkout"),"yes"===wc_checkout_params.option_guest_checkout&&document.addEventListener("change",this.toggle_create_account,!0),document.addEventListener("click",this.maybe_copy_email_to_login_form,!0)},maybe_init_enhanced_dropdowns:function(){window.FCEnhancedSelect&&FCEnhancedSelect.enhanceFields()},is_same_as_address_option_checked:function(e){var t,o;return!("billing"!==e&&"shipping"!==e||(e=k.addressFieldsSectionSelectorTemplate.replace("###FIELD_GROUP###",e),!(e=document.querySelector(e)))||(t=e.querySelector(k.sameAsCheckboxAvailableSelector))&&"1"!==t.value||!(o=e.querySelector(k.sameAsCheckboxSelector)))&&("hidden"===o.getAttribute("type")?"1"===o.value:o.checked)},same_as_address_checkbox_changed:function(e){var e=e.target.closest(k.addressFieldsSectionSelector),t=e?e.querySelector(k.addressFieldsWrapperSelector):null,e=e?e.querySelector(k.sameAsCheckboxSelector):null,o=e&&0===e.id.indexOf("billing")?"billing":"shipping";window.CollapsibleBlock&&e&&t&&(y.is_same_as_address_option_checked(o)?CollapsibleBlock.collapse(t):(CollapsibleBlock.expand(t),g(t).block({message:null,overlayCSS:{background:"#fff",opacity:.6}}))),g(document.body).trigger("update_checkout")},mirror_address_field_value:function(e){var t,o,c,i;e&&e.matches(k.addressFieldsToMirrorSelector)&&(!(c=e.getAttribute("name"))||0!==c.indexOf("billing_")&&0!==c.indexOf("shipping_")||(t="billing"==(i=0===c.indexOf("billing_")?"billing":"shipping")?"shipping":"billing",(o=document.querySelector(".woocommerce-"+t+"-fields__field-wrapper"))&&y.is_same_as_address_option_checked(t)&&(c=c.replace(i+"_",t+"_"),i=o.querySelector('[name="'+c+'"]'))&&(i.value=e.value)))},maybe_mirror_all_address_field_values:function(){var e=document.querySelector(k.sameAsCheckboxSelector);if(e){var e=0===e.id.indexOf("billing")?"billing":"shipping",t="billing"==e?"shipping":"billing";if(y.is_same_as_address_option_checked(e)){e=k.addressFieldsSectionSelectorTemplate.replace("###FIELD_GROUP###",t),t=document.querySelector(e),e=t?t.querySelector(k.addressFieldsWrapperSelector):null;if(t&&e)for(var o=e.querySelectorAll(k.addressFieldsToMirrorSelector),c=0;c<o.length;c++){var i=o[c];y.mirror_address_field_value(i)}}}},maybe_reinitialize_collapsible_blocks:function(){if(window.CollapsibleBlock){CollapsibleBlock.init(window.fcSettings?fcSettings.collapsibleBlock:null);for(var e=document.querySelectorAll("[data-collapsible]"),t=0;t<e.length;t++){var o=e[t];CollapsibleBlock.getInstance(o)||CollapsibleBlock.initializeElement(o)}}},maybe_reinitialize_flyout_blocks:function(){window.FlyoutBlock&&FlyoutBlock.initTriggers()},maybe_update_checkout_visibility_change:function(){"yes"!==k.checkoutUpdateOnVisibilityChange||"hidden"!=document.visibilityState&&"visible"!=document.visibilityState||g(document.body).trigger("update_checkout",{refresh_payment_methods:!1})},maybe_prevent_unload:function(e){var t;e&&e.target.closest(".payment_box, input#createaccount")||f||(t=function(e){f&&(e.preventDefault(),e.returnValue="",g(document.body).trigger("update_checkout"),f=!1,window.removeEventListener("beforeunload",t))},window.addEventListener("beforeunload",t),f=!0)},init_payment_methods:function(){var e=g(".woocommerce-checkout").find('input[name="payment_method"]'),t=(1===e.length&&e.eq(0).hide(),y.selectedPaymentMethod&&g("#"+y.selectedPaymentMethod).prop("checked",!0),0===e.filter(":checked").length&&e.eq(0).prop("checked",!0),e.filter(":checked").eq(0).prop("id"));1<e.length&&g('div.payment_box:not(".'+t+'")').filter(":visible").slideUp(0),e.filter(":checked").eq(0).trigger("click")},get_payment_method:function(){return y.$checkout_form.find('input[name="payment_method"]:checked').val()},payment_method_selected:function(e){e.stopPropagation(),1<g(".payment_methods input.input-radio").length?(e=g("div.payment_box."+g(this).attr("ID")),(t=g(this).is(":checked"))&&!e.is(":visible")&&(g("div.payment_box").filter(":visible").slideUp(230),t)&&e.slideDown(230)):g("div.payment_box").show(),g(this).data("order_button_text")?g(k.checkoutPlaceOrderSelector).text(g(this).data("order_button_text")):g(k.checkoutPlaceOrderSelector).text(g(k.checkoutPlaceOrderSelector).data("value"));var t=g('.woocommerce-checkout input[name="payment_method"]:checked').attr("id");t!==y.selectedPaymentMethod&&g(document.body).trigger("payment_method_selected"),document.body.classList.remove("has-payment-method-selected--"+y.selectedPaymentMethod),document.body.classList.add("has-payment-method-selected--"+t),y.selectedPaymentMethod=t},toggle_create_account:function(e){var t;e.target&&e.target.matches("input#createaccount")&&window.CollapsibleBlock&&(e=document.querySelector("input#createaccount"),t=document.querySelector("div.create-account"),e.checked?CollapsibleBlock.expand(t):CollapsibleBlock.collapse(t))},maybe_copy_email_to_login_form:function(e){var t;e.target&&e.target.closest(k.loginButtonSelector)&&(e=document.querySelector(k.emailFieldSelector),t=document.querySelector(k.usernameFieldSelector),e)&&t&&(t.value=e.value)},init_checkout:function(){g(document.body).trigger("update_checkout")},maybe_input_changed:function(e){y.dirtyInput&&y.input_changed(e)},set_autocomplete_attribute_from_data:function(e){g(k.checkoutFormSelector).find("input, select, textarea").each(function(){g(this).attr("data-autocomplete")&&g(this).attr("autocomplete",g(this).attr("data-autocomplete"))})},terms_checked_changed:function(e){e=g(e.target).prop("checked");g(k.checkoutTermsSelector).prop("checked",e)},maybe_set_form_row_loading:function(e){e.target&&e.target.matches(k.checkoutLoadingInputSelector)&&(e=e.target.closest(k.formRowSelector))&&e.classList.add(k.loadingClass)},maybe_stop_form_row_loading_indicators:function(){for(var e=document.querySelectorAll(k.checkoutLoadingInputSelector),t=0;t<e.length;t++){var o=e[t].closest(k.formRowSelector);o&&o.classList.remove(k.loadingClass)}},input_changed:function(e){y.dirtyInput=e.target,y.maybe_update_checkout(),y.maybe_set_form_row_loading(e)},queue_update_checkout:function(e){var t=e.key;if(FCUtils.keyboardKeys.TAB===t||FCUtils.keyboardKeys.SHIFT===t||FCUtils.keyboardKeys.CONTROL===t||FCUtils.keyboardKeys.ALT===t||FCUtils.keyboardKeys.COMMAND_OR_WINDOWS===t||FCUtils.keyboardKeys.ARROW_LEFT===t||FCUtils.keyboardKeys.ARROW_RIGHT===t||FCUtils.keyboardKeys.ARROW_UP===t||FCUtils.keyboardKeys.ARROW_DOWN===t)return!0;y.dirtyInput=this,y.reset_update_checkout_timer(),y.updateTimer=setTimeout(y.maybe_update_checkout,"1000"),y.maybe_set_form_row_loading(e)},trigger_update_checkout:function(){y.reset_update_checkout_timer(),y.dirtyInput=!1,g(document.body).trigger("update_checkout")},maybe_update_checkout:function(){var e,t=!0;g(y.dirtyInput).length&&(e=g(y.dirtyInput).closest("div").find(".address-field.validate-required")).length&&e.each(function(){""===g(this).find("input.input-text").val()&&(t=!1)}),t&&y.trigger_update_checkout()},reset_update_checkout_timer:function(){clearTimeout(y.updateTimer)},is_valid_json:function(e){try{var t=JSON.parse(e);return t&&"object"==typeof t}catch(e){return!1}},validate_field:function(e){var t=g(this),o=t.closest(".form-row"),c=!0,i=o.is(".validate-required"),r=o.is(".validate-email"),a=o.is(".validate-phone"),n="",e=e.type;"input"===e&&o.removeClass("woocommerce-invalid woocommerce-invalid-required-field woocommerce-invalid-email woocommerce-invalid-phone woocommerce-validated"),"validate"!==e&&"change"!==e||(i&&("checkbox"===t.attr("type")&&!t.is(":checked")||""===t.val())&&(o.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-required-field"),c=!1),r&&t.val()&&!(n=new RegExp(/^([a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+(\.[a-z\d!#$%&'*+\-\/=?^_`{|}~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+)*|"((([ \t]*\r\n)?[ \t]+)?([\x01-\x08\x0b\x0c\x0e-\x1f\x7f\x21\x23-\x5b\x5d-\x7e\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|\\[\x01-\x09\x0b\x0c\x0d-\x7f\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))*(([ \t]*\r\n)?[ \t]+)?")@(([a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[a-z\d\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.)+([a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]|[a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF][a-z\d\-._~\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]*[0-9a-z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])\.?$/i)).test(t.val())&&(o.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-email woocommerce-invalid-phone"),c=!1),a&&(n=new RegExp(/[\s\#0-9_\-\+\/\(\)\.]/g),0<t.val().replace(n,"").length)&&(o.removeClass("woocommerce-validated").addClass("woocommerce-invalid woocommerce-invalid-phone"),c=!1),c&&o.removeClass("woocommerce-invalid woocommerce-invalid-required-field woocommerce-invalid-email woocommerce-invalid-phone").addClass("woocommerce-validated"))},update_checkout:function(e,t){y.maybe_mirror_all_address_field_values(),y.reset_update_checkout_timer(),y.updateTimer=setTimeout(y.update_checkout_action,"5",t)},update_checkout_action:function(e){var t,o,c,i,r,a,n,l,d,s,u,m,_,p,h;window.can_update_checkout&&(y.xhr&&y.xhr.abort(),0!==g(k.checkoutFormSelector).length)&&(e=void 0!==e?e:{update_shipping_method:!0},h=g("#billing_country").val(),t=g("#billing_state").val(),o=g(":input#billing_postcode").val(),c=g("#billing_city").val(),i=g(":input#billing_address_1").val(),r=g(":input#billing_address_2").val(),a=g("#shipping_country").val(),n=g("#shipping_state").val(),l=g(":input#shipping_postcode").val(),d=g("#shipping_city").val(),s=g(":input#shipping_address_1").val(),u=g(":input#shipping_address_2").val(),_=g(y.$checkout_form).find(".address-field.validate-required:visible"),m=!0,_.length&&_.each(function(){""===g(this).find(":input").val()&&(m=!1)}),!(_={security:wc_checkout_params.update_order_review_nonce,payment_method:y.get_payment_method(),country:h,state:t,postcode:o,city:c,address:i,address_2:r,s_country:a,s_state:n,s_postcode:l,s_city:d,s_address:s,s_address_2:u,has_full_address:m,post_data:g("form.checkout").serialize()})!==e.update_shipping_method&&(p={},g('select.shipping_method, input[name^="shipping_method"][type="radio"]:checked, input[name^="shipping_method"][type="hidden"]').each(function(){p[g(this).data("index")]=g(this).val()}),_.shipping_method=p),h=k.checkoutBlockUISelector,!1===e.refresh_payment_methods&&(h=h.replace(".woocommerce-checkout-payment, ",""),_.refresh_payment_methods="false"),g(h).block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),document.body.classList.add("fc-processing-update"),y.xhr=g.ajax({type:"POST",url:wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","update_order_review"),data:_,success:function(e){if(e&&!0===e.reload)window.location.reload();else{window.processing_checkout_update=!0,g(".woocommerce-NoticeGroup-updateOrderReview").remove();var t=g(k.checkoutTermsSelector).prop("checked"),o={};if(g(".payment_box :input").each(function(){var e=g(this).attr("id");e&&(-1!==g.inArray(g(this).attr("type"),["checkbox","radio"])?o[e]=g(this).prop("checked"):o[e]=g(this).val())}),FCUtils.setCurrentFocusedElementGlobalVariables(),e&&e.fragments){if(g(document.body).trigger("fc_checkout_fragments_replace_before",[e]),window.intlTelInput&&window.intlTelInputGlobals)for(var c=document.querySelectorAll(k.phoneFieldSelector),i=0;i<c.length;i++){var r,a=c[i],n=window.intlTelInputGlobals.getInstance(a);n&&(r=n.getNumber(),n.destroy(),a.value=r)}g.each(e.fragments,function(e,t){var o=!0;document.querySelector(e)&&window.fcCurrentFocusedElement.closest(e)&&window.fcCurrentFocusedElement.closest(k.focusedFieldSkipFragmentReplaceSelector)&&(o=!1),!(o=t&&-1!==t.toString().indexOf("fc-fragment-always-replace")?!0:o)||y.fragments&&y.fragments[e]===t?"yes"===fcSettings.debugMode&&console.log("Skipping fragment: "+e):("yes"===fcSettings.debugMode&&console.log("Replacing fragment: "+e),g(e).replaceWith(t)),g(e).unblock()}),y.fragments=e.fragments,g(document.body).trigger("fc_checkout_fragments_replace_after",[e])}g(k.checkoutBlockUISelector).unblock(),document.body.classList.remove("fc-processing-update"),FCUtils.maybeRefocusElement(window.fcCurrentFocusedElement,window.fcCurrentFocusedElementValue),t&&g(k.checkoutTermsSelector).prop("checked",!0),g.isEmptyObject(o)||g(".payment_box :input").each(function(){var e=g(this).attr("id");e&&(-1!==g.inArray(g(this).attr("type"),["checkbox","radio"])?g(this).prop("checked",o[e]).trigger("change"):(-1!==g.inArray(g(this).attr("type"),["select"])||null!==g(this).val()&&0===g(this).val().length)&&g(this).val(o[e]).trigger("change"))}),e&&"failure"===e.result&&(t=g(k.checkoutFormSelector),g(".woocommerce-error, .woocommerce-message").remove(),e.messages?t.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-updateOrderReview">'+e.messages+"</div>"):t.prepend(e),t.find(".input-text, select, input:checkbox").trigger("validate").trigger("blur"),y.scroll_to_notices()),y.init_payment_methods(),window.processing_checkout_update=!1,f=!1,g(document.body).trigger("updated_checkout",[e]),setTimeout(function(){FCUtils.unsetCurrentFocusedElementGlobalVariables()},60),y.maybe_stop_form_row_loading_indicators()}},error:function(){y.maybe_stop_form_row_loading_indicators()}}))},handleUnloadEvent:function(e){if(-1===navigator.userAgent.indexOf("MSIE")&&!document.documentMode)return!0;e.preventDefault()},attachUnloadEventsOnSubmit:function(){g(window).on("beforeunload",this.handleUnloadEvent)},detachUnloadEventsOnSubmit:function(){g(window).off("beforeunload",this.handleUnloadEvent)},blockOnSubmit:function(e){1!==e.data("blockUI.isBlocked")&&e.block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},submitOrder:function(){y.blockOnSubmit(g(this))},submit:function(){y.reset_update_checkout_timer();var c,e=g(this);return e.is(".processing")||(f=!1,y.maybe_mirror_all_address_field_values(),!1!==e.triggerHandler("checkout_place_order",[y])&&!1!==e.triggerHandler("checkout_place_order_"+y.get_payment_method(),[y])&&(e.addClass("processing"),c=document.activeElement,g(k.checkoutPlaceOrderSelector).attr("disabled","disabled"),g(k.checkoutPlaceOrderSelector).addClass("disabled"),"yes"===k.checkoutPlaceOrderApplyLoadingClass&&g(k.checkoutPlaceOrderSelector).addClass(k.loadingClass),window.can_update_checkout=!1,y.blockOnSubmit(e),y.attachUnloadEventsOnSubmit(),g.ajaxSetup({dataFilter:function(e,t){return"json"!==t||y.is_valid_json(e)||(null!==(t=e.match(/{"result.*}/))&&y.is_valid_json(t[0])?(console.log("Fixed malformed JSON. Original:"),console.log(e),e=t[0]):console.log("Unable to fix malformed JSON")),e}}),g.ajax({type:"POST",url:wc_checkout_params.checkout_url,data:e.serialize(),dataType:"json",success:function(t){if(y.detachUnloadEventsOnSubmit(),(f=!1)===g(document.body).triggerHandler("fc_checkout_request_place_order_success",[t,y]))window.can_update_checkout=!0,"yes"===k.checkoutPlaceOrderApplyLoadingClass&&g(k.checkoutPlaceOrderSelector).removeClass(k.loadingClass),g(k.checkoutPlaceOrderSelector).removeAttr("disabled"),g(k.checkoutPlaceOrderSelector).removeClass("disabled"),FCUtils.maybeRefocusElement(c);else try{if("success"!==t.result||!1===e.triggerHandler("checkout_place_order_success",[t,y]))throw"failure"===t.result?"Result failure":"Invalid response";-1===t.redirect.indexOf("https://")||-1===t.redirect.indexOf("http://")?window.location=t.redirect:window.location=decodeURI(t.redirect)}catch(e){!0===t.reload?window.location.reload():(window.can_update_checkout=!0,"yes"===k.checkoutPlaceOrderApplyLoadingClass&&g(k.checkoutPlaceOrderSelector).removeClass(k.loadingClass),g(k.checkoutPlaceOrderSelector).removeAttr("disabled"),g(k.checkoutPlaceOrderSelector).removeClass("disabled"),FCUtils.maybeRefocusElement(c),!0===t.refresh&&g(document.body).trigger("update_checkout"),t.messages?y.submit_error(t.messages):y.submit_error('<div class="woocommerce-error">'+wc_checkout_params.i18n_checkout_error+"</div>"))}},error:function(e,t,o){window.can_update_checkout=!0,"yes"===k.checkoutPlaceOrderApplyLoadingClass&&g(k.checkoutPlaceOrderSelector).removeClass(k.loadingClass),g(k.checkoutPlaceOrderSelector).removeAttr("disabled"),g(k.checkoutPlaceOrderSelector).removeClass("disabled"),FCUtils.maybeRefocusElement(c),y.detachUnloadEventsOnSubmit(),y.submit_error('<div class="woocommerce-error">'+(o||wc_checkout_params.i18n_checkout_error)+"</div>")}}))),!1},submit_error:function(e){g(".woocommerce-NoticeGroup-checkout, .woocommerce-error, .woocommerce-message").remove(),y.$checkout_form.prepend('<div class="woocommerce-NoticeGroup woocommerce-NoticeGroup-checkout">'+e+"</div>"),y.$checkout_form.removeClass("processing").unblock(),g(k.checkoutPlaceOrderSelector).removeAttr("disabled"),g(k.checkoutPlaceOrderSelector).removeClass("disabled"),y.$checkout_form.find(".input-text, select, input:checkbox").trigger("validate").trigger("blur"),y.scroll_to_notices(),g(document.body).trigger("checkout_error",[e])},scroll_to_notices:function(){var e=g(".woocommerce-NoticeGroup-updateOrderReview, .woocommerce-NoticeGroup-checkout");e.length||(e=g(k.checkoutFormSelector)),g.scroll_to_notices(e)}},e={init:function(){g(document.body).on("click","a.showcoupon",this.show_coupon_form),g(document.body).on("click",".woocommerce-remove-coupon",this.remove_coupon),g("form.checkout_coupon").hide().on("submit",this.submit)},show_coupon_form:function(){return g(".checkout_coupon").slideToggle(400,function(){g(".checkout_coupon").find(":input:eq(0)").trigger("focus")}),!1},submit:function(){var t,o=g(this);return o.is(".processing")||(o.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),t={security:wc_checkout_params.apply_coupon_nonce,coupon_code:o.find('input[name="coupon_code"]').val()},g.ajax({type:"POST",url:wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","apply_coupon"),data:t,success:function(e){g(".woocommerce-error, .woocommerce-message").remove(),o.removeClass("processing").unblock(),e&&(o.before(e),o.slideUp(),g(document.body).trigger("applied_coupon_in_checkout",[t.coupon_code]),g(document.body).trigger("update_checkout",{update_shipping_method:!1}))},dataType:"html"})),!1},remove_coupon:function(e){var t,o;k.checkoutCoupons&&"yes"===k.checkoutCoupons.isEnabled||(e.preventDefault(),t=g(this).parents(".woocommerce-checkout-review-order"),e=g(this).data("coupon"),t.addClass("processing").block({message:null,overlayCSS:{background:"#fff",opacity:.6}}),o={security:wc_checkout_params.remove_coupon_nonce,coupon:e},g.ajax({type:"POST",url:wc_checkout_params.wc_ajax_url.toString().replace("%%endpoint%%","remove_coupon"),data:o,success:function(e){g(".woocommerce-error, .woocommerce-message").remove(),t.removeClass("processing").unblock(),e&&(g("form.woocommerce-checkout").before(e),g(document.body).trigger("removed_coupon_in_checkout",[o.coupon]),g(document.body).trigger("update_checkout",{update_shipping_method:!1}),g("form.checkout_coupon").find('input[name="coupon_code"]').val(""))},error:function(e){wc_checkout_params.debug_mode&&console.log(e.responseText)},dataType:"html"}))}},t={init:function(){g(document.body).on("click","a.showlogin",this.show_login_form)},show_login_form:function(){return g("form.login, form.woocommerce-form--login").slideToggle(),!1}},o={init:function(){g(document.body).on("click","a.woocommerce-terms-and-conditions-link",this.toggle_terms)},toggle_terms:function(){if(g(".woocommerce-terms-and-conditions").length)return g(".woocommerce-terms-and-conditions").slideToggle(function(){var e=g(".woocommerce-terms-and-conditions-link");g(".woocommerce-terms-and-conditions").is(":visible")?(e.addClass("woocommerce-terms-and-conditions-link--open"),e.removeClass("woocommerce-terms-and-conditions-link--closed")):(e.removeClass("woocommerce-terms-and-conditions-link--open"),e.addClass("woocommerce-terms-and-conditions-link--closed"))}),!1}};y.init(),e.init(),t.init(),o.init()});