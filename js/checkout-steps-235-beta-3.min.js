!function(e,t){"function"==typeof define&&define.amd?define([],t()):"object"==typeof exports?module.exports=t():e.CheckoutSteps=t()}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";function a(){var e={},t=!1,r=0;for("[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(t=arguments[0],r++);r<arguments.length;r++){o=void 0;var o,s=arguments[r];for(o in s)s.hasOwnProperty(o)&&(t&&"[object Object]"===Object.prototype.toString.call(s[o])?e[o]=a(e[o],s[o]):e[o]=s[o])}return e}function S(e,t,r){var o,s;e&&(o=e.querySelector(m.substepFieldsSelector),s=e.querySelector(m.substepTextSelector),CollapsibleBlock.expand(o,t,r),CollapsibleBlock.collapse(s,t),e.classList.add(m.isEditingClass))}function t(e,t){if(t&&t.fragments)for(var r in t.fragments){r=document.querySelector(r);r&&r.classList.remove(m.isLoadingClass)}}function r(e,t){if("yes"===m.maybeDisablePlaceOrderButton&&"yes"===m.isMultistepLayout){for(var r=h(),o=0;o<r.length;o++){var s=r[o].getAttribute(m.stepIdAttribute),l=m.currentStepClassTemplate.replace("##STEP_ID##",s);document.body.classList.remove(l)}var c=document.querySelector(m.currentStepSelector),a=document.querySelector(m.lastStepSelector);c&&(s=c.getAttribute(m.stepIdAttribute),l=m.currentStepClassTemplate.replace("##STEP_ID##",s),document.body.classList.add(l),a&&(c=c.getAttribute(m.stepIdAttribute),a.getAttribute(m.stepIdAttribute)===c&&document.body.classList.add(m.currentLastStepClass)))}if("yes"===m.maybeDisablePlaceOrderButton&&"yes"===m.isMultistepLayout){a=document.querySelector(m.currentStepSelector),c=document.querySelector(m.lastStepSelector);if(a&&c)for(var i=a.getAttribute(m.stepIdAttribute)!==c.getAttribute(m.stepIdAttribute),n=document.querySelectorAll(m.placeOrderButtonSelector),u=0;u<n.length;u++)n[u].disabled=i}}function i(e,t){for(var r=document.querySelectorAll(m.substepSelector),o=0;o<r.length;o++){var s=r[o],l=s.querySelector(m.substepEditableStateFieldSelector),l=(l&&"no"===l.value?s.setAttribute(m.substepEditableStateAttribute,l.value):s.removeAttribute(m.substepEditableStateAttribute),s.querySelector(m.substepVisibleStateFieldSelector)),l=(l&&"no"===l.value?s.setAttribute(m.substepVisibleStateAttribute,l.value):s.removeAttribute(m.substepVisibleStateAttribute),s.querySelector(m.substepExpandedStateFieldSelector));l&&"yes"===l.value&&(s=l.closest(m.substepSelector),S(s,!0,!1))}}function n(){var e,t,r,o;document.body.matches(m.placeOrderSkipMoveSelector)||(e=window.innerWidth,t=document.querySelector(m.placeOrderSectionMainSelector),r=document.querySelector(m.placeOrderPlaceholderMainSelector),o=document.querySelector(m.placeOrderPlaceholderSidebarSelector),t&&r&&o&&(e<1e3&&o.parentNode!==t.parentNode?o.parentNode.insertBefore(t,o.nextSibling):1e3<=e&&r.parentNode!==t.parentNode&&r.parentNode.insertBefore(t,r.nextSibling)))}function u(e){if(e.target.closest(m.nextStepButtonSelector)){e.preventDefault();var t=e.target.closest(m.stepSelector);if(t)if(window.CheckoutValidation&&!CheckoutValidation.validateAllFields(t))(c=t.querySelector(m.invalidFieldRowSelector))&&c.focus();else{t.setAttribute(m.stepCompleteAttribute,"");for(var r=t.querySelectorAll(m.substepSelector),o=0;o<r.length;o++){var s=r[o],l=s.querySelector(m.substepTextContentSelector);l&&(l.classList.add(m.isLoadingClass),A(l)),C(s)}for(var c=t.parentElement.querySelector(m.nextStepSelector),a=(c.setAttribute(m.stepCurrentAttribute,""),t.removeAttribute(m.stepCurrentAttribute),h()),i=a.indexOf(t),o=0;o<a.length;o++)o<i&&a[o].classList.remove(m.stepNextIncompleteClass);k();for(var n=null,u=Array.from(g(c)),o=0;o<u.length;o++){var p=u[o];if(v(p)){n=p;break}}n&&n.focus(),x(t),y&&f(document.body).trigger("update_checkout")}}else{var d;e.target.closest(m.substepEditButtonSelector)?(e.preventDefault(),d=e.target.closest(m.substepSelector),S(d)):e.target.closest(m.substepSaveButtonSelector)&&(e.preventDefault(),d=e.target.closest(m.substepSelector),(c=d)&&(window.CheckoutValidation&&!CheckoutValidation.validateAllFields(c)?(b=c.querySelector(m.invalidFieldRowSelector))&&b.focus():(C(c),y&&(b=c.querySelector(m.substepTextContentSelector),A(b),f(".woocommerce-error, .woocommerce-message").remove(),f(document.body).trigger("update_checkout")))))}var b}function p(e){var t;e.defaultPrevented||(e.key!=s&&e.key!=l||!e.target.closest(m.substepEditButtonSelector)&&!e.target.closest(m.substepSaveButtonSelector)?e.key==s&&e.target.closest(m.fieldSubmitFormSelector)&&(e.preventDefault(),window.CheckoutValidation&&(t=e.target.closest(m.fieldSubmitFormSelector),CheckoutValidation.validateField(t))):u(e))}var f=jQuery,y=null!=f,d=!1,o={},m={bodyClass:"has-fc-checkout-steps",bodyClassActiveStepPattern:"fc-checkout-step--active-{ID}",isMultistepLayout:"yes",maybeDisablePlaceOrderButton:"yes",wrapperSelector:".fc-wrapper",progressBarSelector:".fc-progress-bar",progressBarCurrentSelector:".fc-progress-bar__current-step",progressBarItemSelector:".fc-progress-bar__bar",stepsWrapperSelector:".fc-checkout-steps",stepSelector:".fc-checkout-step",currentStepSelector:"[data-step-current]",lastStepSelector:"[data-step-last]",nextStepSelector:"[data-step-current] ~ .fc-checkout-step",nextStepButtonSelector:"[data-step-next]",focusableElementsSelector:'a[role="button"], a[href], button:not([disabled]), input:not([disabled]):not([type="hidden"]), textarea:not([disabled]), select:not([disabled]), details, summary, iframe, object, embed, [contenteditable] [tabindex]:not([tabindex="-1"])',fieldSubmitFormSelector:'input[type="text"], input[type="checkbox"], input[type="color"], input[type="date"], input[type="datetime"], input[type="datetime-local"], input[type="email"], input[type="file"], input[type="image"], input[type="month"], input[type="number"], input[type="password"], input[type="radio"], input[type="search"], input[type="tel"], input[type="time"], input[type="url"], input[type="week"]',substepSelector:".fc-step__substep",substepTextContentSelector:".fc-step__substep-text-content",substepFieldsSelector:".fc-step__substep-fields",substepTextSelector:".fc-step__substep-text",substepEditButtonSelector:"[data-step-edit]",substepSaveButtonSelector:"[data-step-save]",stepCompleteAttribute:"data-step-complete",stepCurrentAttribute:"data-step-current",stepIndexAttribute:"data-step-index",stepIdAttribute:"data-step-id",isEditingClass:"is-editing",isLoadingClass:"is-loading",isCurrentClass:"is-current",isCompleteClass:"is-complete",stepNextIncompleteClass:"fc-checkout-step--next-step-incomplete",currentStepClassTemplate:"fc-checkout-step-current--##STEP_ID##",currentLastStepClass:"fc-checkout-step-current-last",substepEditableStateFieldSelector:'.fc-substep-editable-state[type="hidden"]',substepEditableStateAttribute:"data-substep-editable",substepVisibleStateFieldSelector:'.fc-substep-visible-state[type="hidden"]',substepVisibleStateAttribute:"data-substep-visible",substepExpandedStateFieldSelector:'.fc-substep-expanded-state[type="hidden"]',invalidFieldRowSelector:".woocommerce-invalid .input-text, .woocommerce-invalid select",placeOrderButtonSelector:".fc-place-order-button",placeOrderSkipMoveSelector:".has-place-order--below_order_summary",placeOrderSectionMainSelector:".fc-place-order__section--main",placeOrderPlaceholderMainSelector:".fc-inside .fc-place-order__section-placeholder",placeOrderPlaceholderSidebarSelector:".fc-sidebar .fc-place-order__section-placeholder",placeOrderRefreshRate:50,scrollOffsetSelector:".fc-checkout-header",scrollBehavior:"smooth",scrollOffset:0,scrollDelay:50},s="Enter",l=" ",v=function(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)},g=function(e){return(e=e||document).querySelectorAll(m.focusableElementsSelector)},c=function(e,t){for(var r=0;e&&(!t||t!=e);)r+=e.offsetTop,e=e.offsetParent;return r},h=function(){var e=document.querySelector(m.stepsWrapperSelector);return e?Array.from(e.querySelectorAll(m.stepSelector)):[]},C=function(e){var t,r;e&&(r=e.querySelector(m.substepFieldsSelector),t=e.querySelector(m.substepTextSelector),CollapsibleBlock.collapse(r),CollapsibleBlock.expand(t),e.classList.remove(m.isEditingClass),(r=e.querySelector(m.substepEditButtonSelector))&&r.focus(),x(e))},A=function(e){y&&f(e).block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},k=function(){var e=document.querySelector(m.currentStepSelector);if(e){var t=parseInt(e.getAttribute(m.stepIndexAttribute)),t=isNaN(t)?-1:t,e=document.querySelector(m.progressBarSelector);if(e){for(var r=e.querySelectorAll(m.progressBarItemSelector),o=r.length,s=0;s<r.length;s++){var l=r[s],c=parseInt(l.getAttribute(m.stepIndexAttribute));(c=isNaN(c)?-1:c)==t?l.classList.add(m.isCurrentClass):l.classList.remove(m.isCurrentClass),c<=t?l.classList.add(m.isCompleteClass):l.classList.remove(m.isCompleteClass)}var a=(a=t+1)<=o?a:o,o=e.querySelector(m.progressBarCurrentSelector);o&&(o.innerText=a)}}},b=function(){var e=0,t=document.querySelector(m.progressBarSelector);if(t&&(e+=t.getBoundingClientRect().height),window.StickyStates){var r=document.querySelectorAll(m.scrollOffsetSelector);if(r&&0<r.length)for(var o=0;o<r.length;o++){var s=r[o];StickyStates.isStickyPosition(s)&&(e+=s.getBoundingClientRect().height)}}return e},x=function(e){var t,r;e&&(t=b(),r=c(e)+-1*m.scrollOffset+-1*t,window.setTimeout(function(){window.scrollTo({top:r,behavior:m.scrollBehavior})},m.scrollDelay))};return o.init=function(e){var o,s,l,c;d||(m=a(m,e),n(),window.ResizeObserver&&new ResizeObserver((o=n,s=m.placeOrderRefreshRate,function(){var e=this,t=arguments,r=l&&!c;clearTimeout(c),c=setTimeout(function(){c=null,l||o.apply(e,t)},s),r&&o.apply(e,t)})).observe(document.body),window.addEventListener("click",u),document.addEventListener("keydown",p,!0),y&&(f(document.body).on("updated_checkout",r),f(document.body).on("updated_checkout",i),f(document.body).on("updated_checkout",t)),document.body.classList.add(m.bodyClass),d=!0)},o});
//# sourceMappingURL=maps/checkout-steps-235-beta-3.min.js.map
