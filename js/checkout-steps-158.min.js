!function(e,t){"function"==typeof define&&define.amd?define([],t()):"object"==typeof exports?module.exports=t():e.CheckoutSteps=t()}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";function r(){var s={},o=!1,e=0;for("[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(o=arguments[0],e++);e<arguments.length;e++)!function(e){for(var t in e)e.hasOwnProperty(t)&&(o&&"[object Object]"===Object.prototype.toString.call(e[t])?s[t]=r(s[t],e[t]):s[t]=e[t])}(arguments[e]);return s}function b(e){var t,s;e&&(t=e.querySelector(v.substepFieldsSelector),s=e.querySelector(v.substepTextSelector),CollapsibleBlock.collapse(t),CollapsibleBlock.expand(s),e.classList.remove(v.isEditingClass),(e=e.querySelector(v.substepEditButtonSelector))&&e.focus())}function S(e){g&&f(e).block({message:null,overlayCSS:{background:"#fff",opacity:.6}})}function t(e,t){if(t&&t.fragments)for(var s in t.fragments){s=document.querySelector(s);s&&s.classList.remove(v.isLoadingClass)}}function s(e,t){for(var s=document.querySelectorAll(v.substepSelector),o=0;o<s.length;o++){var r=s[o],l=r.querySelector(v.substepEditableStateFieldSelector);l&&"no"===l.value?r.setAttribute(v.substepEditableStateAttribute,l.value):r.removeAttribute(v.substepEditableStateAttribute);l=r.querySelector(v.substepVisibleStateFieldSelector);l&&"no"===l.value?r.setAttribute(v.substepVisibleStateAttribute,l.value):r.removeAttribute(v.substepVisibleStateAttribute)}}function o(e){e.defaultPrevented||e.key!=a.ENTER&&e.key!=a.SPACE||!e.target.closest(v.substepEditButtonSelector)&&!e.target.closest(v.substepSaveButtonSelector)||d(e)}function l(){window.addEventListener("click",d),document.addEventListener("keydown",o,!0),g&&(f(document.body).on("updated_checkout",s),f(document.body).on("updated_checkout",t)),document.body.classList.add(v.bodyClass),c=!0}var f=jQuery,g=null!=f,c=!1,i={},v={bodyClass:"has-fc-checkout-steps",bodyClassActiveStepPattern:"fc-checkout-step--active-{ID}",wrapperSelector:".fc-wrapper",progressBarSelector:".fc-progress-bar",progressBarCurrentSelector:".fc-progress-bar__current-step",progressBarItemSelector:".fc-progress-bar__bar",stepsWrapperSelector:".fc-checkout-steps",stepSelector:".fc-checkout-step",currentStepSelector:"[data-step-current]",nextStepSelector:"[data-step-current] ~ .fc-checkout-step",nextStepButtonSelector:"[data-step-next]",focusableElementsSelector:'a[role="button"], a[href], button:not([disabled]), input:not([disabled]):not([type="hidden"]), textarea:not([disabled]), select:not([disabled]), details, summary, iframe, object, embed, [contenteditable] [tabindex]:not([tabindex="-1"])',substepSelector:".fc-step__substep",substepTextContentSelector:".fc-step__substep-text-content",substepFieldsSelector:".fc-step__substep-fields",substepTextSelector:".fc-step__substep-text",substepEditButtonSelector:"[data-step-edit]",substepSaveButtonSelector:"[data-step-save]",expansibleSectionToggleSelector:"[data-expansible-section-toggle]",expansibleSectionExpandAttribute:"data-expansible-section-expand",expansibleSectionCollapseAttribute:"data-expansible-section-collapse",stepCompleteAttribute:"data-step-complete",stepCurrentAttribute:"data-step-current",stepIndexAttribute:"data-step-index",isEditingClass:"is-editing",isLoadingClass:"is-loading",isCurrentClass:"is-current",isCompleteClass:"is-complete",stepNextIncompleteClass:"fc-checkout-step--next-step-incomplete",substepEditableStateFieldSelector:'.fc-substep-editable-state[type="hidden"]',substepEditableStateAttribute:"data-substep-editable",substepVisibleStateFieldSelector:'.fc-substep-visible-state[type="hidden"]',substepVisibleStateAttribute:"data-substep-visible",invalidFieldRowSelector:".woocommerce-invalid .input-text, .woocommerce-invalid select",scrollOffsetSelector:".fc-checkout-header",scrollBehavior:"smooth",scrollOffset:0},a={ENTER:"Enter",SPACE:" "},n=function(e){var t,s;e&&(t=e.querySelector(v.substepFieldsSelector),s=e.querySelector(v.substepTextSelector),CollapsibleBlock.expand(t),CollapsibleBlock.collapse(s),e.classList.add(v.isEditingClass))},u=function(e){var t;e&&(!window.CheckoutValidation||CheckoutValidation.validateAllFields(e)?(b(e),g&&(t=e.querySelector(v.substepTextContentSelector),S(t),f(".woocommerce-error, .woocommerce-message").remove(),f(document.body).trigger("update_checkout"))):(e=e.querySelector(v.invalidFieldRowSelector))&&e.focus())},p=function(e){if(e)if(!window.CheckoutValidation||CheckoutValidation.validateAllFields(e)){e.setAttribute(v.stepCompleteAttribute,"");for(var t=e.querySelectorAll(v.substepSelector),s=0;s<t.length;s++){var o=t[s],r=o.querySelector(v.substepTextContentSelector);r&&(r.classList.add(v.isLoadingClass),S(r)),b(o)}var l=e.parentElement.querySelector(v.nextStepSelector);l.setAttribute(v.stepCurrentAttribute,""),e.removeAttribute(v.stepCurrentAttribute);for(var c,i=(c=document.querySelector(v.stepsWrapperSelector))?Array.from(c.querySelectorAll(v.stepSelector)):[],a=i.indexOf(e),s=0;s<i.length;s++)s<a&&i[s].classList.remove(v.stepNextIncompleteClass);!function(){var e=document.querySelector(v.currentStepSelector);if(e){var t=parseInt(e.getAttribute(v.stepIndexAttribute)),t=isNaN(t)?-1:t,s=document.querySelector(v.progressBarSelector);if(s){for(var o=s.querySelectorAll(v.progressBarItemSelector),r=o.length,l=0;l<o.length;l++){var c=o[l],i=parseInt(c.getAttribute(v.stepIndexAttribute));(i=isNaN(i)?-1:i)==t?c.classList.add(v.isCurrentClass):c.classList.remove(v.isCurrentClass),i<=t?c.classList.add(v.isCompleteClass):c.classList.remove(v.isCompleteClass)}e=(e=t+1)<=r?e:r,s=s.querySelector(v.progressBarCurrentSelector);s&&(s.innerText=e)}}}(),function(e){var t=0,s=document.querySelector(v.progressBarSelector);if(s&&(t+=s.getBoundingClientRect().height),window.StickyStates){var o=document.querySelectorAll(v.scrollOffsetSelector);if(o&&0<o.length)for(var r=0;r<o.length;r++){var l=o[r];StickyStates.isStickyPosition(l)&&(t+=l.getBoundingClientRect().height)}}var c=function(e,t){for(var s=0;e&&(!t||t!=e);)s+=e.offsetTop,e=e.offsetParent;return s}(e)+-1*v.scrollOffset+-1*t;requestAnimationFrame(function(){window.scrollTo({top:c,behavior:v.scrollBehavior})})}(e);for(var n,u=null,p=Array.from((l||document).querySelectorAll(v.focusableElementsSelector)),s=0;s<p.length;s++){var d=p[s];if(!!((n=d).offsetWidth||n.offsetHeight||n.getClientRects().length)){u=d;break}}u&&u.focus(),g&&f(document.body).trigger("update_checkout")}else{e=e.querySelector(v.invalidFieldRowSelector);e&&e.focus()}},d=function(e){var t,s;e.target.closest(v.nextStepButtonSelector)?(e.preventDefault(),t=e.target.closest(v.stepSelector),p(t)):e.target.closest(v.substepEditButtonSelector)?(e.preventDefault(),s=e.target.closest(v.substepSelector),n(s)):e.target.closest(v.substepSaveButtonSelector)&&(e.preventDefault(),s=e.target.closest(v.substepSelector),u(s))};return i.init=function(e){c||(v=r(v,e),window.CollapsibleBlock?l():window.RequireBundle&&RequireBundle.require(["collapsible-block"],function(){l()}))},i});
//# sourceMappingURL=maps/checkout-steps-158.min.js.map
