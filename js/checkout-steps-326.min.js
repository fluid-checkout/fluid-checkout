((e,t)=>{"function"==typeof define&&define.amd?define([],t()):"object"==typeof exports?module.exports=t():e.CheckoutSteps=t()})("undefined"!=typeof global?global:this.window||this.global,function(e){function p(e,t,r){var s,o;e&&(s=e.querySelector(S.substepFieldsSelector),o=e.querySelector(S.substepTextSelector),CollapsibleBlock.expand(s,t,r),CollapsibleBlock.collapse(o,t),e.classList.add(S.isEditingClass))}function t(e,t){if(t&&t.fragments)for(var r in t.fragments){r=document.querySelector(r);r&&r.classList.remove(S.isLoadingClass)}}function r(e,t){if("yes"===S.maybeDisablePlaceOrderButton&&"yes"===S.isMultistepLayout){for(var r=y(),s=0;s<r.length;s++){var o=r[s].getAttribute(S.stepIdAttribute),l=S.currentStepClassTemplate.replace("##STEP_ID##",o);document.body.classList.remove(l)}var c=document.querySelector(S.currentStepSelector),a=document.querySelector(S.lastStepSelector);c&&(o=c.getAttribute(S.stepIdAttribute),l=S.currentStepClassTemplate.replace("##STEP_ID##",o),document.body.classList.add(l),a)&&(c=c.getAttribute(S.stepIdAttribute),a.getAttribute(S.stepIdAttribute)===c)&&document.body.classList.add(S.currentLastStepClass)}if("yes"===S.maybeDisablePlaceOrderButton&&"yes"===S.isMultistepLayout){a=document.querySelector(S.currentStepSelector),c=document.querySelector(S.lastStepSelector);if(a&&c)for(var i=a.getAttribute(S.stepIdAttribute)!==c.getAttribute(S.stepIdAttribute),u=document.querySelectorAll(S.placeOrderButtonSelector),n=0;n<u.length;n++)u[n].disabled=i}}function s(e,t){for(var r=document.querySelectorAll(S.substepSelector),s=0;s<r.length;s++){var o,l=r[s],c=l.querySelector(S.substepEditableStateFieldSelector),c=(c&&("no"===c.value?l.setAttribute(S.substepEditableStateAttribute,c.value):l.removeAttribute(S.substepEditableStateAttribute),c.parentNode.removeChild(c)),l.querySelector(S.substepExpandedStateFieldSelector)),c=(c&&((o=c&&"yes"===c.value)&&p(l,!0,!1),c.parentNode.removeChild(c)),l.querySelector(S.substepVisibleStateFieldSelector));c&&(l.setAttribute(S.substepVisibleStateAttribute,c.value),"no"!==c.value||o||null===l.closest(S.stepCompleteSelector)||f(l,!0,!1),c.parentNode.removeChild(c))}}function o(){var e,t,r,s;document.body.matches(S.placeOrderSkipMoveSelector)||(e=window.innerWidth,t=document.querySelector(S.placeOrderSectionMainSelector),r=document.querySelector(S.placeOrderPlaceholderMainSelector),s=document.querySelector(S.placeOrderPlaceholderSidebarSelector),t&&r&&s&&(e<1e3&&s.parentNode!==t.parentNode?s.parentNode.insertBefore(t,s.nextSibling):1e3<=e&&r.parentNode!==t.parentNode&&r.parentNode.insertBefore(t,r.nextSibling)))}function l(e){if(e.target.closest(S.nextStepButtonSelector)){e.preventDefault();var t=e.target.closest(S.stepSelector);if(t)if(window.CheckoutValidation&&!CheckoutValidation.validateAllFields(t))(c=t.querySelector(S.invalidFieldRowSelector))&&c.focus();else{t.setAttribute(S.stepCompleteAttribute,"");for(var r=t.querySelectorAll(S.substepSelector),s=0;s<r.length;s++){var o=r[s],l=o.querySelector(S.substepTextContentSelector);l&&(l.classList.add(S.isLoadingClass),C(l)),f(o)}for(var c=t.parentElement.querySelector(S.nextStepSelector),a=(c.setAttribute(S.stepCurrentAttribute,""),t.removeAttribute(S.stepCurrentAttribute),y()),i=a.indexOf(t),s=0;s<a.length;s++)s<i&&a[s].classList.remove(S.stepNextIncompleteClass);g(),v(c),m(t),b&&d(document.body).trigger("update_checkout")}}else{var u;e.target.closest(S.substepEditButtonSelector)?(e.preventDefault(),u=e.target.closest(S.substepSelector),p(u)):e.target.closest(S.substepSaveButtonSelector)&&(e.preventDefault(),u=e.target.closest(S.substepSelector),c=u)&&(window.CheckoutValidation&&!CheckoutValidation.validateAllFields(c)?(n=c.querySelector(S.invalidFieldRowSelector))&&n.focus():(f(c),b&&(n=c.querySelector(S.substepTextContentSelector),C(n),d(".woocommerce-error, .woocommerce-message").remove(),d(document.body).trigger("update_checkout"))))}var n}function c(e){var t;e.defaultPrevented||(FCUtils.keyboardKeys.ENTER!==e.key&&FCUtils.keyboardKeys.SPACE!==e.key||!e.target.closest(S.substepEditButtonSelector)&&!e.target.closest(S.substepSaveButtonSelector)?FCUtils.keyboardKeys.ENTER===e.key&&e.target.closest(S.checkoutFormSelector)&&e.target.closest(S.fieldSubmitFormSelector)&&(e.preventDefault(),window.CheckoutValidation)&&(t=e.target.closest(S.fieldSubmitFormSelector),CheckoutValidation.validateField(t,"step-validation")):l(e))}var d=jQuery,b=null!=d,a=!1,i={},S={bodyClass:"has-fc-checkout-steps",bodyClassActiveStepPattern:"fc-checkout-step--active-{ID}",isMultistepLayout:"yes",maybeDisablePlaceOrderButton:"yes",wrapperSelector:".fc-wrapper",progressBarSelector:".fc-progress-bar",progressBarCurrentSelector:".fc-progress-bar__current-step",progressBarItemSelector:".fc-progress-bar__bar",stepsWrapperSelector:".fc-checkout-steps",stepSelector:".fc-checkout-step",currentStepSelector:"[data-step-current]",lastStepSelector:"[data-step-last]",nextStepSelector:"[data-step-current] ~ .fc-checkout-step",nextStepButtonSelector:"[data-step-next]",checkoutFormSelector:"form.checkout",fieldSubmitFormSelector:'input[type="text"], input[type="checkbox"], input[type="color"], input[type="date"], input[type="datetime"], input[type="datetime-local"], input[type="email"], input[type="file"], input[type="image"], input[type="month"], input[type="number"], input[type="password"], input[type="radio"], input[type="search"], input[type="tel"], input[type="time"], input[type="url"], input[type="week"]',substepSelector:".fc-step__substep",substepTextContentSelector:".fc-step__substep-text-content",substepFieldsSelector:".fc-step__substep-fields",substepTextSelector:".fc-step__substep-text",substepEditButtonSelector:"[data-step-edit]",substepSaveButtonSelector:"[data-step-save]",stepCompleteSelector:"[data-step-complete]",stepCompleteAttribute:"data-step-complete",stepCurrentAttribute:"data-step-current",stepIndexAttribute:"data-step-index",stepIdAttribute:"data-step-id",isEditingClass:"is-editing",isLoadingClass:"is-loading",isCurrentClass:"is-current",isCompleteClass:"is-complete",stepNextIncompleteClass:"fc-checkout-step--next-step-incomplete",currentStepClassTemplate:"fc-checkout-step-current--##STEP_ID##",currentLastStepClass:"fc-checkout-step-current-last",substepEditableStateFieldSelector:'.fc-substep-editable-state[type="hidden"]',substepEditableStateAttribute:"data-substep-editable",substepVisibleStateFieldSelector:'.fc-substep-visible-state[type="hidden"]',substepVisibleStateAttribute:"data-substep-visible",substepExpandedStateFieldSelector:'.fc-substep-expanded-state[type="hidden"]',invalidFieldRowSelector:".woocommerce-invalid .input-text, .woocommerce-invalid select",placeOrderButtonSelector:".fc-place-order-button",placeOrderSkipMoveSelector:".has-place-order--below_order_summary",placeOrderSectionMainSelector:".fc-place-order__section--main",placeOrderPlaceholderMainSelector:".fc-inside .fc-place-order__section-placeholder",placeOrderPlaceholderSidebarSelector:".fc-sidebar .fc-place-order__section-placeholder",placeOrderRefreshRate:50},m=function(e){!e||!window.FCUtils&&"function"==typeof FCUtils.scrollToElement||FCUtils.scrollToElement(e,S.progressBarSelector)},y=function(){var e=document.querySelector(S.stepsWrapperSelector);return e?Array.from(e.querySelectorAll(S.stepSelector)):[]},f=function(e,t,r){var s,o,l;e&&(s=!0,e.classList.contains(S.isEditingClass)||(s=!1),l=e.querySelector(S.substepFieldsSelector),o=e.querySelector(S.substepTextSelector),CollapsibleBlock.collapse(l,t),CollapsibleBlock.expand(o,t,r),e.classList.remove(S.isEditingClass),(l=e.querySelector(S.substepEditButtonSelector))&&l.focus(),s)&&m(e)},v=function(e){for(var t=null,r=window.FCUtils&&Array.from(FCUtils.getFocusableElements(e)),s=0;s<r.length;s++){var o=r[s];if(FCUtils.isElementVisible(o)){t=o;break}}t&&t.focus()},C=function(e){b&&d(e).block({message:null,overlayCSS:{background:"#fff",opacity:.6}})},g=function(){var e=document.querySelector(S.currentStepSelector);if(e){var t=parseInt(e.getAttribute(S.stepIndexAttribute)),t=isNaN(t)?-1:t,e=document.querySelector(S.progressBarSelector);if(e){for(var r=e.querySelectorAll(S.progressBarItemSelector),s=r.length,o=0;o<r.length;o++){var l=r[o],c=parseInt(l.getAttribute(S.stepIndexAttribute));(c=isNaN(c)?-1:c)==t?l.classList.add(S.isCurrentClass):l.classList.remove(S.isCurrentClass),c<=t?l.classList.add(S.isCompleteClass):l.classList.remove(S.isCompleteClass)}var a=(a=t+1)<=s?a:s,s=e.querySelector(S.progressBarCurrentSelector);s&&(s.innerText=a)}}};return i.init=function(e){a||(S=FCUtils.extendObject(S,e),o(),window.ResizeObserver&&new ResizeObserver(FCUtils.debounce(o,S.placeOrderRefreshRate)).observe(document.body),window.addEventListener("click",l,!0),document.addEventListener("keydown",c,!0),b&&(d(document.body).on("updated_checkout",r),d(document.body).on("updated_checkout",s),d(document.body).on("updated_checkout",t),window.CollapsibleBlock)&&d(document.body).on("updated_checkout",CollapsibleBlock.enableFocusOnExpand),window.CollapsibleBlock&&CollapsibleBlock.disableFocusOnExpand(),document.body.classList.add(S.bodyClass),a=!0)},i});
//# sourceMappingURL=maps/checkout-steps-326.min.js.map
