((e,l)=>{"function"==typeof define&&define.amd?define([],l()):"object"==typeof exports?module.exports=l():e.MailcheckInit=l()})("undefined"!=typeof global?global:this.window||this.global,function(e){jQuery;function l(e){var l,t,s;r(),n&&(l=n.closest(o.inputFieldWrapperSelector),t=o.suggestionTemplate.replaceAll("{address}",e.address).replaceAll("{domain}",e.domain),t=o.suggestedElementTemplate.replaceAll("{suggestion}",t).replaceAll("{suggestion-value}",e.full),e=n.nextSibling,l.querySelector(o.errorMessageElementSelector)&&(e=(s=l.querySelectorAll(o.errorMessageElementSelector))[s.length-1].nextSibling),(s=document.createElement("div")).innerHTML=t,l.insertBefore(s.firstChild,e),s=null,n.classList.add(o.mailFieldSuggestedClass))}function t(e){var l;e.target.closest(o.suggestionApplySelector)&&(e.preventDefault(),null!==(e=e.target.closest(o.suggestionApplySelector)))&&null!==(l=e.closest(o.formFieldWrapperSelector))&&null!==(l=l.querySelector(o.mailFieldSelector))&&(l.value=e.getAttribute(o.suggestionValueAttr),n=l,r(),n=null,l.focus(),window.CheckoutValidation)&&CheckoutValidation.validateField(l,"apply-mailcheck-suggestion")}function s(e){e.defaultPrevented||FCUtils.keyboardKeys.ENTER!==e.key&&FCUtils.keyboardKeys.SPACE!==e.key||!e.target.closest(o.suggestionApplySelector)||t(e)}var i=!1,a={},o={mailFieldSelector:"[data-mailcheck]",formFieldWrapperSelector:".form-row",inputFieldWrapperSelector:".woocommerce-input-wrapper",suggestionElementSelector:"[data-mailcheck-suggestion]",suggestionApplySelector:"[data-mailcheck-apply]",errorMessageElementSelector:".woocommerce-error",mailFieldSuggestedClass:"has-email-suggestion",suggestionValueAttr:"data-suggestion-value",suggestedElementTemplate:'<div class="fc-mailcheck-suggestion" data-mailcheck-suggestion>Did you mean <a class="mailcheck-suggestion" href="#apply-suggestion" data-mailcheck-apply data-suggestion-value="{suggestion-value}">{suggestion}</a>?</div>',suggestionTemplate:'{address}@<span class="mailcheck-suggestion-domain">{domain}</span>'},n=null,r=function(){if(n){var e=n.closest(o.formFieldWrapperSelector);if(e){for(var l=e.querySelectorAll(o.suggestionElementSelector),t=0;t<l.length;t++)l[t].parentNode.removeChild(l[t]);n.classList.remove(o.mailFieldSuggestedClass)}}},c=FCUtils.debounce(function(e){void 0!==Mailcheck&&(n=e.target).matches(o.mailFieldSelector)&&(Mailcheck.run({email:n.value,suggested:l,empty:r}),n=null)},100);return a.init=function(e){i||(o=FCUtils.extendObject(!0,o,e),window.addEventListener("input",c,!0),window.addEventListener("click",t,!0),document.addEventListener("keydown",s,!0),i=!0)},a});