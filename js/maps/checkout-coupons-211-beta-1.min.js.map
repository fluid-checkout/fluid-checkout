{"version":3,"file":"../checkout-coupons-211-beta-1.min.js","sources":["checkout-coupons-211-beta-1.js"],"sourcesContent":["/**\r\n * Manage checkout steps state.\r\n *\r\n * DEPENDS ON:\r\n * - jQuery // Interact with WooCommerce events\r\n */\r\n(function (root, factory) {\r\n\tif ( typeof define === 'function' && define.amd ) {\r\n\t\tdefine([], factory(root));\r\n\t} else if ( typeof exports === 'object' ) {\r\n\t\tmodule.exports = factory(root);\r\n\t} else {\r\n\t\troot.CheckoutCoupons = factory(root);\r\n\t}\r\n})(typeof global !== 'undefined' ? global : this.window || this.global, function (root) {\r\n\r\n\t'use strict';\r\n\r\n\tvar $ = jQuery;\r\n\tvar _hasJQuery = ( $ != null );\r\n\r\n\tvar _hasInitialized = false;\r\n\tvar _publicMethods = {};\r\n\tvar _settings = {\r\n\t\tbodyClass: 'has-fc-checkout-coupons',\r\n\r\n\t\tuiProcessingClass: 'processing',\r\n\r\n\t\tsectionWrapperSelector: '.fc-step__substep',\r\n\t\tgeneralNoticesSelector: '.woocommerce-notices-wrapper',\r\n\t\tmessagesWrapperSelector: '.fc-coupon-code-messages',\r\n\t\tsuppressSuccessMessages: 'no',\r\n\r\n\t\tcouponAddedSectionSelector: '.fc-step__substep-text-content--coupon-codes',\r\n\t\tcouponFieldSelector: 'input[name=\"coupon_code\"]',\r\n\t\taddCouponButtonSelector: '.fc-coupon-code__apply',\r\n\t\tremoveCouponButtonSelector: '.woocommerce-remove-coupon',\r\n\t\t\r\n\t\tcouponCodeAttribute: 'data-coupon',\r\n\t\treferenceIdAttribute: 'data-reference-id',\r\n\t\texpansibleCouponSectionKeyAttribute: 'data-section-key',\r\n\r\n\t\texpansibleCouponContentSelector: '.fc-expansible-form-section__content',\r\n\t\texpansibleCouponToggleSelector: '.fc-expansible-form-section__toggle--###SECTION_KEY###',\r\n\t\texpansibleCouponToggleButtonSelector: '.expansible-section__toggle-plus--###SECTION_KEY###',\r\n\r\n\t\tsection_key_placeholder:  '###SECTION_KEY###',\r\n\r\n\t}\r\n\tvar _key = {\r\n\t\tENTER: 'Enter',\r\n\t\tSPACE: ' ',\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * METHODS\r\n\t */\r\n\r\n\r\n\r\n\t/*!\r\n\t* Merge two or more objects together.\r\n\t* (c) 2017 Chris Ferdinandi, MIT License, https://gomakethings.com\r\n\t* @param   {Boolean}  deep     If true, do a deep (or recursive) merge [optional]\r\n\t* @param   {Object}   objects  The objects to merge together\r\n\t* @returns {Object}            Merged values of defaults and options\r\n\t*/\r\n\tvar extend = function () {\r\n\t\t// Variables\r\n\t\tvar extended = {};\r\n\t\tvar deep = false;\r\n\t\tvar i = 0;\r\n\r\n\t\t// Check if a deep merge\r\n\t\tif ( Object.prototype.toString.call( arguments[0] ) === '[object Boolean]' ) {\r\n\t\t\tdeep = arguments[0];\r\n\t\t\ti++;\r\n\t\t}\r\n\r\n\t\t// Merge the object into the extended object\r\n\t\tvar merge = function (obj) {\r\n\t\t\tfor (var prop in obj) {\r\n\t\t\t\tif (obj.hasOwnProperty(prop)) {\r\n\t\t\t\t\t// If property is an object, merge properties\r\n\t\t\t\t\tif (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') {\r\n\t\t\t\t\t\textended[prop] = extend(extended[prop], obj[prop]);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\textended[prop] = obj[prop];\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\t// Loop through each object and conduct a merge\r\n\t\tfor (; i < arguments.length; i++) {\r\n\t\t\tvar obj = arguments[i];\r\n\t\t\tmerge(obj);\r\n\t\t}\r\n\r\n\t\treturn extended;\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Add notices in the coupon code section.\r\n\t *\r\n\t * @param   HTML  content  HTML content to be displayed.\r\n\t */\r\n\tvar showNotices = function( content, referenceElement ) {\r\n\t\t// Maybe get specific messages wrapper\r\n\t\tvar messagesWrapper;\r\n\t\tvar sectionWrapper = referenceElement ? referenceElement.closest( _settings.sectionWrapperSelector ) : null;\r\n\t\tif ( sectionWrapper ) {\r\n\t\t\tmessagesWrapper = sectionWrapper.querySelector( _settings.messagesWrapperSelector );\r\n\t\t}\r\n\t\telse {\r\n\t\t\tmessagesWrapper = document.querySelector( _settings.generalNoticesSelector );\r\n\t\t}\r\n\t\t\r\n\t\t// Add message\r\n\t\tif ( messagesWrapper ) {\r\n\t\t\tmessagesWrapper.innerHTML = content;\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Remove all notices from the coupon code section.\r\n\t *\r\n\t * @param   HTML  content  HTML content to be displayed.\r\n\t */\r\n\tvar clearNotices = function() {\r\n\t\tvar generalNotices = document.querySelector( _settings.generalNoticesSelector );\r\n\t\tif ( generalNotices ) {\r\n\t\t\tgeneralNotices.innerHTML = '';\r\n\t\t}\r\n\r\n\t\tvar messagesWrapper = document.querySelector( _settings.messagesWrapperSelector );\r\n\t\tif ( messagesWrapper ) {\r\n\t\t\tmessagesWrapper.innerHTML = '';\r\n\t\t}\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Process adding a coupon code to the cart from the add coupon button.\r\n\t *\r\n\t * @param   HTMLElement  referenceElement  The element which was used to trigger adding the coupon.\r\n\t */\r\n\tvar processAddCoupon = function( referenceElement ) {\r\n\t\tvar couponCode = '';\r\n\r\n\t\t// Try to get coupon code from attributes\r\n\t\tif ( referenceElement && referenceElement.hasAttribute( _settings.couponCodeAttribute ) ) {\r\n\t\t\tcouponCode = referenceElement.getAttribute( _settings.couponCodeAttribute );\r\n\t\t}\r\n\r\n\t\t// Try to get coupon code from coupon field\r\n\t\tif ( ! couponCode || '' == couponCode ) {\r\n\t\t\tvar couponSection = referenceElement.closest( '.fc-coupon-code-section' );\r\n\t\t\tvar couponField = couponSection.querySelector( _settings.couponFieldSelector );\r\n\r\n\t\t\t// Bail if coupon code field was not found\r\n\t\t\tif ( ! couponField ) { return; }\r\n\r\n\t\t\t// Focus on add coupon button and bail if coupon field is empty\r\n\t\t\tif ( '' === couponField.value.trim() ) {\r\n\t\t\t\tcouponField.value = ''; // Clear space chars if any\r\n\t\t\t\tcouponField.focus();\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\r\n\t\t\tcouponCode = couponField.value;\r\n\t\t}\r\n\r\n\t\t// Bail if coupon code was not provided\r\n\t\tif ( ! couponCode || '' == couponCode ) { return; }\r\n\r\n\t\t_publicMethods.addCouponCode( couponCode, referenceElement );\r\n\t}\r\n\t\r\n\t/**\r\n\t * Process removing a coupon code to the cart from the add coupon button.\r\n\t *\r\n\t * @param   HTMLElement  referenceElement  The remove coupon button element.\r\n\t */\r\n\tvar processRemoveCoupon = function( referenceElement ) {\r\n\t\t// Bail if add coupon button not provided\r\n\t\tif ( ! referenceElement ) { return; }\r\n\r\n\t\tvar couponCode = '';\r\n\r\n\t\t// Try to get coupon code from button attributes\r\n\t\tif ( referenceElement.hasAttribute( _settings.couponCodeAttribute ) ) {\r\n\t\t\tcouponCode = referenceElement.getAttribute( _settings.couponCodeAttribute );\r\n\t\t}\r\n\r\n\t\t// Bail if coupon code was not provided\r\n\t\tif ( ! couponCode || '' == couponCode ) { return; }\r\n\r\n\t\t_publicMethods.removeCouponCode( couponCode, referenceElement );\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Handle document clicks and route to the appropriate function.\r\n\t */\r\n\tvar handleClick = function( e ) {\r\n\t\t\r\n\t\t// ADD COUPON\r\n\t\tif ( e.target.closest( _settings.addCouponButtonSelector ) ) {\r\n\t\t\te.preventDefault();\r\n\t\t\tvar addCouponButton = e.target.closest( _settings.addCouponButtonSelector );\r\n\t\t\tprocessAddCoupon( addCouponButton );\r\n\t\t}\r\n\t\t// REMOVE COUPON\r\n\t\telse if ( e.target.closest( _settings.removeCouponButtonSelector ) ) {\r\n\t\t\te.preventDefault();\r\n\t\t\tvar removeCouponButton = e.target.closest( _settings.removeCouponButtonSelector );\r\n\t\t\tprocessRemoveCoupon( removeCouponButton );\r\n\t\t}\r\n\t\t\r\n\t};\r\n\r\n\t/**\r\n\t * Handle keypress event.\r\n\t */\r\n\t var handleKeyDown = function( e ) {\r\n\t\t// Should do nothing if the default action has been cancelled\r\n\t\tif ( e.defaultPrevented ) { return; }\r\n\r\n\t\t// ENTER on input fields\r\n\t\tif ( e.key == _key.ENTER && e.target.closest( _settings.couponFieldSelector ) ) {\r\n\t\t\t// Prevents submitting form\r\n\t\t\te.preventDefault();\r\n\r\n\t\t\t// ADD COUPON\r\n\t\t\tprocessAddCoupon( e.target.closest( _settings.couponFieldSelector ) );\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Use the same method that WooCommerce uses to block other parts of the checkout form while updating.\r\n\t * The UI is unblocked by the WooCommerce `checkout.js` script (which is replaced with a modified version but keeps the same behavior)\r\n\t * using the checkout fragment selector, then unblocking after the checkout update is completed.\r\n\t *\r\n\t * @param   HTMLElement  element  Element to block the UI and show the loading indicator.\r\n\t */\r\n\t_publicMethods.blockUI = function( element ) {\r\n\t\t// Bail if element is invalid\r\n\t\tif ( ! element ) { return; }\r\n\r\n\t\t$( element ).addClass( _settings.uiProcessingClass ).block( {\r\n\t\t\tmessage: null,\r\n\t\t\toverlayCSS: {\r\n\t\t\t\tbackground: '#fff',\r\n\t\t\t\topacity: 0.6\r\n\t\t\t}\r\n\t\t} );\r\n\t}\r\n\r\n\t/**\r\n\t * Unblock UI element to be used again.\r\n\t *\r\n\t * @param   HTMLElement  element  Element to get the UI unblocked.\r\n\t *\r\n\t * @see  blockUI\r\n\t */\r\n\t_publicMethods.unblockUI = function( element ) {\r\n\t\t$( element ).removeClass( _settings.uiProcessingClass ).unblock();\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Add a coupon code to the cart.\r\n\t *\r\n\t * @param   string  couponCode  The coupon code to be added to the cart.\r\n\t */\r\n\t_publicMethods.addCouponCode = function( couponCode, referenceElement ) {\r\n\t\t// Bail if coupon code was not provided\r\n\t\tif ( ! couponCode || '' == couponCode ) { return; }\r\n\r\n\t\tclearNotices();\r\n\r\n\t\t// Get reference id and save to reference element\r\n\t\tvar reference_id = Math.floor( Math.random() * 1000 );\r\n\t\tif ( referenceElement ) {\r\n\t\t\treferenceElement.setAttribute( _settings.referenceIdAttribute, reference_id );\r\n\t\t}\r\n\r\n\t\t// Block coupon section\r\n\t\tvar couponAddedSection = document.querySelector( _settings.couponAddedSectionSelector );\r\n\t\t_publicMethods.blockUI( couponAddedSection );\r\n\r\n\t\t// Add security nonce\r\n\t\tvar data = {\r\n\t\t\tsecurity: _settings.addCouponCodeNonce,\r\n\t\t\tcoupon_code: couponCode,\r\n\t\t\treference_id: reference_id,\r\n\t\t}\r\n\r\n\t\t$.ajax({\r\n\t\t\ttype:\t\t'POST',\r\n\t\t\turl:\t\tfcSettings.wcAjaxUrl.replace( '%%endpoint%%', 'fc_add_coupon_code' ),\r\n\t\t\tdata:\t\tdata,\r\n\t\t\tdataType:   'json',\r\n\t\t\tsuccess:\tfunction( response ) {\r\n\r\n\t\t\t\t// Get back the reference id\r\n\t\t\t\tvar referenceElement;\r\n\t\t\t\tif ( response.reference_id ) {\r\n\t\t\t\t\treferenceElement = document.querySelector( '[' + _settings.referenceIdAttribute + '=\"' + response.reference_id + '\"]' );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Maybe process success\r\n\t\t\t\tif ( response.result && 'success' === response.result ) {\r\n\t\t\t\t\t// Maybe add messages\r\n\t\t\t\t\tif ( response.message && 'yes' !== _settings.suppressSuccessMessages ) {\r\n\t\t\t\t\t\tshowNotices( response.message, referenceElement );\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Maybe remove coupon code value from the field\r\n\t\t\t\t\tvar couponField = document.querySelector( _settings.couponFieldSelector );\r\n\t\t\t\t\tif ( couponField ) {\r\n\t\t\t\t\t\tcouponField.value = '';\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Maybe close the coupon code field section\r\n\t\t\t\t\tif ( window.CollapsibleBlock ) {\r\n\r\n\t\t\t\t\t\t// Get expansible content section\r\n\t\t\t\t\t\tvar expansibleCouponContent = referenceElement.closest( _settings.expansibleCouponContentSelector );\r\n\r\n\t\t\t\t\t\t// Maybe collapse/expanse sections after adding coupon\r\n\t\t\t\t\t\tif ( expansibleCouponContent ) {\r\n\t\t\t\t\t\t\t// Collapse the coupon code field content section\r\n\t\t\t\t\t\t\tCollapsibleBlock.collapse( expansibleCouponContent );\r\n\r\n\t\t\t\t\t\t\t// Get section key and toggle elements\r\n\t\t\t\t\t\t\tvar section_key = expansibleCouponContent.getAttribute( _settings.expansibleCouponSectionKeyAttribute );\r\n\t\t\t\t\t\t\tvar expansibleCouponToggle = document.querySelector( _settings.expansibleCouponToggleSelector.replace( _settings.section_key_placeholder, section_key ) );\r\n\t\t\t\t\t\t\tvar expansibleCouponToggleButton = document.querySelector( _settings.expansibleCouponToggleButtonSelector.replace( _settings.section_key_placeholder, section_key ) );\r\n\r\n\t\t\t\t\t\t\t// Maybe expand coupon code toggle section\r\n\t\t\t\t\t\t\tif ( expansibleCouponToggle ) {\r\n\t\t\t\t\t\t\t\tCollapsibleBlock.expand( expansibleCouponToggle );\r\n\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t// Maybe focus back to the add coupon code button\r\n\t\t\t\t\t\t\tif ( expansibleCouponToggleButton ) {\r\n\t\t\t\t\t\t\t\texpansibleCouponToggleButton.focus();\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t$( document.body ).trigger( 'wc_fragment_refresh' );\r\n\t\t\t\t\t$( document.body ).trigger( 'applied_coupon_in_checkout', [ data.coupon_code ] );\r\n\t\t\t\t\t$( document.body ).trigger( 'update_checkout', { update_shipping_method: false } );\r\n\t\t\t\t}\r\n\t\t\t\t// Maybe process error\r\n\t\t\t\telse if ( response.result && 'error' === response.result ) {\r\n\t\t\t\t\t// Display new messages\r\n\t\t\t\t\tshowNotices( response.message, referenceElement );\r\n\r\n\t\t\t\t\t// Unblock coupon section\r\n\t\t\t\t\tvar couponAddedSection = document.querySelector( _settings.couponAddedSectionSelector );\r\n\t\t\t\t\tif ( couponAddedSection ) {\r\n\t\t\t\t\t\t_publicMethods.unblockUI( couponAddedSection );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Remove coupon from the cart.\r\n\t *\r\n\t * @param   string  couponCode  The coupon code to be removed from the cart.\r\n\t */\r\n\t_publicMethods.removeCouponCode = function( couponCode, referenceElement ) {\r\n\t\t// Bail if coupon code was not provided\r\n\t\tif ( ! couponCode || '' == couponCode ) { return; }\r\n\r\n\t\tclearNotices();\r\n\r\n\t\t// Get reference id and save to reference element\r\n\t\tvar reference_id = Math.floor( Math.random() * 1000 );\r\n\t\tif ( referenceElement ) {\r\n\t\t\treferenceElement.setAttribute( _settings.referenceIdAttribute, reference_id );\r\n\t\t}\r\n\r\n\t\t// Block coupon section\r\n\t\tvar couponAddedSection = document.querySelector( _settings.couponAddedSectionSelector );\r\n\t\t_publicMethods.blockUI( couponAddedSection );\r\n\r\n\t\t// Add security nonce\r\n\t\tvar data = {\r\n\t\t\tsecurity: _settings.removeCouponCodeNonce,\r\n\t\t\tcoupon_code: couponCode,\r\n\t\t\treference_id: reference_id,\r\n\t\t}\r\n\r\n\t\t$.ajax({\r\n\t\t\ttype:\t\t'POST',\r\n\t\t\turl:\t\tfcSettings.wcAjaxUrl.replace( '%%endpoint%%', 'fc_remove_coupon_code' ),\r\n\t\t\tdata:\t\tdata,\r\n\t\t\tdataType:   'json',\r\n\t\t\tsuccess:\tfunction( response ) {\r\n\t\t\t\t// Get back the reference id\r\n\t\t\t\tvar referenceElement;\r\n\t\t\t\tif ( response.reference_id ) {\r\n\t\t\t\t\treferenceElement = document.querySelector( '[' + _settings.referenceIdAttribute + '=\"' + response.reference_id + '\"]' );\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Maybe process success\r\n\t\t\t\tif ( response.result && 'success' === response.result ) {\r\n\t\t\t\t\t// Maybe add messages\r\n\t\t\t\t\tif ( response.message && 'yes' !== _settings.suppressSuccessMessages ) {\r\n\t\t\t\t\t\tshowNotices( response.message, referenceElement );\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t$( document.body ).trigger( 'wc_fragment_refresh' );\r\n\t\t\t\t\t$( document.body ).trigger( 'removed_coupon_in_checkout', [ data.coupon_code ] );\r\n\t\t\t\t\t$( document.body ).trigger( 'update_checkout', { update_shipping_method: false } );\r\n\t\t\t\t}\r\n\t\t\t\t// Maybe process error\r\n\t\t\t\telse if ( response.result && 'error' === response.result ) {\r\n\t\t\t\t\t// Display new messages\r\n\t\t\t\t\tshowNotices( response.message, referenceElement );\r\n\r\n\t\t\t\t\t// Unblock coupon section\r\n\t\t\t\t\tvar couponAddedSection = document.querySelector( _settings.couponAddedSectionSelector );\r\n\t\t\t\t\tif ( couponAddedSection ) {\r\n\t\t\t\t\t\t_publicMethods.unblockUI( couponAddedSection );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t});\r\n\t};\r\n\r\n\r\n\r\n\t/**\r\n\t * Finish to initialize component and set related handlers.\r\n\t */\r\n\tvar finishInit = function() {\r\n\t\t// Add event listeners\r\n\t\twindow.addEventListener( 'click', handleClick );\r\n\t\tdocument.addEventListener( 'keydown', handleKeyDown, true );\r\n\r\n\t\t// Add init class\r\n\t\tdocument.body.classList.add( _settings.bodyClass );\r\n\r\n\t\t_hasInitialized = true;\r\n\t}\r\n\r\n\r\n\r\n\t/**\r\n\t * Initialize component and set related handlers.\r\n\t */\r\n\t_publicMethods.init = function( options ) {\r\n\t\tif ( _hasInitialized ) return;\r\n\r\n\t\t// Merge settings\r\n\t\t_settings = extend( _settings, options );\r\n\r\n\t\t// Finish initialization, maybe load dependencies first\r\n\t\tif ( window.CollapsibleBlock ) {\r\n\t\t\tfinishInit();\r\n\t\t}\r\n\t\telse if( window.RequireBundle ) {\r\n\t\t\tRequireBundle.require( [ 'collapsible-block' ], function() { finishInit(); } );\r\n\t\t}\r\n\t};\r\n\r\n\r\n\r\n\t//\r\n\t// Public APIs\r\n\t//\r\n\treturn _publicMethods;\r\n\r\n});\r\n"],"names":["root","factory","define","amd","exports","module","CheckoutCoupons","global","this","window","extend","extended","deep","i","Object","prototype","toString","call","arguments","length","prop","obj","hasOwnProperty","showNotices","content","referenceElement","messagesWrapper","sectionWrapper","closest","_settings","sectionWrapperSelector","querySelector","messagesWrapperSelector","document","generalNoticesSelector","innerHTML","clearNotices","generalNotices","handleClick","e","removeCouponButton","target","addCouponButtonSelector","preventDefault","addCouponButton","processAddCoupon","removeCouponButtonSelector","processRemoveCoupon","handleKeyDown","defaultPrevented","key","_key","ENTER","couponFieldSelector","finishInit","addEventListener","body","classList","add","bodyClass","_hasInitialized","$","jQuery","_publicMethods","uiProcessingClass","suppressSuccessMessages","couponAddedSectionSelector","couponCodeAttribute","referenceIdAttribute","expansibleCouponSectionKeyAttribute","expansibleCouponContentSelector","expansibleCouponToggleSelector","expansibleCouponToggleButtonSelector","section_key_placeholder","SPACE","couponCode","hasAttribute","getAttribute","couponField","value","trim","focus","addCouponCode","removeCouponCode","blockUI","element","addClass","block","message","overlayCSS","background","opacity","unblockUI","removeClass","unblock","reference_id","data","Math","floor","random","setAttribute","couponAddedSection","security","addCouponCodeNonce","coupon_code","ajax","type","url","fcSettings","wcAjaxUrl","replace","dataType","success","response","expansibleCouponToggleButton","result","CollapsibleBlock","expansibleCouponContent","collapse","section_key","expansibleCouponToggle","expand","trigger","update_shipping_method","removeCouponCodeNonce","init","options","RequireBundle","require"],"mappings":"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"}