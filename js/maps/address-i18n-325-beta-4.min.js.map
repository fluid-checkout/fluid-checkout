{"version":3,"file":"../address-i18n-325-beta-4.min.js","sources":["address-i18n-325-beta-4.js"],"sourcesContent":["/**\r\n * Address Internationalization Script\r\n * \r\n * Replaces the original WooCommerce `address-i18n.js`.\r\n */\r\n\r\n/*global wc_address_i18n_params */\r\njQuery( function( $ ) {\r\n\r\n\t// wc_address_i18n_params is required to continue, ensure the object exists\r\n\tif ( typeof wc_address_i18n_params === 'undefined' ) {\r\n\t\treturn false;\r\n\t}\r\n\r\n\t// CHANGE: Add settings\r\n\tvar _settings = {\r\n\t\tformRowSelector: '.form-row',\r\n\t\tformRowExpansibleSelector: '.form-row.fc-expansible-form-section',\r\n\t\texpansibleToggleSelector: '.fc-expansible-form-section__toggle',\r\n\t\texpansibleContentSelector: '.fc-expansible-form-section__content',\r\n\t\tinputSelector: 'input, select, textarea',\r\n\t\tcountryFieldsSelector: '#billing_country, #shipping_country, #country',\r\n\t\taddressFieldGroupSelector: '.woocommerce-billing-fields, .woocommerce-shipping-fields, .woocommerce-address-fields',\r\n\r\n\t\toverrideLocaleAttributes: [],\r\n\t};\r\n\tif ( FCUtils && window.fcSettings && window.fcSettings.addressI18n ) {\r\n\t\t_settings = FCUtils.extendObject( true, _settings, window.fcSettings.addressI18n );\r\n\t}\r\n\t// CHANGE: END - Add settings\r\n\r\n\tvar locale_json = wc_address_i18n_params.locale.replace( /&quot;/g, '\"' ), locale = JSON.parse( locale_json );\r\n\r\n\tfunction field_is_required( field, is_required ) {\r\n\t\tif ( is_required ) {\r\n\t\t\tfield.find( 'label .optional' ).remove();\r\n\t\t\tfield.addClass( 'validate-required' );\r\n\r\n\t\t\tif ( field.find( 'label .required' ).length === 0 ) {\r\n\t\t\t\tfield.find( 'label' ).append(\r\n\t\t\t\t\t'&nbsp;<abbr class=\"required\" title=\"' +\r\n\t\t\t\t\twc_address_i18n_params.i18n_required_text +\r\n\t\t\t\t\t'\">*</abbr>'\r\n\t\t\t\t);\r\n\t\t\t}\r\n\t\t} else {\r\n\t\t\tfield.find( 'label .required' ).remove();\r\n\t\t\tfield.removeClass( 'validate-required woocommerce-invalid woocommerce-invalid-required-field' );\r\n\r\n\t\t\tif ( field.find( 'label .optional' ).length === 0 ) {\r\n\t\t\t\tfield.find( 'label' ).append( '&nbsp;<span class=\"optional\">(' + wc_address_i18n_params.i18n_optional_text + ')</span>' );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// Handle locale\r\n\t// CHANGE: Extract function to process country to state changing as it needs to be used when event `updated_checkout` is triggered\r\n\tvar process_country_to_state_changing = function( event, country, wrapper ) {\r\n\t\tvar thisform = wrapper, thislocale;\r\n\r\n\t\t// CHANGE: Get current focused element and its value\r\n\t\tvar currentFocusedElement = document.activeElement;\r\n\r\n\t\tif ( typeof locale[ country ] !== 'undefined' ) {\r\n\t\t\tthislocale = locale[ country ];\r\n\t\t} else {\r\n\t\t\tthislocale = locale['default'];\r\n\t\t}\r\n\r\n\t\t// CHANGE: Add selector for address fields without prefix\r\n\t\tvar $postcodefield = thisform.find( '#postcode_field, #billing_postcode_field, #shipping_postcode_field' ),\r\n\t\t\t$cityfield     = thisform.find( '#city_field, #billing_city_field, #shipping_city_field' ),\r\n\t\t\t$statefield    = thisform.find( '#state_field, #billing_state_field, #shipping_state_field' );\r\n\r\n\t\tif ( ! $postcodefield.attr( 'data-o_class' ) ) {\r\n\t\t\t$postcodefield.attr( 'data-o_class', $postcodefield.attr( 'class' ) );\r\n\t\t\t$cityfield.attr( 'data-o_class', $cityfield.attr( 'class' ) );\r\n\t\t\t$statefield.attr( 'data-o_class', $statefield.attr( 'class' ) );\r\n\t\t}\r\n\r\n\t\tvar locale_fields = JSON.parse( wc_address_i18n_params.locale_fields );\r\n\r\n\t\t$.each( locale_fields, function( key, value ) {\r\n\r\n\t\t\tvar field       = thisform.find( value ),\r\n\t\t\t\tfieldLocale = $.extend( true, {}, locale['default'][ key ], thislocale[ key ] );\r\n\r\n\t\t\t// CHANGE: Maybe replace field attributes from locale with attributes from checkout fields\r\n\t\t\tif ( _settings.overrideLocaleAttributes.length > 0 && window.fcSettings && window.fcSettings.checkoutFields ) {\r\n\t\t\t\t// Determine address field group\r\n\t\t\t\tvar addressFieldGroup = 'address';\r\n\t\t\t\tif ( wrapper.hasClass( 'woocommerce-billing-fields' ) ) {\r\n\t\t\t\t\taddressFieldGroup = 'billing';\r\n\t\t\t\t} else if ( wrapper.hasClass( 'woocommerce-shipping-fields' ) ) {\r\n\t\t\t\t\taddressFieldGroup = 'shipping';\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Determine field key prefix\r\n\t\t\t\tvar field_key_prefix = addressFieldGroup + '_';\r\n\r\n\t\t\t\t// Determine field key\r\n\t\t\t\tvar field_key = key;\r\n\t\t\t\tif ( 'address' !== addressFieldGroup ) {\r\n\t\t\t\t\tfield_key = field_key_prefix + key;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Get fields for the current group\r\n\t\t\t\tvar groupFields = window.fcSettings.checkoutFields[ addressFieldGroup ];\r\n\r\n\t\t\t\t// Check whether group fields exist\r\n\t\t\t\tif ( groupFields ) {\r\n\t\t\t\t\t// Get field attributes for the current field\r\n\t\t\t\t\tvar checkoutField = groupFields[ field_key ];\r\n\r\n\t\t\t\t\t// Check whether field attributes exist\r\n\t\t\t\t\tif ( checkoutField ) {\r\n\t\t\t\t\t\t// Maybe replace field attribute\r\n\t\t\t\t\t\t$.each( checkoutField, function( attr_key, attr_value ) {\r\n\t\t\t\t\t\t\tif ( _settings.overrideLocaleAttributes.indexOf( attr_key ) > -1 ) {\r\n\t\t\t\t\t\t\t\tfieldLocale[ attr_key ] = attr_value;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} );\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\t// CHANGE: END - Maybe replace field attributes from locale with attributes from checkout fields\r\n\r\n\t\t\t// Labels.\r\n\t\t\tif ( typeof fieldLocale.label !== 'undefined' ) {\r\n\t\t\t\tfield.find( 'label' ).html( fieldLocale.label );\r\n\t\t\t}\r\n\r\n\t\t\t// Placeholders.\r\n\t\t\tif ( typeof fieldLocale.placeholder !== 'undefined' ) {\r\n\t\t\t\tfield.find( ':input' ).attr( 'placeholder', fieldLocale.placeholder );\r\n\t\t\t\tfield.find( ':input' ).attr( 'data-placeholder', fieldLocale.placeholder );\r\n\t\t\t\tfield.find( '.select2-selection__placeholder' ).text( fieldLocale.placeholder );\r\n\t\t\t}\r\n\r\n\t\t\t// Use the i18n label as a placeholder if there is no label element and no i18n placeholder.\r\n\t\t\tif (\r\n\t\t\t\ttypeof fieldLocale.placeholder === 'undefined' &&\r\n\t\t\t\ttypeof fieldLocale.label !== 'undefined' &&\r\n\t\t\t\t! field.find( 'label' ).length\r\n\t\t\t) {\r\n\t\t\t\tfield.find( ':input' ).attr( 'placeholder', fieldLocale.label );\r\n\t\t\t\tfield.find( ':input' ).attr( 'data-placeholder', fieldLocale.label );\r\n\t\t\t\tfield.find( '.select2-selection__placeholder' ).text( fieldLocale.label );\r\n\t\t\t}\r\n\r\n\t\t\t// Required.\r\n\t\t\tif ( typeof fieldLocale.required !== 'undefined' ) {\r\n\t\t\t\tfield_is_required( field, fieldLocale.required );\r\n\t\t\t} else {\r\n\t\t\t\tfield_is_required( field, false );\r\n\t\t\t}\r\n\r\n\t\t\t// Priority.\r\n\t\t\tif ( typeof fieldLocale.priority !== 'undefined' ) {\r\n\t\t\t\tfield.data( 'priority', fieldLocale.priority );\r\n\t\t\t}\r\n\r\n\t\t\t// Hidden fields.\r\n\t\t\tif ( 'state' !== key ) {\r\n\t\t\t\tif ( typeof fieldLocale.hidden !== 'undefined' && true === fieldLocale.hidden ) {\r\n\t\t\t\t\tfield.hide().find( ':input' ).val( '' );\r\n\t\t\t\t} else {\r\n\t\t\t\t\tfield.show();\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// CHANGE: Handle collapsible fields state\r\n\t\t\tvar formRow, fieldCollapsibleToggle, fieldCollapsibleContent;\r\n\t\t\tif ( window.CollapsibleBlock && field.length > 0 ) {\r\n\t\t\t\tformRow = field[0].closest( _settings.formRowExpansibleSelector );\r\n\t\t\t\tif ( formRow ) {\r\n\t\t\t\t\tfieldCollapsibleToggle = formRow.querySelector( _settings.expansibleToggleSelector );\r\n\t\t\t\t\tfieldCollapsibleContent = formRow.querySelector( _settings.expansibleContentSelector );\r\n\t\t\t\t\tif ( fieldCollapsibleToggle && fieldCollapsibleContent ) {\r\n\t\t\t\t\t\tvar expandContent = false;\r\n\r\n\t\t\t\t\t\t// Required fields\r\n\t\t\t\t\t\tif ( typeof fieldLocale.required !== 'undefined' && true === fieldLocale.required ) {\r\n\t\t\t\t\t\t\texpandContent = true;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Optional fields\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tvar input = field[0].querySelector( _settings.inputSelector );\r\n\t\t\t\t\t\t\tif ( input && '' !== input.value ) {\r\n\t\t\t\t\t\t\t\texpandContent = true;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Optional fields that are also hidden\r\n\t\t\t\t\t\tif ( 'state' !== key && true === fieldLocale.hidden && ( typeof fieldLocale.required === 'undefined' || false === fieldLocale.required ) ) {\r\n\t\t\t\t\t\t\t// Should expand field contents to avoid showing the \"+ Add\" link button when the field is hidden\r\n\t\t\t\t\t\t\texpandContent = true;\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// Expand content\r\n\t\t\t\t\t\tif ( expandContent ) {\r\n\t\t\t\t\t\t\tCollapsibleBlock.collapse( fieldCollapsibleToggle, false ); // Collapse without transitions\r\n\t\t\t\t\t\t\tCollapsibleBlock.expand( fieldCollapsibleContent, false, false ); // Expand without transitions and without setting focus\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t// Collapse content\r\n\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\tCollapsibleBlock.collapse( fieldCollapsibleContent, false ); // Collapse without transitions\r\n\t\t\t\t\t\t\tCollapsibleBlock.expand( fieldCollapsibleToggle, false, false ); // Expand without transitions and without setting focus\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t// CHANGE: END - Handle collapsible fields state\r\n\r\n\t\t\t// Class changes.\r\n\t\t\tif ( Array.isArray( fieldLocale.class ) ) {\r\n\t\t\t\t// CHANGE: Add custom form row classes to be removed\r\n\t\t\t\tfield.removeClass( 'form-row-first form-row-last form-row-wide form-row-one-third form-row-two-thirds form-row-middle' );\r\n\t\t\t\tfield.addClass( fieldLocale.class.join( ' ' ) );\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tvar fieldsets = $(\r\n\t\t\t'.woocommerce-billing-fields__field-wrapper,' +\r\n\t\t\t'.woocommerce-shipping-fields__field-wrapper,' +\r\n\t\t\t'.woocommerce-address-fields__field-wrapper,' +\r\n\t\t\t'.woocommerce-additional-fields__field-wrapper .woocommerce-account-fields'\r\n\t\t);\r\n\r\n\t\tfieldsets.each( function( index, fieldset ) {\r\n\t\t\t// CHANGE: Change form row selector to exclude nested `.form-row` elements (used for expansible form fields)\r\n\t\t\tvar rows    = $( fieldset ).find( '.form-row:not( .form-row .form-row )' );\r\n\t\t\tvar wrapper = rows.first().parent();\r\n\r\n\t\t\t// Before sorting, ensure all fields have a priority for bW compatibility.\r\n\t\t\tvar last_priority = 0;\r\n\r\n\t\t\trows.each( function() {\r\n\t\t\t\tif ( ! $( this ).data( 'priority' ) ) {\r\n\t\t\t\t\t\t$( this ).data( 'priority', last_priority + 1 );\r\n\t\t\t\t}\r\n\t\t\t\tlast_priority = $( this ).data( 'priority' );\r\n\t\t\t} );\r\n\r\n\t\t\t// Sort the fields.\r\n\t\t\trows.sort( function( a, b ) {\r\n\t\t\t\tvar asort = parseInt( $( a ).data( 'priority' ), 10 ),\r\n\t\t\t\t\tbsort = parseInt( $( b ).data( 'priority' ), 10 );\r\n\r\n\t\t\t\tif ( asort > bsort ) {\r\n\t\t\t\t\treturn 1;\r\n\t\t\t\t}\r\n\t\t\t\tif ( asort < bsort ) {\r\n\t\t\t\t\treturn -1;\r\n\t\t\t\t}\r\n\t\t\t\treturn 0;\r\n\t\t\t});\r\n\r\n\t\t\t// CHANGE: Detach rows and re-attach them in the correct order, without moving the row of the field currently focused.\r\n\t\t\t// This prevents the field from losing focus and keeps the virtual keyboard on mobile devices open.\r\n\r\n\t\t\t// Get focused row\r\n\t\t\tvar focusedRow, referenceNode;\r\n\t\t\tvar before = true;\r\n\t\t\tvar rowsBefore = [], rowsAfter = [];\r\n\t\t\tvar _rows = rows.toArray();\r\n\t\t\tfor ( var i = 0; i < _rows.length; i++) {\r\n\t\t\t\tvar row = _rows[ i ];\r\n\t\t\t\tif ( row.contains( currentFocusedElement ) ) {\r\n\t\t\t\t\tfocusedRow = row;\r\n\t\t\t\t\treferenceNode = focusedRow;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Iterate over rows\r\n\t\t\tfor ( var i = 0; i < _rows.length; i++) {\r\n\t\t\t\tvar row = _rows[ i ];\r\n\r\n\t\t\t\t// Maybe skip row with the field currently focused\r\n\t\t\t\tif ( row === focusedRow ) {\r\n\t\t\t\t\tbefore = false;\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Set reference node to last child\r\n\t\t\t\tif ( ! focusedRow ) {\r\n\t\t\t\t\treferenceNode = row.parentNode.lastChild;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Maybe add row to the before list\r\n\t\t\t\tif ( before ) {\r\n\t\t\t\t\trowsBefore.push( row );\r\n\t\t\t\t}\r\n\t\t\t\t// Maybe add row to the after list\r\n\t\t\t\telse {\r\n\t\t\t\t\trowsAfter.push( row );\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Re-attach rows before the field currently focused\r\n\t\t\tfor ( var j = 0; j < rowsBefore.length; j++ ) {\r\n\t\t\t\tvar row = rowsBefore[ j ];\r\n\t\t\t\trow.parentNode.insertBefore( row, referenceNode );\r\n\t\t\t}\r\n\r\n\t\t\t// Re-attach rows after the field currently focused\r\n\t\t\trowsAfter = rowsAfter.reverse();\r\n\t\t\tfor ( var j = 0; j < rowsAfter.length; j++ ) {\r\n\t\t\t\tvar row = rowsAfter[ j ];\r\n\t\t\t\trow.parentNode.insertBefore( row, referenceNode.nextSibling );\r\n\t\t\t}\r\n\r\n\t\t\t// CHANGE: END - Detach rows and re-attach them in the correct order, without moving the row of the field currently focused.\r\n\t\t} );\r\n\r\n\t\t// CHANGE: Re-set focus to the element previously with focus\r\n\t\tFCUtils.maybeRefocusElement( currentFocusedElement );\r\n\t};\r\n\r\n\t// CHANGE: END - Extract function to process country to state changing as it needs to be used when event `updated_checkout` is triggered\r\n\t// CHANGE: Add function to handle country to state changing when event `updated_checkout` is triggered\r\n\tvar process_country_to_state_changing_updated_checkout = function() {\t\t\r\n\t\t// Get all country fields on the page\r\n\t\tvar country_fields = document.querySelectorAll( _settings.countryFieldsSelector );\r\n\r\n\t\t// Iterate all country fields and process country changing event for each one\r\n\t\tif ( country_fields.length > 0 ) {\r\n\t\t\tfor ( var i = 0; i < country_fields.length; i++ ) {\r\n\t\t\t\tvar field = country_fields[i];\r\n\t\t\t\tvar wrapper = field.closest( _settings.addressFieldGroupSelector );\r\n\t\t\t\tprocess_country_to_state_changing( null, field.value, $( wrapper ) );\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t// CHANGE: END - Add function to handle country to state changing when event `updated_checkout` is triggered\r\n\t$( document.body )\r\n\t\t// CHANGE: Use extracted function to process country to state changing\r\n\t\t.on( 'country_to_state_changing', process_country_to_state_changing )\r\n\t\t// CHANGE: Use extracted function to process country to state changing when event `updated_checkout` is triggered\r\n\t\t.on( 'updated_checkout', process_country_to_state_changing_updated_checkout )\r\n\t\t.trigger( 'wc_address_i18n_ready' );\r\n});\r\n"],"names":["jQuery","$","wc_address_i18n_params","_settings","formRowSelector","formRowExpansibleSelector","expansibleToggleSelector","expansibleContentSelector","inputSelector","countryFieldsSelector","addressFieldGroupSelector","overrideLocaleAttributes","locale_json","FCUtils","window","fcSettings","addressI18n","extendObject","locale","replace","JSON","parse","field_is_required","field","is_required","find","remove","addClass","length","append","i18n_required_text","removeClass","i18n_optional_text","process_country_to_state_changing","event","country","wrapper","thisform","currentFocusedElement","document","activeElement","thislocale","$postcodefield","$cityfield","$statefield","locale_fields","attr","each","key","value","expandContent","input","fieldCollapsibleToggle","formRow","fieldLocale","extend","checkoutFields","addressFieldGroup","hasClass","field_key","groupFields","checkoutField","attr_key","attr_value","indexOf","label","html","placeholder","text","required","priority","data","hidden","hide","val","show","CollapsibleBlock","closest","querySelector","fieldCollapsibleContent","collapse","expand","Array","isArray","class","join","index","fieldset","focusedRow","referenceNode","rows","last_priority","first","parent","before","this","sort","a","b","asort","parseInt","bsort","rowsBefore","rowsAfter","_rows","toArray","i","row","contains","parentNode","lastChild","push","j","insertBefore","reverse","nextSibling","maybeRefocusElement","body","on","country_fields","querySelectorAll","trigger"],"mappings":"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"}