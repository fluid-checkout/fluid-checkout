{"version":3,"file":"../admin-image-uploader-240.min.js","sources":["admin-image-uploader-240.js"],"sourcesContent":["/**\n * File admin-image-uploader.js\n *\n * Handles custom upload fields.\n *\n * Author: Diego Versiani\n * Contact: https://diegoversiani.me/\n */\n( function( $ ) {\n\n\t'use strict';\n\n\tvar custom_uploader;\n\tvar dialog_title, button_text, library_type, preview_id, control_id, multiple = false;\n\n\n\tjQuery( document ).ready( function() {\n\t\tjQuery('.image-upload-select-button').on( 'click', select_image_button_click );\n\t\tjQuery('.image-upload-clear-button').on( 'click', clear_image_button_click );\n\t});\n\n\n\n\tfunction select_image_button_click( event ) {\n\t\tevent.preventDefault();\n\n\t\tdialog_title = $(this).data('dialog-title');\n\t\tbutton_text = $(this).data('dialog-button-text');\n\t\tlibrary_type = $(this).data('library-type');\n\t\tpreview_id = $(this).data('preview-id');\n\t\tcontrol_id = $(this).data('control-id');\n\t\tmultiple = $(this).data('multiple');\n\n\t\t//Extend the wp.media object\n\t\tcustom_uploader = wp.media.frames.file_frame = wp.media({\n\t\t\ttitle: dialog_title,\n\t\t\tbutton: {\n\t\t\t\ttext: button_text\n\t\t\t},\n\t\t\tlibrary : { type : library_type },\n\t\t\tmultiple: multiple\n\t\t});\n\n\t\t// When a file is selected\n\t\t// - grab the IDs and set it as the text field's value\n\t\t// - update image previews\n\t\tcustom_uploader.on('select', handle_images_selected);\n\n\t\t//Open the uploader dialog\n\t\tcustom_uploader.open();\n\t}\n\n\n\n\tfunction clear_image_button_click( event) {\n\t\tevent.preventDefault();\n\n\t\tvar preview_id, control_id, message;\n\t\tpreview_id = $(this).data('preview-id');\n\t\tcontrol_id = $(this).data('control-id');\n\t\tmessage = $(this).data('message');\n\n\t\tjQuery('#' + control_id).val('');\n\t\tjQuery('#' + preview_id).empty().append(message);\n\t}\n\n\n\n\tfunction handle_images_selected() {\n\t\tvar ids = '';\n\t\tvar attachments = custom_uploader.state().get('selection');\n\n\t\tvar html = '<ul class=\"uploaded-image-list\">';\n\n\t\tfor (var i = 0; i < attachments.models.length; i++) {\n\t\tvar attachment = attachments.models[i];\n\n\t\tif ( custom_uploader.options.library.type == 'image' ) {\n\t\t\thtml += '<li class=\"uploaded-image\"><img src=\"' + attachment.attributes.url + '\"></li>';\n\t\t}\n\n\t\tids += attachment.attributes.id;\n\t\tif ( i < attachments.models.length-1 ) {\n\t\t\tids += ',';\n\t\t}\n\t\t}\n\n\t\thtml += '</ul>';\n\n\t\tjQuery('#' + control_id).val(ids);\n\t\tjQuery('#' + preview_id).empty();\n\t\tjQuery('#' + preview_id).append(html);\n\t}\n\n\n\n\tfunction get_extension( url ){\n\t\treturn url.substr((url.lastIndexOf('.') + 1));\n\t}\n\n} )( jQuery );\n"],"names":["$","custom_uploader","dialog_title","button_text","library_type","preview_id","control_id","multiple","select_image_button_click","event","preventDefault","this","data","wp","media","frames","file_frame","title","button","text","library","type","on","handle_images_selected","open","clear_image_button_click","message","jQuery","val","empty","append","ids","attachments","state","get","html","i","models","length","attachment","options","attributes","url","id","document","ready"],"mappings":"CAQA,SAAYA,gBAIX,IAAIC,EACAC,EAAcC,EAAaC,EAAcC,EAAYC,EAAYC,EAUrE,SAASC,EAA2BC,GACnCA,EAAMC,iBAENR,EAAeF,EAAEW,MAAMC,KAAK,gBAC5BT,EAAcH,EAAEW,MAAMC,KAAK,sBAC3BR,EAAeJ,EAAEW,MAAMC,KAAK,gBAC5BP,EAAaL,EAAEW,MAAMC,KAAK,cAC1BN,EAAaN,EAAEW,MAAMC,KAAK,cAC1BL,EAAWP,EAAEW,MAAMC,KAAK,aAGxBX,EAAkBY,GAAGC,MAAMC,OAAOC,WAAaH,GAAGC,MAAM,CACvDG,MAAOf,EACPgB,OAAQ,CACPC,KAAMhB,GAEPiB,QAAU,CAAEC,KAAOjB,GACnBG,SAAUA,KAMKe,GAAG,SAAUC,GAG7BtB,EAAgBuB,OAKjB,SAASC,EAA0BhB,GAGlC,IAAgBH,EAAYoB,EAF5BjB,EAAMC,iBAGNL,EAAaL,EAAEW,MAAMC,KAAK,cAC1BN,EAAaN,EAAEW,MAAMC,KAAK,cAC1Bc,EAAU1B,EAAEW,MAAMC,KAAK,WAEvBe,OAAO,IAAMrB,GAAYsB,IAAI,IAC7BD,OAAO,IAAMtB,GAAYwB,QAAQC,OAAOJ,GAKzC,SAASH,IAMR,IALA,IAAIQ,EAAM,GACNC,EAAc/B,EAAgBgC,QAAQC,IAAI,aAE1CC,EAAO,mCAEFC,EAAI,EAAGA,EAAIJ,EAAYK,OAAOC,OAAQF,IAAK,CACpD,IAAIG,EAAaP,EAAYK,OAAOD,GAES,SAAxCnC,EAAgBuC,QAAQpB,QAAQC,OACpCc,GAAQ,wCAA0CI,EAAWE,WAAWC,IAAM,WAG/EX,GAAOQ,EAAWE,WAAWE,GACxBP,EAAIJ,EAAYK,OAAOC,OAAO,IAClCP,GAAO,KAIRI,GAAQ,QAERR,OAAO,IAAMrB,GAAYsB,IAAIG,GAC7BJ,OAAO,IAAMtB,GAAYwB,QACzBF,OAAO,IAAMtB,GAAYyB,OAAOK,GA3EjCR,OAAQiB,UAAWC,MAAO,WACzBlB,OAAO,+BAA+BL,GAAI,QAASd,GACnDmB,OAAO,8BAA8BL,GAAI,QAASG,KAVpD,CA4FKE"}