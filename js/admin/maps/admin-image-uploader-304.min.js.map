{"version":3,"file":"../admin-image-uploader-304.min.js","sources":["admin-image-uploader-304.js"],"sourcesContent":["/**\n * File admin-image-uploader.js\n *\n * Handles custom upload fields.\n *\n * Author: Diego Versiani\n * Contact: https://diegoversiani.me/\n */\n( function( $ ) {\n\n\t'use strict';\n\n\tvar custom_uploader;\n\tvar dialog_title, button_text, library_type, preview_id, control_id, multiple = false;\n\n\n\tjQuery( document ).ready( function() {\n\t\tjQuery('.image-upload-select-button').on( 'click', select_image_button_click );\n\t\tjQuery('.image-upload-clear-button').on( 'click', clear_image_button_click );\n\t});\n\n\n\n\tfunction select_image_button_click( event ) {\n\t\tevent.preventDefault();\n\n\t\tdialog_title = $(this).data('dialog-title');\n\t\tbutton_text = $(this).data('dialog-button-text');\n\t\tlibrary_type = $(this).data('library-type');\n\t\tpreview_id = $(this).data('preview-id');\n\t\tcontrol_id = $(this).data('control-id');\n\t\tmultiple = $(this).data('multiple');\n\n\t\t//Extend the wp.media object\n\t\tcustom_uploader = wp.media.frames.file_frame = wp.media({\n\t\t\ttitle: dialog_title,\n\t\t\tbutton: {\n\t\t\t\ttext: button_text\n\t\t\t},\n\t\t\tlibrary : { type : library_type },\n\t\t\tmultiple: multiple\n\t\t});\n\n\t\t// When a file is selected\n\t\t// - grab the IDs and set it as the text field's value\n\t\t// - update image previews\n\t\tcustom_uploader.on('select', handle_images_selected);\n\n\t\t//Open the uploader dialog\n\t\tcustom_uploader.open();\n\t}\n\n\n\n\tfunction clear_image_button_click( event) {\n\t\tevent.preventDefault();\n\n\t\tvar preview_id, control_id, message;\n\t\tpreview_id = $(this).data('preview-id');\n\t\tcontrol_id = $(this).data('control-id');\n\t\tmessage = $(this).data('message');\n\n\t\tjQuery('#' + control_id).val('');\n\t\tjQuery('#' + preview_id).empty().append(message);\n\t}\n\n\n\n\tfunction handle_images_selected() {\n\t\tvar ids = '';\n\t\tvar attachments = custom_uploader.state().get('selection');\n\n\t\tvar html = '<ul class=\"uploaded-image-list\">';\n\n\t\tfor (var i = 0; i < attachments.models.length; i++) {\n\t\tvar attachment = attachments.models[i];\n\n\t\tif ( custom_uploader.options.library.type == 'image' ) {\n\t\t\thtml += '<li class=\"uploaded-image\"><img src=\"' + attachment.attributes.url + '\"></li>';\n\t\t}\n\n\t\tids += attachment.attributes.id;\n\t\tif ( i < attachments.models.length-1 ) {\n\t\t\tids += ',';\n\t\t}\n\t\t}\n\n\t\thtml += '</ul>';\n\n\t\tjQuery('#' + control_id).val(ids);\n\t\tjQuery('#' + preview_id).empty();\n\t\tjQuery('#' + preview_id).append(html);\n\t}\n\n\n\n\tfunction get_extension( url ){\n\t\treturn url.substr((url.lastIndexOf('.') + 1));\n\t}\n\n} )( jQuery );\n"],"names":["$","custom_uploader","dialog_title","button_text","library_type","preview_id","control_id","multiple","select_image_button_click","event","preventDefault","this","data","wp","media","frames","file_frame","title","button","text","library","type","on","handle_images_selected","open","clear_image_button_click","message","jQuery","val","empty","append","ids","attachments","state","get","html","i","models","length","attachment","options","attributes","url","id","document","ready"],"mappings":"AAQA,CAAA,SAAYA,GAEX,aAEA,IAAIC,EACAC,EAAcC,EAAaC,EAAcC,EAAYC,EAAYC,EAUrE,SAASC,EAA2BC,GACnCA,EAAMC,eAAe,EAErBR,EAAeF,EAAEW,IAAI,EAAEC,KAAK,cAAc,EAC1CT,EAAcH,EAAEW,IAAI,EAAEC,KAAK,oBAAoB,EAC/CR,EAAeJ,EAAEW,IAAI,EAAEC,KAAK,cAAc,EAC1CP,EAAaL,EAAEW,IAAI,EAAEC,KAAK,YAAY,EACtCN,EAAaN,EAAEW,IAAI,EAAEC,KAAK,YAAY,EACtCL,EAAWP,EAAEW,IAAI,EAAEC,KAAK,UAAU,GAGlCX,EAAkBY,GAAGC,MAAMC,OAAOC,WAAaH,GAAGC,MAAM,CACvDG,MAAOf,EACPgB,OAAQ,CACPC,KAAMhB,CACP,EACAiB,QAAU,CAAEC,KAAOjB,CAAa,EAChCG,SAAUA,CACX,CAAC,GAKee,GAAG,SAAUC,CAAsB,EAGnDtB,EAAgBuB,KAAK,CACtB,CAIA,SAASC,EAA0BhB,GAGlC,IAAgBH,EAAYoB,EAF5BjB,EAAMC,eAAe,EAGrBL,EAAaL,EAAEW,IAAI,EAAEC,KAAK,YAAY,EACtCN,EAAaN,EAAEW,IAAI,EAAEC,KAAK,YAAY,EACtCc,EAAU1B,EAAEW,IAAI,EAAEC,KAAK,SAAS,EAEhCe,OAAO,IAAMrB,CAAU,EAAEsB,IAAI,EAAE,EAC/BD,OAAO,IAAMtB,CAAU,EAAEwB,MAAM,EAAEC,OAAOJ,CAAO,CAChD,CAIA,SAASH,IAMR,IALA,IAAIQ,EAAM,GACNC,EAAc/B,EAAgBgC,MAAM,EAAEC,IAAI,WAAW,EAErDC,EAAO,mCAEFC,EAAI,EAAGA,EAAIJ,EAAYK,OAAOC,OAAQF,CAAC,GAAI,CACpD,IAAIG,EAAaP,EAAYK,OAAOD,GAES,SAAxCnC,EAAgBuC,QAAQpB,QAAQC,OACpCc,GAAQ,wCAA0CI,EAAWE,WAAWC,IAAM,WAG/EX,GAAOQ,EAAWE,WAAWE,GACxBP,EAAIJ,EAAYK,OAAOC,OAAO,IAClCP,GAAO,IAER,CAEAI,GAAQ,QAERR,OAAO,IAAMrB,CAAU,EAAEsB,IAAIG,CAAG,EAChCJ,OAAO,IAAMtB,CAAU,EAAEwB,MAAM,EAC/BF,OAAO,IAAMtB,CAAU,EAAEyB,OAAOK,CAAI,CACrC,CA5EAR,OAAQiB,QAAS,EAAEC,MAAO,WACzBlB,OAAO,6BAA6B,EAAEL,GAAI,QAASd,CAA0B,EAC7EmB,OAAO,4BAA4B,EAAEL,GAAI,QAASG,CAAyB,CAC5E,CAAC,CAiFA,EAAGE,MAAO"}